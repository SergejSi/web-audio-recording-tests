(function(e){function t(t){for(var s,o,a=t[0],c=t[1],l=t[2],u=0,h=[];u<a.length;u++)o=a[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);d&&d(t);while(h.length)h.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],s=!0,a=1;a<i.length;a++){var c=i[a];0!==r[c]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=i[0]))}return e}var s={},r={app:0},n=[];function o(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=s,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=c;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"054d":function(e,t,i){},"2cdd":function(e,t,i){"use strict";i("eebc")},"40ea":function(e,t,i){"use strict";i("cff7")},5699:function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("14c6"),i("08c1"),i("4842"),i("d9fc"),i("db4d");var s=i("2b0e"),r=i("ce5b"),n=i.n(r),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("v-app",[i("v-navigation-drawer",{attrs:{fixed:"",temporary:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[i("v-list",{attrs:{dense:""}},[i("v-list-tile",{attrs:{to:"/"}},[i("v-list-tile-action",[i("v-icon",[e._v("home")])],1),i("v-list-tile-content",[i("v-list-tile-title",[e._v("Home")])],1)],1),i("v-list-tile",{attrs:{to:"/diagnostics"}},[i("v-list-tile-action",[i("v-icon",[e._v("mic")])],1),i("v-list-tile-content",[i("v-list-tile-title",[e._v("Diagnostics")])],1)],1),i("v-list-tile",{attrs:{to:"/test1"}},[i("v-list-tile-action",[i("v-icon",[e._v("mic")])],1),i("v-list-tile-content",[i("v-list-tile-title",[e._v("1 - Repeatable Audio Recording")])],1)],1),i("v-list-tile",{attrs:{to:"/test2"}},[i("v-list-tile-action",[i("v-icon",[e._v("mic")])],1),i("v-list-tile-content",[i("v-list-tile-title",[e._v("2 - Processing & Manipulation")])],1)],1),i("v-list-tile",{attrs:{to:"/test3"}},[i("v-list-tile-action",[i("v-icon",[e._v("mic")])],1),i("v-list-tile-content",[i("v-list-tile-title",[e._v("3 - Processors w/ Peak Levels")])],1)],1),i("v-list-tile",{attrs:{to:"/test4"}},[i("v-list-tile-action",[i("v-icon",[e._v("mic")])],1),i("v-list-tile-content",[i("v-list-tile-title",[e._v("4 - Microphone Selection")])],1)],1),i("v-list-tile",{attrs:{to:"/test5"}},[i("v-list-tile-action",[i("v-icon",[e._v("mic")])],1),i("v-list-tile-content",[i("v-list-tile-title",[e._v("5 - Analyser Node")])],1)],1),i("v-list-tile",{attrs:{to:"/test6"}},[i("v-list-tile-action",[i("v-icon",[e._v("mic")])],1),i("v-list-tile-content",[i("v-list-tile-title",[e._v("6 - Alternate Encoders")])],1)],1),i("v-list-tile",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests"}},[i("v-list-tile-action",[i("v-icon",[e._v("code")])],1),i("v-list-tile-content",[i("v-list-tile-title",[e._v("View on Github")])],1)],1),i("v-list-tile",{attrs:{to:"/version"}},[i("v-list-tile-action",[i("v-icon",[e._v("error_outline")])],1),i("v-list-tile-content",[i("v-list-tile-title",[e._v("Build Version")])],1)],1)],1)],1),i("v-toolbar",{attrs:{color:"grey",dark:"",fixed:"",app:""}},[i("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),i("v-toolbar-title",[e._v("Web Audio Recording Tests")]),i("v-spacer"),i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests"}},[i("v-icon",{attrs:{large:""}},[e._v("code")])],1)],1),i("v-content",[i("v-container",{staticClass:"container",attrs:{fluid:""}},[i("div",{attrs:{"mb-5":""}},[i("router-view")],1)])],1)],1)],1)},a=[],c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"mb-5":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("div",{staticClass:"test1"},[i("h3",[e._v("Test 1 "),e.$vuetify.breakpoint.xsOnly?i("span",[i("br")]):e._e(),e.$vuetify.breakpoint.xsOnly?e._e():i("span",[e._v(" - ")]),e._v(" Repeatable Recording & Playback\n      ")]),i("p",[e._v("Click start/stop multiple times to create multiple recordings.")]),i("div",[i("v-btn",{attrs:{disabled:e.recordingInProgress},on:{click:e.startRecording}},[e._v("Start Recording\n        ")]),i("v-btn",{attrs:{disabled:!e.recordingInProgress},on:{click:e.stopRecording}},[e._v("Stop Recording")]),i("v-icon",{class:e.recordingInProgress?"live":""},[e._v("mic")])],1)])]),i("v-layout",{staticClass:"ml-1 mt-1",attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs10:"",md6:""}},[i("v-slider",{attrs:{label:"Mic Gain",max:500},model:{value:e.micGainSlider,callback:function(t){e.micGainSlider=t},expression:"micGainSlider"}})],1),i("v-flex",{attrs:{xs2:""}},[i("div",{staticClass:"input-group"},[i("label",[e._v(e._s(e.micGain))])])])],1),i("v-layout",{staticClass:"ml-1 mt-1",attrs:{row:"",wrap:""}},[i("v-checkbox",{attrs:{label:"Add dynamics compressor to audio graph",disabled:e.recordingInProgress},model:{value:e.addDynamicsCompressor,callback:function(t){e.addDynamicsCompressor=t},expression:"addDynamicsCompressor"}})],1),i("v-layout",{staticClass:"ml-1 mt-1",attrs:{row:"",wrap:""}},[i("v-checkbox",{attrs:{label:"Stop tracks and close audio context when recording stopped"},model:{value:e.cleanupWhenFinished,callback:function(t){e.cleanupWhenFinished=t},expression:"cleanupWhenFinished"}})],1),i("v-layout",{staticClass:"ml-1 mt-1",attrs:{row:"",wrap:""}},[i("v-checkbox",{attrs:{label:"Enable echo cancellation"},model:{value:e.enableEchoCancellation,callback:function(t){e.enableEchoCancellation=t},expression:"enableEchoCancellation"}})],1),e.recordings.length>0?i("v-layout",{attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Recordings")]),e._l(e.recordings,(function(t,s){return i("div",{key:t.ts},[i("v-card",[i("v-card-title",{attrs:{"primary-title":""}},[i("v-layout",{attrs:{column:"",wrap:""}},[i("div",[i("h3",[e._v("Recording #"+e._s(s+1))])]),i("div",{staticClass:"ml-3"},[i("div",[i("audio",{attrs:{src:t.blobUrl,type:t.mimeType,controls:"true"}})]),i("div",[e._v("\n                size: "+e._s(e._f("fileSizeToHumanSize")(t.size))+", type: "+e._s(t.mimeType)+"\n              ")])])])],1)],1),s!==e.recordings.length-1?i("v-divider"):e._e()],1)}))],2):e._e(),i("v-layout",{staticClass:"mt-5",attrs:{column:"",wrap:""}},[i("h4",[e._v("Notes\n      "),i("small",[e._v("(as of iOS 14.3)")])]),i("v-divider"),i("p",[e._v("\n      As of 14.3, iOS appears to have a full MediaRecorder implementation. These tests use feature detection, and now\n      use MediaRecorder on iOS. I have not done extensive testing, but all of these tests seems to work on latest iOS.\n    ")]),i("p",[e._v("\n      This makes many of the notes below no longer relevant.\n    ")]),i("h4",[e._v("Notes\n      "),i("small",[e._v("(as of iOS 11.2.6)")])]),i("v-divider"),i("p",[e._v("\n      There are multiple valid ways to do audio recording and playback on every browser/device combination\n      "),i("i",[e._v("except")]),e._v(" iOS/Safari. I believe there are four significant issues, and only the first one seems to be well\n      known.\n    ")]),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("strong",[e._v("Security context of the getUserMedia handler is important")]),e._v(" - "),i("br"),i("p",[e._v("\n            The most common and widely known issue issue is that the success handler of the getUserMedia is no longer\n            in the context of the user click. As a result, any audio context and processors created in the handler\n            won't work. The solution is to create the audio context and any processors before calling getUserMedia,\n            while still in the user click handler context. Then once getUserMedia provides the stream, use the\n            previously created constructs to setup the graph and start recording.\n          ")])]),i("li",[i("strong",[e._v("Multiple recordings require new audio streams")]),e._v(" - "),i("br"),i("p",[e._v("\n            There are a number of demos that work for the first recording on iOS/Safari, that then fail with empty\n            audio on subsequent recordings until page is reloaded. The reason is that after stopping recording and\n            extracting playable blob, the next recording requires a new AudioStream. This AudioStream can come from\n            another call to getUserMedia (which won't prompt user after the first time), or potentially, by cloning\n            the existing audio stream.\n          ")])]),i("li",[i("strong",[e._v("Red recording bar indicator")]),e._v(" - "),i("br"),i("p",[e._v("\n            After granting permission to microphone, iOS/Safari will show a red bar notification anytime user switches\n            away from the tab where permission was granted. To clear this bar, the recording stream's tracks can be\n            stopped after recording is finished. This can be tested with the checkbox above. Stopping the tracks and\n            closing the audio context is straightforward and works well, except for this last issue (but see updates):\n          ")])]),i("li",[i("strong",[i("del",[e._v("A sleep/lock/switch event can easily break things, is not detectable, and is not easily recoverable\n          ")])]),e._v(" - "),i("br"),i("del",[i("p",[e._v("\n              To see this, make a recording and verify it plays. Switch to mail app, then back to safari and\n              make/verify another recording. As long as red bar/microphone is still visible, it generally works. Then,\n              check the option to stop tracks and close audio context. Make another recording and verify. Switch to\n              mail app and back and try to make another recording. Most of the time the recording will appear to work,\n              but the audio will be silent. As far as I can tell, there is no way to detect this, and there is no way\n              to recover without loading a new tab or force quitting Safari.\n            ")]),i("p",[i("em",[e._v("If")]),e._v(" the tracks are not stopped and so the red bar/icon remains, then this occurs much less\n              frequently. Of course, that means the red bar is constantly visible though. And even then, starting\n              another app that uses the microphone will almost always break things again. I have not been able to find\n              a way to detect, much less, programmatically fix things, when this occurs. My assumption is that the\n              underlying issue is due to low level iOS/Safari bugs, and not in how this code is setting things up.")])])]),i("li",[i("strong",[e._v("Any references not cleaned up after recording complete can affect stability")]),e._v(" - "),i("br"),i("p",[e._v("UPDATED 2018-04-10: After writing the previous section, I rewrote a number of things and removed all\n            dependencies. By doing that I was able to ensure that everything gets cleaned up when recording is\n            complete. I now no longer have stability issues on iOS, though I don't know exactly what was causing it\n            previously. I thought perhaps it was the web worker, which I now close when recording is complete. But\n            quick testing shows that even if I don't close the webworker, this new handling seems to be stable after\n            sleep/lock/switch events.")])]),i("li",[i("strong",[e._v("Mobile-web-app-capable meta might be causing issues")]),e._v(" - "),i("br"),i("p",[e._v('\n            I haven\'t vetted this 100%, but before 11.3 release I thought the "Add to Home Screen" and launching as a\n            full screen web app using apple-mobile-web-app-capable tag worked fine. With 11.3 it no longer works. It\n            appears as if navigator.mediaDevices is missing completely when launched in this context. Similarly,\n            clicking links from apps like slack appears to launch in to a context without mediaDevices. Possibly\n            related\n            '),i("a",{attrs:{href:"https://stackoverflow.com/questions/46228218/how-to-access-camera-on-ios11-home-screen-web-app/46350136"}},[e._v("\n              link on StackOverflow\n            ")]),e._v("\n            .\n          ")])])])])],1),i("v-layout",{attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Source")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test1.vue"}},[e._v("\n            src/views/Test1.vue\n          ")]),i("ul",{staticClass:"ml-3"},[i("li",[e._v("Primarily:\n              "),i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js"}},[e._v("\n                src/shared/RecorderService.js\n              ")])])])])])])],1),i("v-layout",{attrs:{column:"",wrap:"","hidden-xs-only":""}},[i("h4",{staticClass:"mt-3"},[e._v("Relevant")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/muaz-khan/RecordRTC/issues/324"}},[e._v("\n            https://github.com/muaz-khan/RecordRTC/issues/324\n          ")])]),i("li",[i("a",{attrs:{href:"https://github.com/ai/audio-recorder-polyfill/issues/4"}},[e._v("\n            https://github.com/ai/audio-recorder-polyfill/issues/4\n          ")])]),i("li",[i("a",{attrs:{href:"https://github.com/danielstorey/webrtc-audio-recording"}},[e._v("\n            https://github.com/danielstorey/webrtc-audio-recording\n          ")])])])])],1)],1)},l=[],d=(i("ac6a"),i("6b54"),i("a481"),i("d225")),u=i("b0b4"),h=(i("34ef"),function(){var e=2,t=[];function i(i){for(var s=i.length,r=new Uint8Array(s*e),n=0;n<s;n++){var o=n*e,a=i[n];a>1?a=1:a<-1&&(a=-1),a*=32768,r[o]=a,r[o+1]=a>>8}t.push(r)}function s(i){var s=t.length?t[0].length:0,r=t.length*s,n=new Uint8Array(44+r),o=new DataView(n.buffer);o.setUint32(0,1380533830,!1),o.setUint32(4,36+r,!0),o.setUint32(8,1463899717,!1),o.setUint32(12,1718449184,!1),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,1,!0),o.setUint32(24,i,!0),o.setUint32(28,i*e,!0),o.setUint16(32,e,!0),o.setUint16(34,8*e,!0),o.setUint32(36,1684108385,!1),o.setUint32(40,r,!0);for(var a=0;a<t.length;a++)n.set(t[a],a*s+44);t=[];var c=[n.buffer];postMessage(c,[c[0]])}self.onmessage=function(e){"encode"===e.data[0]?i(e.data[1]):"dump"===e.data[0]?s(e.data[1]):"close"===e.data[0]&&self.close()}}),v=(i("15ac"),i("63d9"),function(){var e=1,t=128,i=null,s=1152,r=[];function n(s){importScripts(s.baseUrl+"/workers/encoders/lame.min.js"),i=new lamejs.Mp3Encoder(e,s.sampleRate,t)}function o(e,t){for(var i=0;i<e.length;i++){var s=Math.max(-1,Math.min(1,e[i]));t[i]=s<0?32768*s:32767*s}}function a(e){var t=new Float32Array(e),i=new Int16Array(e.length);return o(t,i),i}function c(e){for(var t=a(e),n=t.length,o=0;n>=0;o+=s){var c=t.subarray(o,o+s),l=i.encodeBuffer(c);r.push(l),n-=s}}function l(){var e=i.flush();e.length>0&&r.push(e),postMessage(r),r=[]}onmessage=function(e){"encode"===e.data[0]?c(e.data[1]):"dump"===e.data[0]?l(e.data[1]):"init"===e.data[0]?n(e.data[1]):"close"===e.data[0]&&self.close()}}),m=function(){var e=1,t=.4,i=null,s=[];function r(s){importScripts(s.baseUrl+"/workers/encoders/OggVorbisEncoder.js"),i=new OggVorbisEncoder(s.sampleRate,e,t)}function n(e){var t=i.encode([e]);s.push(t)}function o(){var e=i.finish("audio/ogg");postMessage(e),s=[]}onmessage=function(e){"encode"===e.data[0]?n(e.data[1]):"dump"===e.data[0]?o(e.data[1]):"init"===e.data[0]?r(e.data[1]):"close"===e.data[0]&&self.close()}},p=function(){function e(t){Object(d["a"])(this,e),this.baseUrl=t,window.AudioContext=window.AudioContext||window.webkitAudioContext,this.em=document.createDocumentFragment(),this.state="inactive",this.chunks=[],this.chunkType="",this.encoderMimeType="audio/wav",this.config={broadcastAudioProcessEvents:!1,createAnalyserNode:!1,createDynamicsCompressorNode:!1,forceScriptProcessor:!1,manualEncoderId:"wav",micGain:1,processorBufferSize:2048,stopTracksAndCloseCtxWhenFinished:!0,usingMediaRecorder:"undefined"!==typeof window.MediaRecorder,enableEchoCancellation:!0}}return Object(u["a"])(e,[{key:"createWorker",value:function(e){var t=e.toString().replace(/^function\s*\(\)\s*{/,"").replace(/}$/,""),i=new Blob([t]);return new Worker(URL.createObjectURL(i))}},{key:"startRecording",value:function(e){var t=this;if("inactive"===this.state){if(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){this.audioCtx=new AudioContext,this.micGainNode=this.audioCtx.createGain(),this.outputGainNode=this.audioCtx.createGain(),this.config.createDynamicsCompressorNode&&(this.dynamicsCompressorNode=this.audioCtx.createDynamicsCompressor()),this.config.createAnalyserNode&&(this.analyserNode=this.audioCtx.createAnalyser()),(this.config.forceScriptProcessor||this.config.broadcastAudioProcessEvents||!this.config.usingMediaRecorder)&&(this.processorNode=this.audioCtx.createScriptProcessor(this.config.processorBufferSize,1,1)),this.audioCtx.createMediaStreamDestination?this.destinationNode=this.audioCtx.createMediaStreamDestination():this.destinationNode=this.audioCtx.destination,this.config.usingMediaRecorder||("mp3"===this.config.manualEncoderId?(this.encoderWorker=this.createWorker(v),this.encoderWorker.postMessage(["init",{baseUrl:"https://kaliatech.github.io/web-audio-recording-tests/dist",sampleRate:this.audioCtx.sampleRate}]),this.encoderMimeType="audio/mpeg"):"ogg"===this.config.manualEncoderId?(this.encoderWorker=this.createWorker(m),this.encoderWorker.postMessage(["init",{baseUrl:"https://kaliatech.github.io/web-audio-recording-tests/dist",sampleRate:this.audioCtx.sampleRate}]),this.encoderMimeType="audio/ogg"):(this.encoderWorker=this.createWorker(h),this.encoderMimeType="audio/wav"),this.encoderWorker.addEventListener("message",(function(e){var i=new Event("dataavailable");"ogg"===t.config.manualEncoderId?i.data=e.data:i.data=new Blob(e.data,{type:t.encoderMimeType}),t._onDataAvailable(i)})));var i={audio:{echoCancellation:this.config.enableEchoCancellation}};return this.config.deviceId&&(i.audio.deviceId=this.config.deviceId),navigator.mediaDevices.getUserMedia(i).then((function(i){t._startRecordingWithStream(i,e)})).catch((function(e){alert("Error with getUserMedia: "+e.message),console.log(e)}))}alert("Missing support for navigator.mediaDevices.getUserMedia")}}},{key:"setMicGain",value:function(e){this.config.micGain=e,this.audioCtx&&this.micGainNode&&this.micGainNode.gain.setValueAtTime(e,this.audioCtx.currentTime)}},{key:"_startRecordingWithStream",value:function(e,t){var i=this;this.micAudioStream=e,this.inputStreamNode=this.audioCtx.createMediaStreamSource(this.micAudioStream),this.audioCtx=this.inputStreamNode.context,this.onGraphSetupWithInputStream&&this.onGraphSetupWithInputStream(this.inputStreamNode),this.inputStreamNode.connect(this.micGainNode),this.micGainNode.gain.setValueAtTime(this.config.micGain,this.audioCtx.currentTime);var s=this.micGainNode;this.dynamicsCompressorNode&&(this.micGainNode.connect(this.dynamicsCompressorNode),s=this.dynamicsCompressorNode),this.state="recording",this.processorNode?(s.connect(this.processorNode),this.processorNode.connect(this.outputGainNode),this.processorNode.onaudioprocess=function(e){return i._onAudioProcess(e)}):s.connect(this.outputGainNode),this.analyserNode&&s.connect(this.analyserNode),this.outputGainNode.connect(this.destinationNode),this.config.usingMediaRecorder?(this.mediaRecorder=new MediaRecorder(this.destinationNode.stream),this.mediaRecorder.addEventListener("dataavailable",(function(e){return i._onDataAvailable(e)})),this.mediaRecorder.addEventListener("error",(function(e){return i._onError(e)})),this.mediaRecorder.start(t)):(this.outputGainNode.gain.setValueAtTime(0,this.audioCtx.currentTime),t&&(console.log("Time slicing without MediaRecorder is not yet supported. The resulting recording will not be playable."),this.slicing=setInterval((function(){"recording"===this.state&&this.encoderWorker.postMessage(["dump",this.context.sampleRate])}),t)))}},{key:"_onAudioProcess",value:function(e){this.config.broadcastAudioProcessEvents&&this.em.dispatchEvent(new CustomEvent("onaudioprocess",{detail:{inputBuffer:e.inputBuffer,outputBuffer:e.outputBuffer}})),this.config.usingMediaRecorder||"recording"===this.state&&(this.config.broadcastAudioProcessEvents?this.encoderWorker.postMessage(["encode",e.outputBuffer.getChannelData(0)]):this.encoderWorker.postMessage(["encode",e.inputBuffer.getChannelData(0)]))}},{key:"stopRecording",value:function(){"inactive"!==this.state&&(this.config.usingMediaRecorder?(this.state="inactive",this.mediaRecorder.stop()):(this.state="inactive",this.encoderWorker.postMessage(["dump",this.audioCtx.sampleRate]),clearInterval(this.slicing)))}},{key:"_onDataAvailable",value:function(e){if(this.chunks.push(e.data),this.chunkType=e.data.type,"inactive"===this.state){var t=new Blob(this.chunks,{type:this.chunkType}),i=URL.createObjectURL(t),s={ts:(new Date).getTime(),blobUrl:i,mimeType:t.type,size:t.size};this.chunks=[],this.chunkType=null,this.destinationNode&&(this.destinationNode.disconnect(),this.destinationNode=null),this.outputGainNode&&(this.outputGainNode.disconnect(),this.outputGainNode=null),this.analyserNode&&(this.analyserNode.disconnect(),this.analyserNode=null),this.processorNode&&(this.processorNode.disconnect(),this.processorNode=null),this.encoderWorker&&(this.encoderWorker.postMessage(["close"]),this.encoderWorker=null),this.dynamicsCompressorNode&&(this.dynamicsCompressorNode.disconnect(),this.dynamicsCompressorNode=null),this.micGainNode&&(this.micGainNode.disconnect(),this.micGainNode=null),this.inputStreamNode&&(this.inputStreamNode.disconnect(),this.inputStreamNode=null),this.config.stopTracksAndCloseCtxWhenFinished&&(this.micAudioStream.getTracks().forEach((function(e){return e.stop()})),this.micAudioStream=null,this.audioCtx.close(),this.audioCtx=null),this.em.dispatchEvent(new CustomEvent("recording",{detail:{recording:s}}))}}},{key:"_onError",value:function(e){console.log("error",e),this.em.dispatchEvent(new Event("error")),alert("error:"+e)}}]),e}(),g=(i("4917"),function(){function e(){Object(d["a"])(this,e)}return Object(u["a"])(e,[{key:"humanFileSize",value:function(e,t){var i=t?1e3:1024;if(Math.abs(e)<i)return e+" B";var s=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=-1;do{e/=i,++r}while(Math.abs(e)>=i&&r<s.length-1);return e.toFixed(1)+" "+s[r]}},{key:"isIosSafari",value:function(){return navigator.userAgent.match(/iP(od|hone|ad)/)&&navigator.userAgent.match(/AppleWebKit/)&&!navigator.userAgent.match(/(Cr|Fx|OP)iOS/)}}]),e}()),f=new g,b={name:"Test1",filters:{fileSizeToHumanSize:function(e){return f.humanFileSize(e,!0)}},data:function(){return{enableEchoCancellation:!0,recordingInProgress:!1,supportedMimeTypes:[],recordings:[],micGainSlider:100,micGain:1,cleanupWhenFinished:!0,addDynamicsCompressor:!1}},created:function(){var e=this;this.recorderSrvc=new p,this.recorderSrvc.em.addEventListener("recording",(function(t){return e.onNewRecording(t)}))},watch:{cleanupWhenFinished:function(e){this.recorderSrvc.config.stopTracksAndCloseCtxWhenFinished=this.cleanupWhenFinished},micGainSlider:function(){this.micGain=(.01*this.micGainSlider).toFixed(2),this.recorderSrvc.setMicGain(this.micGain)}},methods:{startRecording:function(){var e=this;this.recorderSrvc.config.stopTracksAndCloseCtxWhenFinished=this.cleanupWhenFinished,this.recorderSrvc.config.createDynamicsCompressorNode=this.addDynamicsCompressor,this.recorderSrvc.config.enableEchoCancellation=this.enableEchoCancellation,this.recorderSrvc.startRecording().then((function(){e.recordingInProgress=!0})).catch((function(e){console.error("Exception while start recording: "+e),alert("Exception while start recording: "+e.message)}))},stopRecording:function(){this.recorderSrvc.stopRecording(),this.recordingInProgress=!1},onNewRecording:function(e){this.recordings.push(e.detail.recording)}}},w=b,_=(i("9239"),i("2877")),y=Object(_["a"])(w,c,l,!1,null,"bcc0a4ca",null),k=y.exports,C={name:"app",components:{Test1:k},data:function(){return{drawer:!1}}},S=C,x=(i("a0bb"),Object(_["a"])(S,o,a,!1,null,null,null)),R=x.exports,P=i("8c4f"),M=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{md3:""}}),i("v-flex",{attrs:{md6:""}},[i("div",{staticClass:"text-xs-center home--menu"},[i("p",[e._v("\n          Tests to verify functionality of web audio API "),i("strong",[e._v("recording")]),e._v(" across all browsers, especially\n          iOS/Safari. This was created before iOS had native MediaRecorder support, which was added in ~iOS 14.3.\n        ")]),i("div",[i("v-btn",{attrs:{color:"info",to:"/diagnostics"}},[e._v("Browser Diagnostics")])],1),i("div",[i("v-btn",{attrs:{color:"info",to:"/test1"}},[e._v("1 - Repeatable Audio Recording")])],1),i("div",[i("v-btn",{attrs:{color:"info",to:"/test2"}},[e._v("2 - Processing & Manipulation")])],1),i("div",[i("v-btn",{attrs:{color:"info",to:"/test3"}},[e._v("3 - Processors w/ Peak Levels")])],1),i("div",[i("v-btn",{attrs:{color:"info",to:"/test4"}},[e._v("4 - Microphone Selection")])],1),i("div",[i("v-btn",{attrs:{color:"info",to:"/test5"}},[e._v("5 - Analyser Node")])],1),i("div",[i("v-btn",{attrs:{color:"info",to:"/test6"}},[e._v("6 - Alternate Encoders")])],1)])]),i("v-flex",{attrs:{md3:""}})],1)],1)},T=[],D={name:"Home",components:{},data:function(){return{}}},A=D,N=(i("c219"),Object(_["a"])(A,M,T,!1,null,null,null)),I=N.exports,E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mb-3"},[i("v-layout",{attrs:{row:""}},[i("h2",[e._v("Browser Diagnostics")])]),i("v-layout",{staticClass:"mt-3 mb-3",attrs:{row:""}},[i("h4",[e._v("Web Audio Recording Support")])]),i("v-layout",{staticClass:"ml-4",attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("ul",[i("li",[i("span",{staticClass:"lbl"},[e._v("AudioContext")]),e._v(" : "),i("span",{staticClass:"val"},[e._v(e._s(e.audioContextStr))])]),i("li",[i("span",{staticClass:"lbl"},[e._v("webkitAudioContext")]),e._v(" : "),i("span",{staticClass:"val"},[e._v(e._s(e.webkitAudioContextStr))])]),i("li",[i("span",{staticClass:"lbl"},[e._v("mediaDevices")]),e._v(" : "),i("span",{staticClass:"val"},[e._v(e._s(e.mediaDevicesStr))])]),i("li",[i("span",{staticClass:"lbl"},[e._v("getUserMedia")]),e._v(" : "),i("span",{staticClass:"val"},[e._v(e._s(e.getUserMediaStr))])]),i("li",[i("span",{staticClass:"lbl"},[e._v("MediaRecorder")]),e._v(" : "),i("span",{staticClass:"val"},[e._v(e._s(e.hasMediaRecorder))])]),i("li",[i("span",{staticClass:"lbl"},[e._v("AnalyserNode")]),e._v(" : "),i("span",{staticClass:"val"},[e._v(e._s(e.analyserNode))])]),i("li",[i("span",{staticClass:"lbl"},[e._v("DynamicsCompressorNode")]),e._v(" : "),i("span",{staticClass:"val"},[e._v(e._s(e.dynamicsCompressorNode))])])])])],1),i("v-layout",{staticClass:"mt-3",attrs:{row:""}},[i("h4",[e._v("Audio Input Devices")])]),i("v-layout",{staticClass:"ml-4",attrs:{row:"",wrap:""}},e._l(e.availableDeviceNames,(function(t){return i("v-flex",{key:t,attrs:{sm6:""}},[i("div",{staticClass:"pr-3"},[i("ul",[i("li",[e._v(e._s(t))])])])])})),1),e.enumeratedDevicesPermissionNeeded?i("v-layout",{staticClass:"ml-4",attrs:{row:"",wrap:""}},[i("v-btn",{on:{click:e.requestDevicePermissions}},[e._v("Request Default Device Permission")])],1):e._e(),e.enumeratedDevicesPermissionNeeded?i("v-layout",{staticClass:"ml-5",attrs:{row:"",wrap:""}},[e._v("\n    Needed to get device labels\n  ")]):e._e(),e.enumeratedDevicesPermissionRevokable?i("v-layout",{staticClass:"ml-4",attrs:{row:"",wrap:""}},[i("v-btn",{on:{click:e.revokeDevicePermissions}},[e._v("Revoke Default Device Permission")])],1):e._e(),i("v-layout",{staticClass:"mt-3",attrs:{row:""}},[i("h4",[e._v("Supported Device Constraints")])]),i("v-layout",{staticClass:"ml-4",attrs:{row:"",wrap:""}},e._l(e.supportedDeviceConstraints,(function(t){return i("span",{key:t,staticClass:"lbl"},[e._v(e._s(t))])})),0),i("v-layout",{staticClass:"mt-3",attrs:{row:""}},[i("h4",[e._v("Default Capabilities, Constraints, & Settings")])]),i("v-layout",{staticClass:"ml-4",attrs:{row:"",wrap:""}},e._l(e.defaultDeviceDetails,(function(t){return i("v-flex",{key:t.name,attrs:{sm12:""}},[i("ul",[i("li",[i("span",{staticClass:"lbl-1"},[e._v(e._s(t.name))]),e._v(" : "),i("span",{staticClass:"val"},[e._v(e._s(t.text))])])])])})),1),i("v-layout",{staticClass:"mt-3",attrs:{row:""}},[i("h4",[e._v("Supported MediaRecorder Mime Types")])]),i("v-layout",{staticClass:"ml-4",attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("ul",e._l(e.supportedMimeTypes,(function(t){return i("li",{key:t.name},[i("span",{staticClass:"lbl"},[e._v(e._s(t.name))]),e._v(" : "),i("span",{staticClass:"val"},[e._v(e._s(t.supported))])])})),0)])],1),i("v-layout",{attrs:{column:"",wrap:"","hidden-xs-only":"","mt-3":""}},[i("h4",[e._v("References")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://caniuse.com/mediarecorder"}},[e._v("\n            https://caniuse.com/mediarecorder\n          ")])]),i("li",[i("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API"}},[e._v("\n            https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API\n          ")])]),i("li",[i("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API/Constraints"}},[e._v("\n            https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API/Constraints\n          ")])]),i("li",[i("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API"}},[e._v("\n            https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\n          ")])]),i("li",[i("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API"}},[e._v("\n            https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API\n          ")])]),i("li",[i("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices"}},[e._v("\n            https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices\n          ")])]),i("li",[i("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API"}},[e._v("\n            https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API\n          ")])]),i("li",[i("a",{attrs:{href:"https://www.w3.org/TR/webaudio/"}},[e._v("https://www.w3.org/TR/webaudio/")])])]),i("br"),i("ul",[i("li",[i("a",{attrs:{href:"https://webrtc.github.io/samples/"}},[e._v("https://webrtc.github.io/samples/")])]),i("li",[i("a",{attrs:{href:"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/"}},[e._v("\n            https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\n          ")])])])])],1)],1)},z=[],W={name:"Diagnostics",data:function(){return{availableDeviceNames:[],defaultDeviceDetails:[],enumeratedDevices:[],enumeratedDevicesPermissionNeeded:!1,enumeratedDevicesPermissionRevokable:!1,getUserMediaStr:!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),mediaDevicesStr:!!navigator.mediaDevices,supportedMimeTypes:[],hasMediaRecorder:"undefined"!==typeof window.MediaRecorder,supportedDeviceConstraints:[]}},computed:{audioContextStr:function(){return!!window.AudioContext},analyserNode:function(){return!!window.AnalyserNode},dynamicsCompressorNode:function(){return!!window.DynamicsCompressorNode},webkitAudioContextStr:function(){return!!window.webkitAudioContext}},mounted:function(){this.requestDevicePermissions()},destroyed:function(){this.stream&&(this.stream.getTracks().forEach((function(e){return e.stop()})),this.stream=null)},created:function(){var e=["audio/aac","audio/mp4","audio/mpeg","audio/vorbis","audio/wav","audio/webm","audio/webm;codecs=opus","audio/wav","audio/x-wav","audio/vnd.wav","video/quicktime","video/webm","video/webm;codecs=vp8","video/webm;codecs=vp9","video/webm;codecs=h264","video/mp4"];if("undefined"!==typeof MediaRecorder&&MediaRecorder.isTypeSupported)for(var t in e)MediaRecorder.isTypeSupported(e[t])&&this.supportedMimeTypes.push({name:e[t],supported:MediaRecorder.isTypeSupported(e[t])});else this.supportedMimeTypes.push({name:"none",supported:"(manual encoding required)"});this.enumerateDevices();var i=navigator.mediaDevices.getSupportedConstraints();for(var s in i)i.hasOwnProperty(s)&&!0===i[s]&&this.supportedDeviceConstraints.push(s)},methods:{setupAvailDeviceNames:function(){var e=this,t=[];this.enumeratedDevices.forEach((function(i,s){"audioinput"===i.kind&&(i.label?t.push(i.label):(e.enumeratedDevicesPermissionNeeded=!0,t.push("Input "+s+" ("+i.deviceId+")")))})),this.availableDeviceNames=t},enumerateDevices:function(){var e=this;navigator.mediaDevices.enumerateDevices().then((function(t){e.enumeratedDevices=t,e.setupAvailDeviceNames()})).catch((function(t){console.log(t),e.enumeratedDevices.push({id:"-",kind:"error",deviceId:"error"})}))},requestDevicePermissions:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){console.log("stream",t),e.enumerateDevices(),e.enumeratedDevicesPermissionNeeded=!1,e.enumeratedDevicesPermissionRevokable=!0,e.stream=t,e.defaultDeviceDetails=[];var i=e.defaultDeviceDetails,s=t.getAudioTracks();console.log("tracks",s),s.forEach((function(e,t){var s="track["+t+"].";i.push({name:s+"label",text:e.label}),i.push({name:s+"kind",text:e.kind}),i.push({name:s+"muted",text:e.muted});var r=e.getConstraints();for(var n in console.log("constraints",r),r)i.push({name:s+"constr["+n+"]",text:r[n]});var o=e.getCapabilities();for(var a in console.log("capabilities",o),o)i.push({name:s+"capab["+a+"]",text:o[a]});var c=e.getSettings();for(var l in console.log("settings",c),c)i.push({name:s+"settings["+l+"]",text:c[l]})}))})).catch((function(e){console.log(e)}))},revokeDevicePermissions:function(){this.stream&&(this.stream.getTracks().forEach((function(e){return e.stop()})),this.stream=null),this.enumeratedDevicesPermissionNeeded=!0,this.enumeratedDevicesPermissionRevokable=!1,this.enumerateDevices()}}},O=W,j=(i("6912"),Object(_["a"])(O,E,z,!1,null,"6cf7fd6f",null)),U=j.exports,G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"mb-5":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("div",{staticClass:"test2"},[i("h3",[e._v("Test 2 "),e.$vuetify.breakpoint.xsOnly?i("span",[i("br")]):e._e(),e.$vuetify.breakpoint.xsOnly?e._e():i("span",[e._v(" - ")]),e._v(" Recording Processing & Manipulation\n      ")]),i("h3"),i("p",[e._v("Manual processing and manipulation of the recording audio stream.")]),i("div",[i("v-btn",{attrs:{disabled:e.recordingInProgress},on:{click:e.startRecording}},[e._v("Start Recording\n        ")]),i("v-btn",{attrs:{disabled:!e.recordingInProgress},on:{click:e.stopRecording}},[e._v("Stop Recording")]),i("v-icon",{class:e.recordingInProgress?"live":""},[e._v("mic")])],1)])]),i("v-layout",{attrs:{column:"",wrap:""}},[i("div",{ref:"audioProcessDiv",staticClass:"ml-2",attrs:{id:"audioProcessDiv"}},[e._v("\n      Samples Received: "+e._s(e.numAudioSamples)+"\n    ")])]),i("v-layout",{staticClass:"ml-1 mt-1",attrs:{row:"",wrap:""}},[i("v-checkbox",{attrs:{label:"Add noise (dynamic)"},model:{value:e.addNoise,callback:function(t){e.addNoise=t},expression:"addNoise"}})],1),e.recordings.length>0?i("v-layout",{attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Recordings")]),e._l(e.recordings,(function(t,s){return i("div",{key:t.ts},[i("v-card",[i("v-card-title",{attrs:{"primary-title":""}},[i("v-layout",{attrs:{column:"",wrap:""}},[i("div",[i("h3",[e._v("Recording #"+e._s(s+1))])]),i("div",{staticClass:"ml-3"},[i("div",[i("audio",{attrs:{src:t.blobUrl,controls:"true"}})]),i("div",[e._v("\n                size: "+e._s(e._f("fileSizeToHumanSize")(t.size))+", type: "+e._s(t.mimeType)+"\n              ")])])])],1)],1),s!==e.recordings.length-1?i("v-divider"):e._e()],1)}))],2):e._e(),i("v-layout",{attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Source")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test2.vue"}},[e._v("\n            src/views/Test2.vue\n          ")]),i("ul",{staticClass:"ml-3"},[i("li",[e._v("Primarily:\n              "),i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js"}},[e._v("\n                src/shared/RecorderService.js\n              ")])])])])])])],1),i("v-layout",{attrs:{column:"",wrap:"","hidden-xs-only":""}},[i("h4",{staticClass:"mt-3"},[e._v("Relevant")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/muaz-khan/RecordRTC/issues/324"}},[e._v("\n            https://github.com/muaz-khan/RecordRTC/issues/324\n          ")])]),i("li",[i("a",{attrs:{href:"https://github.com/ai/audio-recorder-polyfill/issues/4"}},[e._v("\n            https://github.com/ai/audio-recorder-polyfill/issues/4\n          ")])]),i("li",[i("a",{attrs:{href:"https://github.com/danielstorey/webrtc-audio-recording"}},[e._v("\n            https://github.com/danielstorey/webrtc-audio-recording\n          ")])]),i("li",[i("a",{attrs:{href:"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/"}},[e._v("\n            https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\n          ")])]),i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/MicrosoftEdge/Demos/blob/master/microphone"}},[e._v("\n              https://github.com/MicrosoftEdge/Demos/blob/master/microphone\n            ")])])])])])],1)],1)},B=[],F={name:"Test1",filters:{fileSizeToHumanSize:function(e){return f.humanFileSize(e,!0)}},data:function(){return{recordingInProgress:!1,supportedMimeTypes:[],recordings:[],cleanupWhenFinished:!0,addNoise:!1,numAudioSamples:0}},created:function(){var e=this;this.recorderSrvc=new p,this.recorderSrvc.em.addEventListener("recording",(function(t){return e.onNewRecording(t)})),this.recorderSrvc.em.addEventListener("onaudioprocess",(function(t){return e.onAudioProcess(t)})),this.recorderSrvc.config.broadcastAudioProcessEvents=!0},mounted:function(){},methods:{startRecording:function(){var e=this;this.numAudioSamples=0,this.recorderSrvc.startRecording().then((function(){e.recordingInProgress=!0})).catch((function(e){console.error("Exception while start recording: "+e),alert("Exception while start recording: "+e.message)}))},stopRecording:function(){this.recorderSrvc.stopRecording(),this.recordingInProgress=!1},onAudioProcess:function(e){this.numAudioSamples++;for(var t=e.detail.inputBuffer,i=e.detail.outputBuffer,s=0;s<i.numberOfChannels;s++)for(var r=t.getChannelData(s),n=i.getChannelData(s),o=0;o<t.length;o++)this.addNoise?n[o]=r[o]+.02*Math.random():n[o]=r[o]},onNewRecording:function(e){this.recordings.push(e.detail.recording)}}},H=F,q=(i("2cdd"),Object(_["a"])(H,G,B,!1,null,"0cf2916c",null)),L=q.exports,$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"mb-5":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("div",{staticClass:"test2"},[i("h3",[e._v("Test 3 "),e.$vuetify.breakpoint.xsOnly?i("span",[i("br")]):e._e(),e.$vuetify.breakpoint.xsOnly?e._e():i("span",[e._v(" - ")]),e._v(" Script Processors w/ Peak Levels\n      ")]),i("p",[e._v("Recording with multiple simultaneous script processors. In this case, showing peak levels of recording pre\n        and post gain.")]),i("div",[i("v-btn",{attrs:{disabled:e.recordingInProgress},on:{click:e.startRecording}},[e._v("Start Recording\n        ")]),i("v-btn",{attrs:{disabled:!e.recordingInProgress},on:{click:e.stopRecording}},[e._v("Stop Recording")]),i("v-icon",{class:e.recordingInProgress?"live":""},[e._v("mic")])],1)])]),i("v-layout",{staticClass:"ml-1 mt-1",attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs10:"",md6:""}},[i("v-slider",{attrs:{label:"Mic Gain",max:500},model:{value:e.micGainSlider,callback:function(t){e.micGainSlider=t},expression:"micGainSlider"}})],1),i("v-flex",{attrs:{xs2:""}},[i("div",{staticClass:"input-group"},[i("label",[e._v(e._s(e.micGain))])])])],1),i("v-layout",{attrs:{row:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Recording Peak Meters")])]),i("v-divider"),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs6:"",sm2:""}},[i("div",{staticStyle:{width:"5em",height:"10em",margin:"1em 0",border:"1px solid gray"},attrs:{id:"peak-meter-raw"}}),i("p",[e._v("Raw")])]),i("v-flex",{attrs:{xs6:"",sm2:""}},[i("div",{staticStyle:{width:"5em",height:"10em",margin:"1em 0",border:"1px solid gray"},attrs:{id:"peak-meter-postgain"}}),e._v("\n      PostGain\n    ")]),i("v-spacer")],1),e.recordings.length>0?i("v-layout",{attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Recordings")]),i("v-divider"),e._l(e.recordings,(function(t,s){return i("div",{key:t.ts},[i("v-card",[i("v-card-title",{attrs:{"primary-title":""}},[i("v-layout",{attrs:{column:"",wrap:""}},[i("div",[i("h3",[e._v("Recording #"+e._s(s+1))])]),i("div",{staticClass:"ml-3"},[i("div",[i("audio",{attrs:{src:t.blobUrl,controls:"true"}})]),i("div",[e._v("\n                size: "+e._s(e._f("fileSizeToHumanSize")(t.size))+", type: "+e._s(t.mimeType)+"\n              ")])])])],1)],1),s!==e.recordings.length-1?i("v-divider"):e._e()],1)}))],2):e._e(),i("v-layout",{attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Source")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test3.vue"}},[e._v("\n            src/views/Test3.vue\n          ")]),i("ul",{staticClass:"ml-3"},[i("li",[e._v("Primarily:\n              "),i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js"}},[e._v("\n                src/shared/RecorderService.js\n              ")])])])])])])],1),i("v-layout",{attrs:{column:"",wrap:"","hidden-xs-only":""}},[i("h4",{staticClass:"mt-3"},[e._v("Relevant")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/muaz-khan/RecordRTC/issues/324"}},[e._v("\n            https://github.com/muaz-khan/RecordRTC/issues/324\n          ")])]),i("li",[i("a",{attrs:{href:"https://github.com/ai/audio-recorder-polyfill/issues/4"}},[e._v("\n            https://github.com/ai/audio-recorder-polyfill/issues/4\n          ")])]),i("li",[i("a",{attrs:{href:"https://github.com/danielstorey/webrtc-audio-recording"}},[e._v("\n            https://github.com/danielstorey/webrtc-audio-recording\n          ")])]),i("li",[i("a",{attrs:{href:"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/"}},[e._v("\n            https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\n          ")])]),i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/MicrosoftEdge/Demos/blob/master/microphone"}},[e._v("\n              https://github.com/MicrosoftEdge/Demos/blob/master/microphone\n            ")])])]),i("li",[i("a",{attrs:{href:"https://github.com/esonderegger/web-audio-peak-meter"}},[e._v("\n            https://github.com/esonderegger/web-audio-peak-meter\n          ")])])])])],1)],1)},V=[],Z=i("bd86"),J=function e(){Object(d["a"])(this,e),Object(Z["a"])(this,"getBaseLog",(function(e,t){return Math.log(t)/Math.log(e)})),Object(Z["a"])(this,"dbFromFloat",(function(e){return 20*this.getBaseLog(10,e)})),Object(Z["a"])(this,"setOptions",(function(e){for(var t in e)this.options[t]=e[t];this.tickWidth=2*this.options.fontSize,this.meterTop=1.5*this.options.fontSize+this.options.borderSize})),Object(Z["a"])(this,"createMeterNode",(function(e,t){var i=e.channelCount,s=t.createScriptProcessor(2048,i,i);return e.connect(s),s.connect(t.destination),s})),Object(Z["a"])(this,"createContainerDiv",(function(e){var t=document.createElement("div");return t.style.position="relative",t.style.width=this.elementWidth+"px",t.style.height=this.elementHeight+"px",t.style.backgroundColor=this.options.backgroundColor,e.appendChild(t),t})),Object(Z["a"])(this,"createMeter",(function(e,t,i){var s=this;this.setOptions(i),this.elementWidth=e.clientWidth,this.elementHeight=e.clientHeight;var r=this.createContainerDiv(e);this.elementWidth>this.elementHeight&&(this.vertical=!1),this.meterHeight=this.elementHeight-this.meterTop-this.options.borderSize,this.meterWidth=this.elementWidth-this.tickWidth-this.options.borderSize,this.createTicks(r),this.createRainbow(r,this.meterWidth,this.meterHeight,this.meterTop,this.tickWidth),this.channelCount=t.channelCount;for(var n=this.meterWidth/this.channelCount,o=this.tickWidth,a=0;a<this.channelCount;a++)this.createChannelMask(r,this.options.borderSize,this.meterTop,o,!1),this.channelMasks[a]=this.createChannelMask(r,n,this.meterTop,o,this.options.maskTransition),this.channelPeaks[a]=0,this.channelPeakLabels[a]=this.createPeakLabel(r,n,o),o+=n;t.onaudioprocess=function(e){return s.updateMeter(e)},r.addEventListener("click",(function(){for(var e=0;e<this.channelCount;e++)this.channelPeaks[e]=0,this.channelPeakLabels[e].textContent="-∞"}),!1)})),Object(Z["a"])(this,"createTicks",(function(e){for(var t=Math.floor(this.options.dbRange/this.options.dbTickSize),i=0,s=this.options.fontSize+this.options.borderSize,r=0;r<t;r++){var n=document.createElement("div");e.appendChild(n),n.style.width=this.tickWidth+"px",n.style.textAlign="right",n.style.color=this.options.tickColor,n.style.fontSize=this.options.fontSize+"px",n.style.position="absolute",n.style.top=s+"px",n.textContent=i+"",i-=this.options.dbTickSize,s+=this.meterHeight/t}})),Object(Z["a"])(this,"createRainbow",(function(e,t,i,s,r){var n=document.createElement("div");e.appendChild(n),n.style.width=t+"px",n.style.height=i+"px",n.style.position="absolute",n.style.top=s+"px",n.style.left=r+"px";var o="linear-gradient("+this.options.gradient.join(", ")+")";return n.style.backgroundImage=o,n})),Object(Z["a"])(this,"createPeakLabel",(function(e,t,i){var s=document.createElement("div");return e.appendChild(s),s.style.width=t+"px",s.style.textAlign="center",s.style.color=this.options.tickColor,s.style.fontSize=this.options.fontSize+"px",s.style.position="absolute",s.style.top=this.options.borderSize+"px",s.style.left=i+"px",s.textContent="-∞",s})),Object(Z["a"])(this,"createChannelMask",(function(e,t,i,s,r){var n=document.createElement("div");return e.appendChild(n),n.style.width=t+"px",n.style.height=this.meterHeight+"px",n.style.position="absolute",n.style.top=i+"px",n.style.left=s+"px",n.style.backgroundColor=this.options.backgroundColor,r&&(n.style.transition=this.options.maskTransition),n})),Object(Z["a"])(this,"maskSize",(function(e){if(0===e)return this.meterHeight;var t=-1*this.options.dbRange,i=Math.floor(this.dbFromFloat(e)*this.meterHeight/t);return i>this.meterHeight?this.meterHeight:i})),Object(Z["a"])(this,"updateMeter",(function(e){var t,i=e.inputBuffer,s=[],r=[];for(t=0;t<this.channelCount;t++)s[t]=i.getChannelData(t),r[t]=0;for(var n=0;n<i.length;n++)for(t=0;t<this.channelCount;t++)Math.abs(s[t][n])>r[t]&&(r[t]=Math.abs(s[t][n]));for(t=0;t<this.channelCount;t++){var o=this.maskSize(r[t],this.meterHeight);if(this.channelMasks[t].style.height=o+"px",r[t]>this.channelPeaks[t]){this.channelPeaks[t]=r[t];var a=this.dbFromFloat(this.channelPeaks[t]).toFixed(1);this.channelPeakLabels[t].textContent=a}}})),this.options={borderSize:2,fontSize:9,backgroundColor:"black",tickColor:"#ddd",gradient:["red 1%","#ff0 16%","lime 45%","#080 100%"],dbRange:48,dbTickSize:6,maskTransition:"height 0.1s"},this.vertical=!0,this.channelCount=1,this.channelMasks=[],this.channelPeaks=[],this.channelPeakLabels=[]},K=new J,Y=new J,Q={name:"Test3",filters:{fileSizeToHumanSize:function(e){return f.humanFileSize(e,!0)}},data:function(){return{micGainSlider:100,micGain:1,recordingInProgress:!1,supportedMimeTypes:[],recordings:[],cleanupWhenFinished:!0}},watch:{micGainSlider:function(){this.micGain=(.01*this.micGainSlider).toFixed(2),this.recorderSrvc.setMicGain(this.micGain)}},created:function(){var e=this;this.recorderSrvc=new p,this.recorderSrvc.em.addEventListener("recording",(function(t){return e.onNewRecording(t)})),this.recorderSrvc.onGraphSetupWithInputStream=function(t){e.meterNodeRaw=K.createMeterNode(t,e.recorderSrvc.audioCtx),K.createMeter(e.peakMeterRawEl,e.meterNodeRaw,{})}},mounted:function(){this.peakMeterRawEl=document.getElementById("peak-meter-raw"),this.peakMeterPostGainEl=document.getElementById("peak-meter-postgain")},methods:{startRecording:function(){var e=this;this.recorderSrvc.startRecording().then((function(){e.recordingInProgress=!0,e.meterNodePostGain=Y.createMeterNode(e.recorderSrvc.micGainNode,e.recorderSrvc.audioCtx),Y.createMeter(e.peakMeterPostGainEl,e.meterNodePostGain,{})})).catch((function(e){console.error("Exception while start recording: "+e),alert("Exception while start recording: "+e.message)}))},stopRecording:function(){this.recorderSrvc.stopRecording(),this.recordingInProgress=!1,this.meterNodeRaw.disconnect(),this.meterNodeRaw=null,this.peakMeterRawEl.innerHTML="",this.meterNodePostGain.disconnect(),this.meterNodePostGain=null,this.peakMeterPostGainEl.innerHTML=""},onNewRecording:function(e){this.recordings.push(e.detail.recording)}}},X=Q,ee=(i("700e"),Object(_["a"])(X,$,V,!1,null,"3e85acbd",null)),te=ee.exports,ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"mb-5":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("div",{staticClass:"test2"},[i("h3",[e._v("Test 4 "),e.$vuetify.breakpoint.xsOnly?i("span",[i("br")]):e._e(),e.$vuetify.breakpoint.xsOnly?e._e():i("span",[e._v(" - ")]),e._v(" Microphone Selection\n      ")]),i("p",[e._v("Test microphone input selection. See\n        "),i("router-link",{attrs:{to:"/diagnostics"}},[e._v("diagnostics")]),e._v("\n        for full enumeration and capabilities. Showing microphone labels first requires permissions to an input\n        device. Click eye icon to show microphone labels.\n      ")],1)])]),i("v-layout",{staticClass:"ml-1 mt-1",attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs9:"",md6:""}},[i("v-select",{attrs:{items:e.availableDevices,label:"Select Mic","single-line":"","item-text":"name","item-value":"device.deviceId"},model:{value:e.selectedDeviceId,callback:function(t){e.selectedDeviceId=t},expression:"selectedDeviceId"}})],1),i("v-flex",{attrs:{xs1:""}},[i("div",{staticClass:"input-group"},[i("v-btn",{attrs:{color:"primary",flat:"",small:""},on:{click:e.enumerateDevicesWithPermission}},[i("v-icon",[e._v("remove_red_eye")])],1)],1)])],1),i("v-layout",{staticClass:"ml-1 mt-1",attrs:{row:"",wrap:""}},[i("div",[i("v-btn",{attrs:{disabled:e.recordingInProgress},on:{click:e.startRecording}},[e._v("Start Recording\n      ")]),i("v-btn",{attrs:{disabled:!e.recordingInProgress},on:{click:e.stopRecording}},[e._v("Stop Recording")]),i("v-icon",{class:e.recordingInProgress?"live":""},[e._v("mic")])],1)]),e.recordings.length>0?i("v-layout",{attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Recordings")]),i("v-divider"),e._l(e.recordings,(function(t,s){return i("div",{key:t.ts},[i("v-card",[i("v-card-title",{attrs:{"primary-title":""}},[i("v-layout",{attrs:{column:"",wrap:""}},[i("div",[i("h3",[e._v("Recording #"+e._s(s+1))])]),i("div",{staticClass:"ml-3"},[i("div",[i("audio",{attrs:{src:t.blobUrl,controls:"true"}})]),i("div",[e._v("\n                size: "+e._s(e._f("fileSizeToHumanSize")(t.size))+", type: "+e._s(t.mimeType)+"\n              ")])])])],1)],1),s!==e.recordings.length-1?i("v-divider"):e._e()],1)}))],2):e._e(),i("v-layout",{attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Source")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test4.vue"}},[e._v("\n            src/views/Test4.vue\n          ")]),i("ul",{staticClass:"ml-3"},[i("li",[e._v("Primarily:\n              "),i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js"}},[e._v("\n                src/shared/RecorderService.js\n              ")])])])])])])],1),i("v-layout",{attrs:{column:"",wrap:"","hidden-xs-only":""}},[i("h4",{staticClass:"mt-3"},[e._v("Relevant")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://webrtc.github.io/samples/src/content/devices/input-output/"}},[e._v("\n            https://webrtc.github.io/samples/src/content/devices/input-output/\n          ")])])])])],1)],1)},se=[],re={name:"Test3",filters:{fileSizeToHumanSize:function(e){return f.humanFileSize(e,!0)}},data:function(){return{availableDevices:[],enumeratedDevices:[],selectedDeviceId:null,recordingInProgress:!1,recordings:[],microphones:[]}},watch:{},created:function(){var e=this;this.recorderSrvc=new p,this.recorderSrvc.em.addEventListener("recording",(function(t){return e.onNewRecording(t)})),this.enumerateDevices()},mounted:function(){},methods:{startRecording:function(){var e=this;this.recorderSrvc.config.deviceId=this.selectedDeviceId,this.recorderSrvc.startRecording().then((function(){e.recordingInProgress=!0})).catch((function(e){console.error("Exception while start recording: "+e),alert("Exception while start recording: "+e.message)}))},stopRecording:function(){this.recorderSrvc.stopRecording(),this.recordingInProgress=!1},setupAvailDeviceNames:function(){var e=this,t=[];this.enumeratedDevices.forEach((function(i){"audioinput"===i.kind&&(i.label?t.push({name:i.label,device:i}):(e.enumeratedDevicesPermissionNeeded=!0,t.push({name:"Audio Input "+(t.length+1),device:i})))})),this.availableDevices=t},enumerateDevices:function(){var e=this;navigator.mediaDevices.enumerateDevices().then((function(t){e.enumeratedDevices=t,e.setupAvailDeviceNames(),e.availableDevices&&e.availableDevices.length>1&&e.availableDevices[0].device&&(e.selectedDeviceId=e.availableDevices[0].device.deviceId),e.stream&&(e.stream.getTracks().forEach((function(e){return e.stop()})),e.stream=null)})).catch((function(t){console.log(t),e.enumeratedDevices.push({id:"-",kind:"error",deviceId:"error"})}))},enumerateDevicesWithPermission:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0,deviceId:"default"}).then((function(t){e.enumerateDevices(),e.stream=t})).catch((function(e){console.log(e)}))},onNewRecording:function(e){this.recordings.push(e.detail.recording)}}},ne=re,oe=(i("cae3"),Object(_["a"])(ne,ie,se,!1,null,"271d3caa",null)),ae=oe.exports,ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"mb-5":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("div",{staticClass:"test2"},[i("h3",[e._v("Test 5 "),e.$vuetify.breakpoint.xsOnly?i("span",[i("br")]):e._e(),e.$vuetify.breakpoint.xsOnly?e._e():i("span",[e._v(" - ")]),e._v(" Analyzer Node\n      ")]),i("p",[e._v("Test using analyzer node.\n      ")])])]),i("v-layout",{staticClass:"ml-1 mt-1",attrs:{row:"",wrap:""}},[i("div",[i("v-btn",{attrs:{disabled:e.recordingInProgress},on:{click:e.startRecording}},[e._v("Start Recording\n      ")]),i("v-btn",{attrs:{disabled:!e.recordingInProgress},on:{click:e.stopRecording}},[e._v("Stop Recording")]),i("v-icon",{class:e.recordingInProgress?"live":""},[e._v("mic")])],1)]),i("v-layout",{staticClass:"mt-1",attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("h4",{staticClass:"mt-3"},[e._v("FFT Visualization")]),i("v-divider")],1),i("v-flex",{attrs:{xs12:""}},[i("canvas",{staticStyle:{border:"1px solid black",width:"100%",height:"20em"}})])],1),e.recordings.length>0?i("v-layout",{attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Recordings")]),i("v-divider"),e._l(e.recordings,(function(t,s){return i("div",{key:t.ts},[i("v-card",[i("v-card-title",{attrs:{"primary-title":""}},[i("v-layout",{attrs:{column:"",wrap:""}},[i("div",[i("h3",[e._v("Recording #"+e._s(s+1))])]),i("div",{staticClass:"ml-3"},[i("div",[i("audio",{attrs:{src:t.blobUrl,controls:"true"}})]),i("div",[e._v("\n                size: "+e._s(e._f("fileSizeToHumanSize")(t.size))+", type: "+e._s(t.mimeType)+"\n              ")])])])],1)],1),s!==e.recordings.length-1?i("v-divider"):e._e()],1)}))],2):e._e(),i("v-layout",{attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Source")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test5.vue"}},[e._v("\n            src/views/Test5.vue\n          ")]),i("ul",{staticClass:"ml-3"},[i("li",[e._v("Primarily:\n              "),i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js"}},[e._v("\n                src/shared/RecorderService.js\n              ")])])])])])])],1),i("v-layout",{attrs:{column:"",wrap:"","hidden-xs-only":""}},[i("h4",{staticClass:"mt-3"},[e._v("Relevant")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode"}},[e._v("\n            https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode\n          ")])]),i("li",[i("a",{attrs:{href:"http://webaudioapi.com/samples/visualizer/"}},[e._v("http://webaudioapi.com/samples/visualizer/")])])])])],1)],1)},le=[],de=.7,ue=2048,he={name:"Test3",filters:{fileSizeToHumanSize:function(e){return f.humanFileSize(e,!0)}},data:function(){return{recordingInProgress:!1,recordings:[]}},watch:{},created:function(){var e=this;this.recorderSrvc=new p,this.recorderSrvc.config.createAnalyserNode=!0,this.recorderSrvc.em.addEventListener("recording",(function(t){return e.onNewRecording(t)}))},mounted:function(){},methods:{startRecording:function(){var e=this;this.recorderSrvc.startRecording().then((function(){e.recordingInProgress=!0,e.analyser=e.recorderSrvc.analyserNode,e.audioCtx=e.recorderSrvc.audioCtx,e.analyser.minDecibels=-140,e.analyser.maxDecibels=0,e.freqs=new Uint8Array(e.analyser.frequencyBinCount),e.times=new Uint8Array(e.analyser.frequencyBinCount),e.canvas=document.querySelector("canvas"),e.canvasWidth=e.canvas.width,e.canvasHeight=e.canvas.height,window.requestAnimationFrame(e.draw.bind(e))})).catch((function(e){console.error("Exception while start recording: "+e),alert("Exception while start recording: "+e.message)}))},stopRecording:function(){this.recordingInProgress=!1,this.recorderSrvc.stopRecording()},onNewRecording:function(e){this.recordings.push(e.detail.recording)},draw:function(){this.analyser.smoothingTimeConstant=de,this.analyser.fftSize=ue,this.analyser.getByteFrequencyData(this.freqs),this.analyser.getByteTimeDomainData(this.times);var e=this.canvas,t=e.getContext("2d"),i=this.canvasWidth,s=this.canvasHeight;t.clearRect(0,0,i,s);for(var r=0;r<this.analyser.frequencyBinCount;r++){var n=this.freqs[r],o=n/256,a=s*o,c=s-a-1,l=i/this.analyser.frequencyBinCount,d=r/this.analyser.frequencyBinCount*360;t.fillStyle="hsl("+d+", 100%, 50%)",t.fillRect(r*l,c,l,a)}t.fillStyle="gray";for(var u=0;u<this.analyser.frequencyBinCount;u++){var h=this.times[u],v=h/256,m=s*v,p=s-m-1,g=i/this.analyser.frequencyBinCount;t.fillRect(u*g,p,1,2)}this.recordingInProgress&&window.requestAnimationFrame(this.draw.bind(this))},getFrequencyValue:function(e){var t=this.audioContext.sampleRate/2,i=Math.round(e/t*this.freqs.length);return this.freqs[i]}}},ve=he,me=(i("b52b"),Object(_["a"])(ve,ce,le,!1,null,"70bdb58e",null)),pe=me.exports,ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"mb-5":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("div",{staticClass:"test2"},[i("h3",[e._v("Test 6 "),e.$vuetify.breakpoint.xsOnly?i("span",[i("br")]):e._e(),e.$vuetify.breakpoint.xsOnly?e._e():i("span",[e._v(" - ")]),e._v(" In-browser Encoding\n      ")]),i("p",[e._v("Tests to verify encoding capabilities "),i("em",[e._v("while")]),e._v(" recording. Note that for this test, the native\n        MediaRecorder is disabled even on browsers that have it.")])])]),e.hasMediaRecorder?e._e():i("v-layout",{staticClass:"ml-1 mt-1",attrs:{row:"",wrap:""}},[i("div",[i("v-btn",{attrs:{disabled:e.recordingInProgress},on:{click:e.startRecording}},[e._v("Start Recording\n      ")]),i("v-btn",{attrs:{disabled:!e.recordingInProgress},on:{click:e.stopRecording}},[e._v("Stop Recording")]),i("v-icon",{class:e.recordingInProgress?"live":""},[e._v("mic")])],1)]),e.hasMediaRecorder?i("v-layout",{staticClass:"ml-1 mt-1",attrs:{row:"",wrap:""}},[i("div",[i("v-alert",{attrs:{type:"error",value:"true"}},[e._v("\n        This test only makes sense on browsers that don't have a native MediaRecorder. It would be possible to use a\n        manual encoder on other browsers, but this test isn't written to support it.\n      ")])],1)]):e._e(),i("v-layout",{staticClass:"mt-1",attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("h4",{staticClass:"mt-3"},[e._v("Select Encoder")]),i("v-divider")],1),i("v-flex",{attrs:{xs12:""}},[i("v-flex",{attrs:{xs9:"",md6:""}},[i("v-select",{attrs:{items:this.encoders,label:"Select Encoder","single-line":"","item-text":"name","item-value":"id",disabled:e.recordingInProgress},model:{value:e.selectedEncoder,callback:function(t){e.selectedEncoder=t},expression:"selectedEncoder"}})],1)],1)],1),e.recordings.length>0?i("v-layout",{attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Recordings")]),i("v-divider"),e._l(e.recordings,(function(t,s){return i("div",{key:t.ts},[i("v-card",[i("v-card-title",{attrs:{"primary-title":""}},[i("v-layout",{attrs:{column:"",wrap:""}},[i("div",[i("h3",[e._v("Recording #"+e._s(s+1))])]),i("div",{staticClass:"ml-3"},[i("div",[i("audio",{attrs:{src:t.blobUrl,type:t.mimeType,controls:"true"}})]),i("div",[i("a",{attrs:{href:t.blobUrl,download:""}},[e._v("download")])]),i("div",[e._v("\n                size: "+e._s(e._f("fileSizeToHumanSize")(t.size))+", type: "+e._s(t.mimeType)+"\n              ")])])])],1)],1),s!==e.recordings.length-1?i("v-divider"):e._e()],1)}))],2):e._e(),i("v-layout",{staticClass:"mt-3",attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Notes")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("p",[e._v("\n        This is important mostly for safari/edge or any browser without native MediaRecorder support. Without native\n        encoding, most encoding implementations encode the incoming audio stream to uncompressed PCM audio/wav.\n        However, this significantly limits the duration of the recording due to memory constraints. And if not encoded\n        before upload, the upload is significantly larger than it would be if using a compressed encoding. Encoding\n        the wav data after recording, before uploading, is relatively straightforward. This test is specifically to\n        test encoding "),i("em",[e._v("while")]),e._v(" recording.\n      ")]),i("p",[e._v("\n        This test uses web workers to do the encoding. Check out\n        "),i("a",{attrs:{href:"https://higuma.github.io/ogg-vorbis-encoder-js/"}},[e._v("this demo\n        ")]),e._v("\n        for testing encoding with and without workers.\n      ")]),i("p",[e._v("\n        If using ogg encoder, the resulting recordings will not playback on ios/safari because it doesn't support the\n        format natively. Also, I was unable to get the minified version (~800k) of the ogg encoder to work. The\n        unminified version currently used in this test is ~2.3MB (or ~400k gzipped).\n      ")])])],1),i("v-layout",{staticClass:"mt-3",attrs:{column:"",wrap:""}},[i("h4",{staticClass:"mt-3"},[e._v("Source")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test6.vue"}},[e._v("\n            src/views/Test6.vue\n          ")]),i("ul",{staticClass:"ml-3"},[i("li",[e._v("Primarily:\n              "),i("a",{attrs:{href:"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js"}},[e._v("\n                src/shared/RecorderService.js\n              ")])])])])])])],1),i("v-layout",{attrs:{column:"",wrap:"","hidden-xs-only":""}},[i("h4",{staticClass:"mt-3"},[e._v("Relevant")]),i("v-divider"),i("div",{staticClass:"ml-4"},[i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/zhuker/lamejs"}},[e._v("https://github.com/zhuker/lamejs")])]),i("li",[i("a",{attrs:{href:"https://github.com/zhuker/lamejs/pull/17"}},[e._v("https://github.com/zhuker/lamejs/pull/17")])]),i("li",[i("a",{attrs:{href:"https://higuma.github.io/ogg-vorbis-encoder-js/"}},[e._v("https://higuma.github.io/ogg-vorbis-encoder-js/\n          ")]),i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/higuma/ogg-vorbis-encoder-js"}},[e._v("https://github.com/higuma/ogg-vorbis-encoder-js\n              ")])])])])])])],1)],1)},fe=[],be=[{id:"wav",name:"audio/wav - custom - mono"},{id:"mp3",name:"audio/mpeg - zhuker/lamejs - mono/128kbps"},{id:"ogg",name:"audio/ogg - higuma/oggjs - mono/~128kps"}],we={name:"Test3",filters:{fileSizeToHumanSize:function(e){return f.humanFileSize(e,!0)}},data:function(){return{encoders:be,hasMediaRecorder:window.MediaRecorder||!1,selectedEncoder:be[0].id,recordingInProgress:!1,recordings:[]}},watch:{},created:function(){var e=this;this.recorderSrvc=new p,this.recorderSrvc.config.usingMediaRecorder=!1,this.hasMediaRecorder=this.recorderSrvc.config.usingMediaRecorder,this.recorderSrvc.em.addEventListener("recording",(function(t){return e.onNewRecording(t)}))},mounted:function(){},methods:{startRecording:function(){var e=this;this.recorderSrvc.config.manualEncoderId=this.selectedEncoder,this.recorderSrvc.startRecording().then((function(){e.recordingInProgress=!0})).catch((function(e){console.error("Exception while start recording: "+e),alert("Exception while start recording: "+e.message)}))},stopRecording:function(){this.recordingInProgress=!1,this.recorderSrvc.stopRecording()},onNewRecording:function(e){this.recordings.push(e.detail.recording)}}},_e=we,ye=(i("40ea"),Object(_["a"])(_e,ge,fe,!1,null,"71cd8b71",null)),ke=ye.exports,Ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{fluid:""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("h3",[e._v("Version")]),e._v("\n      "+e._s(e.version)+"\n    ")]),i("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[i("h3",[e._v("Commit")]),e._v("\n      "+e._s(e.commit)+"\n    ")]),i("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[i("h3",[e._v("Branch")]),e._v("\n      "+e._s(e.branch)+"\n    ")]),i("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[i("h3",[e._v("Timestamp")]),e._v("\n      "+e._s(e.timestamp)+"\n    ")])],1)],1)},Se=[],xe={data:function(){return{version:"8f9f847",commit:"8f9f8473285dd42f6267bb1e30dcb73e5f1b8f74",branch:"master",timestamp:"2021-01-16T15:31:50.292Z"}}},Re=xe,Pe=Object(_["a"])(Re,Ce,Se,!1,null,null,null),Me=Pe.exports;s["default"].use(P["a"]);var Te=new P["a"]({mode:"hash",routes:[{path:"/",name:"home",component:I},{path:"/diagnostics",name:"diagnostics",component:U},{path:"/test1",name:"test1",component:k},{path:"/test2",name:"test2",component:L},{path:"/test3",name:"test3",component:te},{path:"/test4",name:"test4",component:ae},{path:"/test5",name:"test5",component:pe},{path:"/test6",name:"test6",component:ke},{path:"/version",name:"version",component:Me}]}),De=Te;s["default"].use(n.a,{theme:{primary:"#546E7A",secondary:"#B0BEC5",accent:"#448AFF",error:"#EF5350",warning:"#FFF176",info:"#2196f3",success:"#4caf50"}}),s["default"].config.productionTip=!1,new s["default"]({router:De,render:function(e){return e(R)}}).$mount("#app")},6912:function(e,t,i){"use strict";i("5699")},"700e":function(e,t,i){"use strict";i("9f9b")},"86b3":function(e,t,i){},9239:function(e,t,i){"use strict";i("a210")},"9f9b":function(e,t,i){},a0bb:function(e,t,i){"use strict";i("86b3")},a210:function(e,t,i){},b52b:function(e,t,i){"use strict";i("d6db")},c219:function(e,t,i){"use strict";i("e9bb")},cae3:function(e,t,i){"use strict";i("054d")},cff7:function(e,t,i){},d6db:function(e,t,i){},e9bb:function(e,t,i){},eebc:function(e,t,i){}});
//# sourceMappingURL=app.a3ad6502.js.map