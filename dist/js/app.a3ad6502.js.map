{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Test2.vue?1bbe","webpack:///./src/views/Test6.vue?f751","webpack:///./src/App.vue?2bfa","webpack:///./src/views/Test1.vue?85d0","webpack:///./src/shared/encoder-wav-worker.js","webpack:///./src/shared/encoder-mp3-worker.js","webpack:///./src/shared/encoder-ogg-worker.js","webpack:///./src/shared/RecorderService.js","webpack:///./src/shared/Utils.js","webpack:///src/views/Test1.vue","webpack:///./src/views/Test1.vue?80a5","webpack:///./src/views/Test1.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?992a","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?493c","webpack:///./src/views/Home.vue","webpack:///./src/views/Diagnostics.vue?0ac3","webpack:///src/views/Diagnostics.vue","webpack:///./src/views/Diagnostics.vue?1f26","webpack:///./src/views/Diagnostics.vue?806f","webpack:///./src/views/Test2.vue?aef5","webpack:///src/views/Test2.vue","webpack:///./src/views/Test2.vue?704f","webpack:///./src/views/Test2.vue","webpack:///./src/views/Test3.vue?997c","webpack:///./src/shared/WebAudioPeakMeter.js","webpack:///src/views/Test3.vue","webpack:///./src/views/Test3.vue?4a98","webpack:///./src/views/Test3.vue","webpack:///./src/views/Test4.vue?5d28","webpack:///src/views/Test4.vue","webpack:///./src/views/Test4.vue?1c0b","webpack:///./src/views/Test4.vue","webpack:///./src/views/Test5.vue?eb1b","webpack:///src/views/Test5.vue","webpack:///./src/views/Test5.vue?4a26","webpack:///./src/views/Test5.vue","webpack:///./src/views/Test6.vue?ff31","webpack:///src/views/Test6.vue","webpack:///./src/views/Test6.vue?4ae7","webpack:///./src/views/Test6.vue","webpack:///./src/views/Version.vue?bf16","webpack:///src/views/Version.vue","webpack:///./src/views/Version.vue?df46","webpack:///./src/views/Version.vue","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/views/Diagnostics.vue?851f","webpack:///./src/views/Test3.vue?babf","webpack:///./src/views/Test1.vue?e5b1","webpack:///./src/App.vue?8111","webpack:///./src/views/Test5.vue?9e8a","webpack:///./src/views/Home.vue?7f92","webpack:///./src/views/Test4.vue?6ef5"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","model","callback","$$v","drawer","expression","_v","on","$event","stopPropagation","staticClass","staticRenderFns","$vuetify","breakpoint","_e","xsOnly","recordingInProgress","startRecording","stopRecording","class","micGainSlider","_s","micGain","addDynamicsCompressor","cleanupWhenFinished","enableEchoCancellation","recordings","_l","recording","idx","ts","blobUrl","mimeType","_f","size","BYTES_PER_SAMPLE","recorded","encode","buffer","Uint8Array","index","sample","dump","sampleRate","bufferLength","wav","view","DataView","setUint32","setUint16","set","msg","postMessage","self","onmessage","e","close","channels","kbps","mp3encoder","maxSamples","mp3Data","init","opts","importScripts","baseUrl","lamejs","Mp3Encoder","floatTo16BitPCM","input","output","Math","max","min","convertBuffer","arrayBuffer","Float32Array","out","Int16Array","samplesMono","remaining","left","subarray","encodeBuffer","mp3buf","flush","quality","oggEncoder","oggData","OggVorbisEncoder","blob","finish","RecorderService","AudioContext","webkitAudioContext","em","document","createDocumentFragment","state","chunks","chunkType","encoderMimeType","config","broadcastAudioProcessEvents","createAnalyserNode","createDynamicsCompressorNode","forceScriptProcessor","manualEncoderId","processorBufferSize","stopTracksAndCloseCtxWhenFinished","usingMediaRecorder","MediaRecorder","fn","js","toString","replace","Blob","Worker","URL","createObjectURL","timeslice","navigator","mediaDevices","getUserMedia","audioCtx","micGainNode","createGain","outputGainNode","dynamicsCompressorNode","createDynamicsCompressor","analyserNode","createAnalyser","processorNode","createScriptProcessor","createMediaStreamDestination","destinationNode","destination","encoderWorker","createWorker","EncoderMp3","BASE_URL","EncoderOgg","EncoderWav","addEventListener","event","Event","type","_onDataAvailable","userMediaConstraints","audio","echoCancellation","deviceId","then","stream","_startRecordingWithStream","catch","error","alert","message","console","log","newGain","gain","setValueAtTime","currentTime","micAudioStream","inputStreamNode","createMediaStreamSource","context","onGraphSetupWithInputStream","connect","nextNode","onaudioprocess","_onAudioProcess","mediaRecorder","evt","_onError","start","slicing","setInterval","dispatchEvent","CustomEvent","detail","inputBuffer","outputBuffer","getChannelData","stop","clearInterval","Date","getTime","disconnect","getTracks","forEach","track","Utils","bytes","si","thresh","abs","units","u","toFixed","userAgent","match","filters","fileSizeToHumanSize","supportedMimeTypes","created","recorderSrvc","watch","setMicGain","methods","onNewRecording","component","components","Test1","audioContextStr","webkitAudioContextStr","mediaDevicesStr","getUserMediaStr","hasMediaRecorder","requestDevicePermissions","revokeDevicePermissions","deviceConstraint","text","mimetype","supported","availableDeviceNames","defaultDeviceDetails","enumeratedDevices","enumeratedDevicesPermissionNeeded","enumeratedDevicesPermissionRevokable","supportedDeviceConstraints","computed","AnalyserNode","DynamicsCompressorNode","mounted","destroyed","isTypeSupported","types","enumerateDevices","supportedConstraints","constraint","setupAvailDeviceNames","device","kind","label","availDevices","ref","numAudioSamples","addNoise","onAudioProcess","outputData","inputData","staticStyle","WebAudioPeakMeter","x","y","floatVal","getBaseLog","userOptions","k","options","tickWidth","fontSize","meterTop","borderSize","sourceNode","channelCount","meterNode","parent","meterElement","createElement","style","position","width","elementWidth","height","elementHeight","backgroundColor","appendChild","domElement","optionsOverrides","setOptions","clientWidth","clientHeight","createContainerDiv","vertical","meterHeight","meterWidth","createTicks","createRainbow","channelWidth","channelLeft","createChannelMask","channelMasks","maskTransition","channelPeaks","channelPeakLabels","createPeakLabel","updateMeter","textContent","numTicks","floor","dbRange","dbTickSize","dbTickLabel","dbTickTop","dbTick","textAlign","color","tickColor","top","rainbow","gradientStyle","gradient","join","backgroundImage","transition","channelMask","returnVal","dbFromFloat","audioProcessingEvent","channelData","channelMaxes","thisMaskSize","maskSize","labelText","webAudioPeakMeter1","createMeter","peakMeterRawEl","getElementById","peakMeterPostGainEl","meterNodeRaw","innerHTML","meterNodePostGain","availableDevices","selectedDeviceId","enumerateDevicesWithPermission","microphones","draw","analyser","smoothingTimeConstant","SMOOTHING","fftSize","FFT_SIZE","getByteFrequencyData","freqs","getByteTimeDomainData","times","drawContext","clearRect","cWidth","cHeight","fillStyle","hue","fillRect","barWidth","offset","requestAnimationFrame","getFrequencyValue","encoders","selectedEncoder","id","version","commit","branch","timestamp","Vue","use","VueRouter","router","routes","path","Home","Diagnostics","Test2","Test3","Test4","Test5","Test6","Version","Vuetify","theme","primary","secondary","accent","warning","info","success","productionTip","render","h","App","$mount"],"mappings":"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","file":"js/app.a3ad6502.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test2.vue?vue&type=style&index=0&id=0cf2916c&lang=stylus&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test6.vue?vue&type=style&index=0&id=71cd8b71&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('v-app',[_c('v-navigation-drawer',{attrs:{\"fixed\":\"\",\"temporary\":\"\",\"app\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-list',{attrs:{\"dense\":\"\"}},[_c('v-list-tile',{attrs:{\"to\":\"/\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"home\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"Home\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/diagnostics\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"Diagnostics\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/test1\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"1 - Repeatable Audio Recording\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/test2\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"2 - Processing & Manipulation\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/test3\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"3 - Processors w/ Peak Levels\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/test4\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"4 - Microphone Selection\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/test5\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"5 - Analyser Node\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/test6\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"mic\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"6 - Alternate Encoders\")])],1)],1),_c('v-list-tile',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"code\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"View on Github\")])],1)],1),_c('v-list-tile',{attrs:{\"to\":\"/version\"}},[_c('v-list-tile-action',[_c('v-icon',[_vm._v(\"error_outline\")])],1),_c('v-list-tile-content',[_c('v-list-tile-title',[_vm._v(\"Build Version\")])],1)],1)],1)],1),_c('v-toolbar',{attrs:{\"color\":\"grey\",\"dark\":\"\",\"fixed\":\"\",\"app\":\"\"}},[_c('v-toolbar-side-icon',{on:{\"click\":function($event){$event.stopPropagation();_vm.drawer = !_vm.drawer}}}),_c('v-toolbar-title',[_vm._v(\"Web Audio Recording Tests\")]),_c('v-spacer'),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests\"}},[_c('v-icon',{attrs:{\"large\":\"\"}},[_vm._v(\"code\")])],1)],1),_c('v-content',[_c('v-container',{staticClass:\"container\",attrs:{\"fluid\":\"\"}},[_c('div',{attrs:{\"mb-5\":\"\"}},[_c('router-view')],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"mb-5\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',{staticClass:\"test1\"},[_c('h3',[_vm._v(\"Test 1 \"),(_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_c('br')]):_vm._e(),(!_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_vm._v(\" - \")]):_vm._e(),_vm._v(\" Repeatable Recording & Playback\\n      \")]),_c('p',[_vm._v(\"Click start/stop multiple times to create multiple recordings.\")]),_c('div',[_c('v-btn',{attrs:{\"disabled\":_vm.recordingInProgress},on:{\"click\":_vm.startRecording}},[_vm._v(\"Start Recording\\n        \")]),_c('v-btn',{attrs:{\"disabled\":!_vm.recordingInProgress},on:{\"click\":_vm.stopRecording}},[_vm._v(\"Stop Recording\")]),_c('v-icon',{class:_vm.recordingInProgress ? 'live' : ''},[_vm._v(\"mic\")])],1)])]),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs10\":\"\",\"md6\":\"\"}},[_c('v-slider',{attrs:{\"label\":\"Mic Gain\",\"max\":500},model:{value:(_vm.micGainSlider),callback:function ($$v) {_vm.micGainSlider=$$v},expression:\"micGainSlider\"}})],1),_c('v-flex',{attrs:{\"xs2\":\"\"}},[_c('div',{staticClass:\"input-group\"},[_c('label',[_vm._v(_vm._s(_vm.micGain))])])])],1),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-checkbox',{attrs:{\"label\":\"Add dynamics compressor to audio graph\",\"disabled\":_vm.recordingInProgress},model:{value:(_vm.addDynamicsCompressor),callback:function ($$v) {_vm.addDynamicsCompressor=$$v},expression:\"addDynamicsCompressor\"}})],1),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-checkbox',{attrs:{\"label\":\"Stop tracks and close audio context when recording stopped\"},model:{value:(_vm.cleanupWhenFinished),callback:function ($$v) {_vm.cleanupWhenFinished=$$v},expression:\"cleanupWhenFinished\"}})],1),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-checkbox',{attrs:{\"label\":\"Enable echo cancellation\"},model:{value:(_vm.enableEchoCancellation),callback:function ($$v) {_vm.enableEchoCancellation=$$v},expression:\"enableEchoCancellation\"}})],1),(_vm.recordings.length > 0)?_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recordings\")]),_vm._l((_vm.recordings),function(recording,idx){return _c('div',{key:recording.ts},[_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',[_c('h3',[_vm._v(\"Recording #\"+_vm._s(idx + 1))])]),_c('div',{staticClass:\"ml-3\"},[_c('div',[_c('audio',{attrs:{\"src\":recording.blobUrl,\"type\":recording.mimeType,\"controls\":\"true\"}})]),_c('div',[_vm._v(\"\\n                size: \"+_vm._s(_vm._f(\"fileSizeToHumanSize\")(recording.size))+\", type: \"+_vm._s(recording.mimeType)+\"\\n              \")])])])],1)],1),(idx !== (_vm.recordings.length-1))?_c('v-divider'):_vm._e()],1)})],2):_vm._e(),_c('v-layout',{staticClass:\"mt-5\",attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',[_vm._v(\"Notes\\n      \"),_c('small',[_vm._v(\"(as of iOS 14.3)\")])]),_c('v-divider'),_c('p',[_vm._v(\"\\n      As of 14.3, iOS appears to have a full MediaRecorder implementation. These tests use feature detection, and now\\n      use MediaRecorder on iOS. I have not done extensive testing, but all of these tests seems to work on latest iOS.\\n    \")]),_c('p',[_vm._v(\"\\n      This makes many of the notes below no longer relevant.\\n    \")]),_c('h4',[_vm._v(\"Notes\\n      \"),_c('small',[_vm._v(\"(as of iOS 11.2.6)\")])]),_c('v-divider'),_c('p',[_vm._v(\"\\n      There are multiple valid ways to do audio recording and playback on every browser/device combination\\n      \"),_c('i',[_vm._v(\"except\")]),_vm._v(\" iOS/Safari. I believe there are four significant issues, and only the first one seems to be well\\n      known.\\n    \")]),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('strong',[_vm._v(\"Security context of the getUserMedia handler is important\")]),_vm._v(\" - \"),_c('br'),_c('p',[_vm._v(\"\\n            The most common and widely known issue issue is that the success handler of the getUserMedia is no longer\\n            in the context of the user click. As a result, any audio context and processors created in the handler\\n            won't work. The solution is to create the audio context and any processors before calling getUserMedia,\\n            while still in the user click handler context. Then once getUserMedia provides the stream, use the\\n            previously created constructs to setup the graph and start recording.\\n          \")])]),_c('li',[_c('strong',[_vm._v(\"Multiple recordings require new audio streams\")]),_vm._v(\" - \"),_c('br'),_c('p',[_vm._v(\"\\n            There are a number of demos that work for the first recording on iOS/Safari, that then fail with empty\\n            audio on subsequent recordings until page is reloaded. The reason is that after stopping recording and\\n            extracting playable blob, the next recording requires a new AudioStream. This AudioStream can come from\\n            another call to getUserMedia (which won't prompt user after the first time), or potentially, by cloning\\n            the existing audio stream.\\n          \")])]),_c('li',[_c('strong',[_vm._v(\"Red recording bar indicator\")]),_vm._v(\" - \"),_c('br'),_c('p',[_vm._v(\"\\n            After granting permission to microphone, iOS/Safari will show a red bar notification anytime user switches\\n            away from the tab where permission was granted. To clear this bar, the recording stream's tracks can be\\n            stopped after recording is finished. This can be tested with the checkbox above. Stopping the tracks and\\n            closing the audio context is straightforward and works well, except for this last issue (but see updates):\\n          \")])]),_c('li',[_c('strong',[_c('del',[_vm._v(\"A sleep/lock/switch event can easily break things, is not detectable, and is not easily recoverable\\n          \")])]),_vm._v(\" - \"),_c('br'),_c('del',[_c('p',[_vm._v(\"\\n              To see this, make a recording and verify it plays. Switch to mail app, then back to safari and\\n              make/verify another recording. As long as red bar/microphone is still visible, it generally works. Then,\\n              check the option to stop tracks and close audio context. Make another recording and verify. Switch to\\n              mail app and back and try to make another recording. Most of the time the recording will appear to work,\\n              but the audio will be silent. As far as I can tell, there is no way to detect this, and there is no way\\n              to recover without loading a new tab or force quitting Safari.\\n            \")]),_c('p',[_c('em',[_vm._v(\"If\")]),_vm._v(\" the tracks are not stopped and so the red bar/icon remains, then this occurs much less\\n              frequently. Of course, that means the red bar is constantly visible though. And even then, starting\\n              another app that uses the microphone will almost always break things again. I have not been able to find\\n              a way to detect, much less, programmatically fix things, when this occurs. My assumption is that the\\n              underlying issue is due to low level iOS/Safari bugs, and not in how this code is setting things up.\")])])]),_c('li',[_c('strong',[_vm._v(\"Any references not cleaned up after recording complete can affect stability\")]),_vm._v(\" - \"),_c('br'),_c('p',[_vm._v(\"UPDATED 2018-04-10: After writing the previous section, I rewrote a number of things and removed all\\n            dependencies. By doing that I was able to ensure that everything gets cleaned up when recording is\\n            complete. I now no longer have stability issues on iOS, though I don't know exactly what was causing it\\n            previously. I thought perhaps it was the web worker, which I now close when recording is complete. But\\n            quick testing shows that even if I don't close the webworker, this new handling seems to be stable after\\n            sleep/lock/switch events.\")])]),_c('li',[_c('strong',[_vm._v(\"Mobile-web-app-capable meta might be causing issues\")]),_vm._v(\" - \"),_c('br'),_c('p',[_vm._v(\"\\n            I haven't vetted this 100%, but before 11.3 release I thought the \\\"Add to Home Screen\\\" and launching as a\\n            full screen web app using apple-mobile-web-app-capable tag worked fine. With 11.3 it no longer works. It\\n            appears as if navigator.mediaDevices is missing completely when launched in this context. Similarly,\\n            clicking links from apps like slack appears to launch in to a context without mediaDevices. Possibly\\n            related\\n            \"),_c('a',{attrs:{\"href\":\"https://stackoverflow.com/questions/46228218/how-to-access-camera-on-ios11-home-screen-web-app/46350136\"}},[_vm._v(\"\\n              link on StackOverflow\\n            \")]),_vm._v(\"\\n            .\\n          \")])])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Source\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test1.vue\"}},[_vm._v(\"\\n            src/views/Test1.vue\\n          \")]),_c('ul',{staticClass:\"ml-3\"},[_c('li',[_vm._v(\"Primarily:\\n              \"),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\"}},[_vm._v(\"\\n                src/shared/RecorderService.js\\n              \")])])])])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Relevant\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/muaz-khan/RecordRTC/issues/324\"}},[_vm._v(\"\\n            https://github.com/muaz-khan/RecordRTC/issues/324\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/ai/audio-recorder-polyfill/issues/4\"}},[_vm._v(\"\\n            https://github.com/ai/audio-recorder-polyfill/issues/4\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/danielstorey/webrtc-audio-recording\"}},[_vm._v(\"\\n            https://github.com/danielstorey/webrtc-audio-recording\\n          \")])])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function () {\n// Parts copied from https://github.com/chris-rudmin/Recorderjs\n  let BYTES_PER_SAMPLE = 2\n  let recorded = []\n\n  function encode (buffer) {\n    let length = buffer.length\n    let data = new Uint8Array(length * BYTES_PER_SAMPLE)\n    for (let i = 0; i < length; i++) {\n      let index = i * BYTES_PER_SAMPLE\n      let sample = buffer[i]\n      if (sample > 1) {\n        sample = 1\n      }\n      else if (sample < -1) {\n        sample = -1\n      }\n      sample = sample * 32768\n      data[index] = sample\n      data[index + 1] = sample >> 8\n    }\n    recorded.push(data)\n  }\n\n  function dump (sampleRate) {\n    let bufferLength = recorded.length ? recorded[0].length : 0\n    let length = recorded.length * bufferLength\n    let wav = new Uint8Array(44 + length)\n\n    let view = new DataView(wav.buffer)\n\n    // RIFF identifier 'RIFF'\n    view.setUint32(0, 1380533830, false)\n    // file length minus RIFF identifier length and file description length\n    view.setUint32(4, 36 + length, true)\n    // RIFF type 'WAVE'\n    view.setUint32(8, 1463899717, false)\n    // format chunk identifier 'fmt '\n    view.setUint32(12, 1718449184, false)\n    // format chunk length\n    view.setUint32(16, 16, true)\n    // sample format (raw)\n    view.setUint16(20, 1, true)\n    // channel count\n    view.setUint16(22, 1, true)\n    // sample rate\n    view.setUint32(24, sampleRate, true)\n    // byte rate (sample rate * block align)\n    view.setUint32(28, sampleRate * BYTES_PER_SAMPLE, true)\n    // block align (channel count * bytes per sample)\n    view.setUint16(32, BYTES_PER_SAMPLE, true)\n    // bits per sample\n    view.setUint16(34, 8 * BYTES_PER_SAMPLE, true)\n    // data chunk identifier 'data'\n    view.setUint32(36, 1684108385, false)\n    // data chunk length\n    view.setUint32(40, length, true)\n\n    for (var i = 0; i < recorded.length; i++) {\n      wav.set(recorded[i], i * bufferLength + 44)\n    }\n\n    recorded = []\n    let msg = [wav.buffer]\n    postMessage(msg, [msg[0]])\n  }\n\n  self.onmessage = function (e) {\n    if (e.data[0] === 'encode') {\n      encode(e.data[1])\n    }\n    else if (e.data[0] === 'dump') {\n      dump(e.data[1])\n    }\n    else if (e.data[0] === 'close') {\n      self.close()\n    }\n  }\n}\n","// import 'babel-polyfill'\n// import lamejs from 'lamejs'\n\nexport default function () {\n  // Note that relative paths don't work when loaded as a blob\n  // https://stackoverflow.com/questions/22172426/using-importsscripts-within-blob-in-a-karma-environment\n  // importScripts('https://localhost:8443/workers/encoders/lame.js') // eslint-disable-line\n\n  let channels = 1 // 1 for mono or 2 for stereo\n  // let sampleRate = 44100 // 44.1khz (normal mp3 samplerate)\n  let kbps = 128 // encode 128kbps mp3\n\n  let mp3encoder = null\n\n  const maxSamples = 1152\n\n  var mp3Data = [] // array of Uint8Array\n\n  function init (opts) {\n    /* global lamejs */\n    importScripts(opts.baseUrl + '/workers/encoders/lame.min.js'); // eslint-disable-line\n    mp3encoder = new lamejs.Mp3Encoder(channels, opts.sampleRate, kbps)\n  }\n\n  function floatTo16BitPCM (input, output) {\n    for (var i = 0; i < input.length; i++) {\n      var s = Math.max(-1, Math.min(1, input[i]))\n      output[i] = (s < 0 ? s * 0x8000 : s * 0x7FFF)\n    }\n  }\n\n  function convertBuffer (arrayBuffer) {\n    var data = new Float32Array(arrayBuffer)\n    var out = new Int16Array(arrayBuffer.length)\n    floatTo16BitPCM(data, out)\n    return out\n  }\n\n  function encode (arrayBuffer) {\n    let samplesMono = convertBuffer(arrayBuffer)\n    let remaining = samplesMono.length\n    for (let i = 0; remaining >= 0; i += maxSamples) {\n      var left = samplesMono.subarray(i, i + maxSamples)\n      var data = mp3encoder.encodeBuffer(left)\n      mp3Data.push(data)\n      remaining -= maxSamples\n    }\n\n    // var mp3buf = mp3encoder.encodeBuffer(buffer)\n    // if (mp3buf.length > 0) {\n    //   mp3Data.push(mp3buf)\n    // }\n  }\n\n  function dump () {\n    var mp3buf = mp3encoder.flush()\n    if (mp3buf.length > 0) {\n      mp3Data.push(mp3buf)\n    }\n\n    // Probably results in native memory copy\n    postMessage(mp3Data)\n\n    // Would like to do this, but not possible because mp3Data is generic array of Uint8Array, and generic\n    // arrays are not transferrable types.\n    // postMessage(mp3Data, [mp3Data])\n\n    // This might help if/when ever become available again\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/transfer\n\n    // For now, though, we have not other option except to build a complete copy in javascript. This means\n    // we temporarily require twice the memory of whatever was recorded.\n\n    mp3Data = []\n  }\n\n  onmessage = function (e) {\n    if (e.data[0] === 'encode') {\n      encode(e.data[1])\n    }\n    else if (e.data[0] === 'dump') {\n      dump(e.data[1])\n    }\n    else if (e.data[0] === 'init') {\n      init(e.data[1])\n    }\n    else if (e.data[0] === 'close') {\n      self.close()\n    }\n  }\n}\n","export default function () {\n  let channels = 1\n  let quality = 0.4\n\n  let oggEncoder = null\n\n  let oggData = []\n\n  function init (opts) {\n    /* global OggVorbisEncoder */\n\n    // Possibly required for loading min version, but couldn't get min version to work. Not sure why.\n    // self.OggVorbisEncoderConfig = {\n    //   memoryInitializerPrefixURL: opts.baseUrl + '/workers/encoders/'\n    // }\n\n    // Unable to load min version. Not sure why.  Error in firefox is \"The URI is malformed\". Guessing related to the .mem.\n    importScripts(opts.baseUrl + '/workers/encoders/OggVorbisEncoder.js'); // eslint-disable-line\n    oggEncoder = new OggVorbisEncoder(opts.sampleRate, channels, quality)\n  }\n\n  function encode (arrayBuffer) {\n    var data = oggEncoder.encode([arrayBuffer])\n    oggData.push(data)\n  }\n\n  function dump () {\n    let blob = oggEncoder.finish('audio/ogg')\n\n    // this works, but likely results in native memory copy\n    postMessage(blob)\n\n    // Looking at source of OggVorbisEncoder, I think it would be easy to change to allow transferring of the\n    // raw buffer instead.\n\n    // this does not work, I presume because blobs aren't transferrable\n    // postMessage(blob, [blob])\n\n    oggData = []\n  }\n\n  onmessage = function (e) {\n    if (e.data[0] === 'encode') {\n      encode(e.data[1])\n    }\n    else if (e.data[0] === 'dump') {\n      dump(e.data[1])\n    }\n    else if (e.data[0] === 'init') {\n      init(e.data[1])\n    }\n    else if (e.data[0] === 'close') {\n      self.close()\n    }\n  }\n}\n","/* Copyright (c) 2019 Josh Sanderson */\n\nimport EncoderWav from './encoder-wav-worker.js'\nimport EncoderMp3 from './encoder-mp3-worker.js'\nimport EncoderOgg from './encoder-ogg-worker.js'\n\nexport default class RecorderService {\n  constructor (baseUrl) {\n    this.baseUrl = baseUrl\n\n    window.AudioContext = window.AudioContext || window.webkitAudioContext\n\n    this.em = document.createDocumentFragment()\n\n    this.state = 'inactive'\n\n    this.chunks = []\n    this.chunkType = ''\n\n    this.encoderMimeType = 'audio/wav'\n\n    this.config = {\n      broadcastAudioProcessEvents: false,\n      createAnalyserNode: false,\n      createDynamicsCompressorNode: false,\n      forceScriptProcessor: false,\n      manualEncoderId: 'wav',\n      micGain: 1.0,\n      processorBufferSize: 2048,\n      stopTracksAndCloseCtxWhenFinished: true,\n      usingMediaRecorder: typeof window.MediaRecorder !== 'undefined',\n      enableEchoCancellation: true\n    }\n  }\n\n  createWorker (fn) {\n    var js = fn\n      .toString()\n      .replace(/^function\\s*\\(\\)\\s*{/, '')\n      .replace(/}$/, '')\n    var blob = new Blob([js])\n    return new Worker(URL.createObjectURL(blob))\n  }\n\n  startRecording (timeslice) {\n    if (this.state !== 'inactive') {\n      return\n    }\n\n    // This is the case on ios/chrome, when clicking links from within ios/slack (sometimes), etc.\n    if (!navigator || !navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      alert('Missing support for navigator.mediaDevices.getUserMedia') // temp: helps when testing for strange issues on ios/safari\n      return\n    }\n\n    this.audioCtx = new AudioContext()\n    this.micGainNode = this.audioCtx.createGain()\n    this.outputGainNode = this.audioCtx.createGain()\n\n    if (this.config.createDynamicsCompressorNode) {\n      this.dynamicsCompressorNode = this.audioCtx.createDynamicsCompressor()\n    }\n\n    if (this.config.createAnalyserNode) {\n      this.analyserNode = this.audioCtx.createAnalyser()\n    }\n\n    // If not using MediaRecorder(i.e. safari and edge), then a script processor is required. It's optional\n    // on browsers using MediaRecorder and is only useful if wanting to do custom analysis or manipulation of\n    // recorded audio data.\n    if (this.config.forceScriptProcessor || this.config.broadcastAudioProcessEvents || !this.config.usingMediaRecorder) {\n      this.processorNode = this.audioCtx.createScriptProcessor(this.config.processorBufferSize, 1, 1) // TODO: Get the number of channels from mic\n    }\n\n    // Create stream destination on chrome/firefox because, AFAICT, we have no other way of feeding audio graph output\n    // in to MediaRecorderSafari/Edge don't have this method as of 2018-04.\n    if (this.audioCtx.createMediaStreamDestination) {\n      this.destinationNode = this.audioCtx.createMediaStreamDestination()\n    }\n    else {\n      this.destinationNode = this.audioCtx.destination\n    }\n\n    // Create web worker for doing the encoding\n    if (!this.config.usingMediaRecorder) {\n      if (this.config.manualEncoderId === 'mp3') {\n        // This also works and avoids weirdness imports with workers\n        // this.encoderWorker = new Worker(BASE_URL + '/workers/encoder-ogg-worker.js')\n        this.encoderWorker = this.createWorker(EncoderMp3)\n        this.encoderWorker.postMessage(['init', { baseUrl: BASE_URL, sampleRate: this.audioCtx.sampleRate }])\n        this.encoderMimeType = 'audio/mpeg'\n      }\n      else if (this.config.manualEncoderId === 'ogg') {\n        this.encoderWorker = this.createWorker(EncoderOgg)\n        this.encoderWorker.postMessage(['init', { baseUrl: BASE_URL, sampleRate: this.audioCtx.sampleRate }])\n        this.encoderMimeType = 'audio/ogg'\n      }\n      else {\n        this.encoderWorker = this.createWorker(EncoderWav)\n        this.encoderMimeType = 'audio/wav'\n      }\n      this.encoderWorker.addEventListener('message', (e) => {\n        let event = new Event('dataavailable')\n        if (this.config.manualEncoderId === 'ogg') {\n          event.data = e.data\n        }\n        else {\n          event.data = new Blob(e.data, { type: this.encoderMimeType })\n        }\n        this._onDataAvailable(event)\n      })\n    }\n\n    // Setup media constraints\n    const userMediaConstraints = {\n      audio: {\n        echoCancellation: this.config.enableEchoCancellation\n      }\n    }\n    if (this.config.deviceId) {\n      userMediaConstraints.audio.deviceId = this.config.deviceId\n    }\n\n    // This will prompt user for permission if needed\n    return navigator.mediaDevices.getUserMedia(userMediaConstraints)\n      .then((stream) => {\n        this._startRecordingWithStream(stream, timeslice)\n      })\n      .catch((error) => {\n        alert('Error with getUserMedia: ' + error.message) // temp: helps when testing for strange issues on ios/safari\n        console.log(error)\n      })\n  }\n\n  setMicGain (newGain) {\n    this.config.micGain = newGain\n    if (this.audioCtx && this.micGainNode) {\n      this.micGainNode.gain.setValueAtTime(newGain, this.audioCtx.currentTime)\n    }\n  }\n\n  _startRecordingWithStream (stream, timeslice) {\n    this.micAudioStream = stream\n\n    this.inputStreamNode = this.audioCtx.createMediaStreamSource(this.micAudioStream)\n    this.audioCtx = this.inputStreamNode.context\n\n    // Kind-of a hack to allow hooking in to audioGraph inputStreamNode\n    if (this.onGraphSetupWithInputStream) {\n      this.onGraphSetupWithInputStream(this.inputStreamNode)\n    }\n\n    this.inputStreamNode.connect(this.micGainNode)\n    this.micGainNode.gain.setValueAtTime(this.config.micGain, this.audioCtx.currentTime)\n\n    let nextNode = this.micGainNode\n    if (this.dynamicsCompressorNode) {\n      this.micGainNode.connect(this.dynamicsCompressorNode)\n      nextNode = this.dynamicsCompressorNode\n    }\n\n    this.state = 'recording'\n\n    if (this.processorNode) {\n      nextNode.connect(this.processorNode)\n      this.processorNode.connect(this.outputGainNode)\n      this.processorNode.onaudioprocess = (e) => this._onAudioProcess(e)\n    }\n    else {\n      nextNode.connect(this.outputGainNode)\n    }\n\n    if (this.analyserNode) {\n      // TODO: If we want the analyser node to receive the processorNode's output, this needs to be changed _and_\n      //       processor node needs to be modified to copy input to output. It currently doesn't because it's not\n      //       needed when doing manual encoding.\n      // this.processorNode.connect(this.analyserNode)\n      nextNode.connect(this.analyserNode)\n    }\n\n    this.outputGainNode.connect(this.destinationNode)\n\n    if (this.config.usingMediaRecorder) {\n      this.mediaRecorder = new MediaRecorder(this.destinationNode.stream)\n      this.mediaRecorder.addEventListener('dataavailable', (evt) => this._onDataAvailable(evt))\n      this.mediaRecorder.addEventListener('error', (evt) => this._onError(evt))\n\n      this.mediaRecorder.start(timeslice)\n    }\n    else {\n      // Output gain to zero to prevent feedback. Seems to matter only on Edge, though seems like should matter\n      // on iOS too.  Matters on chrome when connecting graph to directly to audioCtx.destination, but we are\n      // not able to do that when using MediaRecorder.\n      this.outputGainNode.gain.setValueAtTime(0, this.audioCtx.currentTime)\n      // this.outputGainNode.gain.value = 0\n\n      // Todo: Note that time slicing with manual wav encoderWav won't work. To allow it would require rewriting the encoderWav\n      // to assemble all chunks at end instead of adding header to each chunk.\n      if (timeslice) {\n        console.log('Time slicing without MediaRecorder is not yet supported. The resulting recording will not be playable.')\n        this.slicing = setInterval(function () {\n          if (this.state === 'recording') {\n            this.encoderWorker.postMessage(['dump', this.context.sampleRate])\n          }\n        }, timeslice)\n      }\n    }\n  }\n\n  _onAudioProcess (e) {\n    // console.log('onaudioprocess', e)\n    // let inputBuffer = e.inputBuffer\n    // let outputBuffer = e.outputBuffer\n    // console.log(this.micAudioStream)\n    // console.log(this.audioCtx)\n    // console.log(this.micAudioStream.getTracks().forEach((track) => console.log(track)))\n\n    // this.onAudioEm.dispatch(new Event('onaudioprocess', {inputBuffer:inputBuffer,outputBuffer:outputBuffer}))\n\n    if (this.config.broadcastAudioProcessEvents) {\n      this.em.dispatchEvent(new CustomEvent('onaudioprocess', {\n        detail: {\n          inputBuffer: e.inputBuffer,\n          outputBuffer: e.outputBuffer\n        }\n      }))\n    }\n\n    // // Example handling:\n    // let inputBuffer = e.inputBuffer\n    // let outputBuffer = e.outputBuffer\n    // // Each channel (usually only one)\n    // for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {\n    //   let inputData = inputBuffer.getChannelData(channel)\n    //   let outputData = outputBuffer.getChannelData(channel)\n    //\n    //   // Each sample\n    //   for (let sample = 0; sample < inputBuffer.length; sample++) {\n    //     // Make output equal to the same as the input (thus processor is doing nothing at this time)\n    //     outputData[sample] = inputData[sample]\n    //   }\n    // }\n\n    // When manually encoding (safari/edge), there's no reason to copy data to output buffer.  We set the output\n    // gain to 0 anyways (which is required on Edge if we did copy data to output). However, if using a MediaRecorder\n    // and a processor (all other browsers), then it would be required to copy the data otherwise the graph would\n    // generate no data for the MediaRecorder to consume.\n    // if (this.forceScriptProcessor) {\n\n    // // Copy input to output\n    // let inputBuffer = e.inputBuffer\n    // let outputBuffer = e.outputBuffer\n    // // This doesn't work on iOS/Safari. Guessing it doesn't have copyToChannel support, but haven't verified.\n    // for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {\n    //   outputBuffer.copyToChannel(inputBuffer.getChannelData(channel), channel)\n    // }\n\n    // Safari and Edge require manual encoding via web worker. Single channel only for now.\n    // Example stereo encoderWav: https://github.com/MicrosoftEdge/Demos/blob/master/microphone/scripts/recorderworker.js\n    if (!this.config.usingMediaRecorder) {\n      if (this.state === 'recording') {\n        if (this.config.broadcastAudioProcessEvents) {\n          this.encoderWorker.postMessage(['encode', e.outputBuffer.getChannelData(0)])\n        }\n        else {\n          this.encoderWorker.postMessage(['encode', e.inputBuffer.getChannelData(0)])\n        }\n      }\n    }\n  }\n\n  stopRecording () {\n    if (this.state === 'inactive') {\n      return\n    }\n    if (this.config.usingMediaRecorder) {\n      this.state = 'inactive'\n      this.mediaRecorder.stop()\n    }\n    else {\n      this.state = 'inactive'\n      this.encoderWorker.postMessage(['dump', this.audioCtx.sampleRate])\n      clearInterval(this.slicing)\n\n      // TODO: There should be a more robust way to handle this\n      // Without something like this, I think  the last recorded sample could be lost due to timing\n      // setTimeout(() => {\n      //   this.state = 'inactive'\n      //   this.encoderWorker.postMessage(['dump', this.audioCtx.sampleRate])\n      // }, 100)\n    }\n  }\n\n  _onDataAvailable (evt) {\n    // console.log('state', this.mediaRecorder.state)\n    // console.log('evt.data', evt.data)\n\n    this.chunks.push(evt.data)\n    this.chunkType = evt.data.type\n\n    if (this.state !== 'inactive') {\n      return\n    }\n\n    let blob = new Blob(this.chunks, { 'type': this.chunkType })\n    let blobUrl = URL.createObjectURL(blob)\n    const recording = {\n      ts: new Date().getTime(),\n      blobUrl: blobUrl,\n      mimeType: blob.type,\n      size: blob.size\n    }\n\n    this.chunks = []\n    this.chunkType = null\n\n    if (this.destinationNode) {\n      this.destinationNode.disconnect()\n      this.destinationNode = null\n    }\n    if (this.outputGainNode) {\n      this.outputGainNode.disconnect()\n      this.outputGainNode = null\n    }\n    if (this.analyserNode) {\n      this.analyserNode.disconnect()\n      this.analyserNode = null\n    }\n    if (this.processorNode) {\n      this.processorNode.disconnect()\n      this.processorNode = null\n    }\n    if (this.encoderWorker) {\n      this.encoderWorker.postMessage(['close'])\n      this.encoderWorker = null\n    }\n    if (this.dynamicsCompressorNode) {\n      this.dynamicsCompressorNode.disconnect()\n      this.dynamicsCompressorNode = null\n    }\n    if (this.micGainNode) {\n      this.micGainNode.disconnect()\n      this.micGainNode = null\n    }\n    if (this.inputStreamNode) {\n      this.inputStreamNode.disconnect()\n      this.inputStreamNode = null\n    }\n\n    if (this.config.stopTracksAndCloseCtxWhenFinished) {\n      // This removes the red bar in iOS/Safari\n      this.micAudioStream.getTracks().forEach((track) => track.stop())\n      this.micAudioStream = null\n\n      this.audioCtx.close()\n      this.audioCtx = null\n    }\n\n    this.em.dispatchEvent(new CustomEvent('recording', { detail: { recording: recording } }))\n  }\n\n  _onError (evt) {\n    console.log('error', evt)\n    this.em.dispatchEvent(new Event('error'))\n    alert('error:' + evt) // for debugging purposes\n  }\n}\n","export class Utils {\n  // https://stackoverflow.com/a/14919494\n  humanFileSize (bytes, si) {\n    var thresh = si ? 1000 : 1024\n    if (Math.abs(bytes) < thresh) {\n      return bytes + ' B'\n    }\n    var units = si\n      ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n      : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']\n    var u = -1\n    do {\n      bytes /= thresh\n      ++u\n    } while (Math.abs(bytes) >= thresh && u < units.length - 1)\n    return bytes.toFixed(1) + ' ' + units[u]\n  }\n\n  /**\n   * Check user agent for Safari on iOS\n   * @returns {boolean}\n   */\n  isIosSafari () {\n    return navigator.userAgent.match(/iP(od|hone|ad)/) &&\n      navigator.userAgent.match(/AppleWebKit/) &&\n      !navigator.userAgent.match(/(Cr|Fx|OP)iOS/)\n  }\n}\n\nexport default new Utils()\n","<template>\n  <v-container mb-5>\n    <v-layout row wrap>\n      <div class=\"test1\">\n        <h3>Test 1 <span v-if=\"$vuetify.breakpoint.xsOnly\"><br></span>\n          <span v-if=\"!$vuetify.breakpoint.xsOnly\"> - </span> Repeatable Recording &amp; Playback\n        </h3>\n        <p>Click start/stop multiple times to create multiple recordings.</p>\n        <div>\n          <v-btn @click=\"startRecording\" :disabled=\"recordingInProgress\">Start Recording\n          </v-btn>\n          <v-btn @click=\"stopRecording\" :disabled=\"!recordingInProgress\">Stop Recording</v-btn>\n          <v-icon :class=\"recordingInProgress ? 'live' : ''\">mic</v-icon>\n        </div>\n      </div>\n    </v-layout>\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-flex xs10 md6>\n        <v-slider label=\"Mic Gain\" :max=\"500\" v-model=\"micGainSlider\"></v-slider>\n      </v-flex>\n      <v-flex xs2>\n        <div class=\"input-group\">\n          <label>{{ micGain }}</label>\n        </div>\n      </v-flex>\n    </v-layout>\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-checkbox v-model=\"addDynamicsCompressor\"\n                  label=\"Add dynamics compressor to audio graph\"\n                  :disabled=\"recordingInProgress\"></v-checkbox>\n    </v-layout>\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-checkbox v-model=\"cleanupWhenFinished\"\n                  label=\"Stop tracks and close audio context when recording stopped\"></v-checkbox>\n    </v-layout>\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-checkbox v-model=\"enableEchoCancellation\"\n                  label=\"Enable echo cancellation\">\n      </v-checkbox>\n    </v-layout>\n    <v-layout column wrap v-if=\"recordings.length > 0\">\n      <h4 class=\"mt-3\">Recordings</h4>\n      <div v-for=\"(recording,idx) in recordings\" :key=\"recording.ts\">\n        <v-card>\n          <v-card-title primary-title>\n            <v-layout column wrap>\n              <div>\n                <h3>Recording #{{ idx + 1 }}</h3>\n              </div>\n              <div class=\"ml-3\">\n                <div>\n                  <audio :src=\"recording.blobUrl\" :type=\"recording.mimeType\" controls=\"true\"/>\n                </div>\n                <div>\n                  size: {{recording.size | fileSizeToHumanSize}}, type: {{recording.mimeType}}\n                </div>\n              </div>\n            </v-layout>\n          </v-card-title>\n        </v-card>\n        <v-divider v-if=\"idx !== (recordings.length-1)\"/>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap class=\"mt-5\">\n      <h4>Notes\n        <small>(as of iOS 14.3)</small>\n      </h4>\n      <v-divider></v-divider>\n      <p>\n        As of 14.3, iOS appears to have a full MediaRecorder implementation. These tests use feature detection, and now\n        use MediaRecorder on iOS. I have not done extensive testing, but all of these tests seems to work on latest iOS.\n      </p>\n      <p>\n        This makes many of the notes below no longer relevant.\n      </p>\n\n      <h4>Notes\n        <small>(as of iOS 11.2.6)</small>\n      </h4>\n      <v-divider></v-divider>\n      <p>\n        There are multiple valid ways to do audio recording and playback on every browser/device combination\n        <i>except</i> iOS/Safari. I believe there are four significant issues, and only the first one seems to be well\n        known.\n      </p>\n      <div class=\"ml-4\">\n        <ul>\n          <li><strong>Security context of the getUserMedia handler is important</strong> - <br>\n            <p>\n              The most common and widely known issue issue is that the success handler of the getUserMedia is no longer\n              in the context of the user click. As a result, any audio context and processors created in the handler\n              won't work. The solution is to create the audio context and any processors before calling getUserMedia,\n              while still in the user click handler context. Then once getUserMedia provides the stream, use the\n              previously created constructs to setup the graph and start recording.\n            </p></li>\n          <li><strong>Multiple recordings require new audio streams</strong> - <br>\n            <p>\n              There are a number of demos that work for the first recording on iOS/Safari, that then fail with empty\n              audio on subsequent recordings until page is reloaded. The reason is that after stopping recording and\n              extracting playable blob, the next recording requires a new AudioStream. This AudioStream can come from\n              another call to getUserMedia (which won't prompt user after the first time), or potentially, by cloning\n              the existing audio stream.\n            </p></li>\n          <li><strong>Red recording bar indicator</strong> - <br>\n            <p>\n              After granting permission to microphone, iOS/Safari will show a red bar notification anytime user switches\n              away from the tab where permission was granted. To clear this bar, the recording stream's tracks can be\n              stopped after recording is finished. This can be tested with the checkbox above. Stopping the tracks and\n              closing the audio context is straightforward and works well, except for this last issue (but see updates):\n            </p>\n          </li>\n          <li><strong>\n            <del>A sleep/lock/switch event can easily break things, is not detectable, and is not easily recoverable\n            </del>\n          </strong> - <br>\n            <del>\n              <p>\n                To see this, make a recording and verify it plays. Switch to mail app, then back to safari and\n                make/verify another recording. As long as red bar/microphone is still visible, it generally works. Then,\n                check the option to stop tracks and close audio context. Make another recording and verify. Switch to\n                mail app and back and try to make another recording. Most of the time the recording will appear to work,\n                but the audio will be silent. As far as I can tell, there is no way to detect this, and there is no way\n                to recover without loading a new tab or force quitting Safari.\n              </p>\n              <p><em>If</em> the tracks are not stopped and so the red bar/icon remains, then this occurs much less\n                frequently. Of course, that means the red bar is constantly visible though. And even then, starting\n                another app that uses the microphone will almost always break things again. I have not been able to find\n                a way to detect, much less, programmatically fix things, when this occurs. My assumption is that the\n                underlying issue is due to low level iOS/Safari bugs, and not in how this code is setting things up.</p>\n            </del>\n          </li>\n\n          <li><strong>Any references not cleaned up after recording complete can affect stability</strong> - <br>\n            <p>UPDATED 2018-04-10: After writing the previous section, I rewrote a number of things and removed all\n              dependencies. By doing that I was able to ensure that everything gets cleaned up when recording is\n              complete. I now no longer have stability issues on iOS, though I don't know exactly what was causing it\n              previously. I thought perhaps it was the web worker, which I now close when recording is complete. But\n              quick testing shows that even if I don't close the webworker, this new handling seems to be stable after\n              sleep/lock/switch events.</p>\n          </li>\n\n          <li><strong>Mobile-web-app-capable meta might be causing issues</strong> - <br>\n            <p>\n              I haven't vetted this 100%, but before 11.3 release I thought the \"Add to Home Screen\" and launching as a\n              full screen web app using apple-mobile-web-app-capable tag worked fine. With 11.3 it no longer works. It\n              appears as if navigator.mediaDevices is missing completely when launched in this context. Similarly,\n              clicking links from apps like slack appears to launch in to a context without mediaDevices. Possibly\n              related\n              <a\n                href=\"https://stackoverflow.com/questions/46228218/how-to-access-camera-on-ios11-home-screen-web-app/46350136\">\n                link on StackOverflow\n              </a>\n              .\n            </p>\n          </li>\n\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap>\n      <h4 class=\"mt-3\">Source</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test1.vue\">\n              src/views/Test1.vue\n            </a>\n            <ul class=\"ml-3\">\n              <li>Primarily:\n                <a\n                  href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\">\n                  src/shared/RecorderService.js\n                </a>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only>\n      <h4 class=\"mt-3\">Relevant</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://github.com/muaz-khan/RecordRTC/issues/324\">\n              https://github.com/muaz-khan/RecordRTC/issues/324\n            </a>\n          </li>\n          <li>\n            <a href=\"https://github.com/ai/audio-recorder-polyfill/issues/4\">\n              https://github.com/ai/audio-recorder-polyfill/issues/4\n            </a>\n          </li>\n          <li>\n            <a href=\"https://github.com/danielstorey/webrtc-audio-recording\">\n              https://github.com/danielstorey/webrtc-audio-recording\n            </a>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport RecorderService from '@/shared/RecorderService'\nimport utils from '@/shared/Utils'\n\nexport default {\n  name: 'Test1',\n  filters: {\n    fileSizeToHumanSize (val) {\n      return utils.humanFileSize(val, true)\n    }\n  },\n  data () {\n    return {\n      enableEchoCancellation: true,\n      recordingInProgress: false,\n      supportedMimeTypes: [],\n      recordings: [],\n      micGainSlider: 100,\n      micGain: 1.0,\n      cleanupWhenFinished: true,\n      addDynamicsCompressor: false\n    }\n  },\n  created () {\n    this.recorderSrvc = new RecorderService()\n    this.recorderSrvc.em.addEventListener('recording', (evt) => this.onNewRecording(evt))\n  },\n  watch: {\n    cleanupWhenFinished (val) {\n      this.recorderSrvc.config.stopTracksAndCloseCtxWhenFinished = this.cleanupWhenFinished\n    },\n    micGainSlider () {\n      this.micGain = (this.micGainSlider * 0.01).toFixed(2)\n      this.recorderSrvc.setMicGain(this.micGain)\n    }\n  },\n  methods: {\n    startRecording () {\n      this.recorderSrvc.config.stopTracksAndCloseCtxWhenFinished = this.cleanupWhenFinished\n      this.recorderSrvc.config.createDynamicsCompressorNode = this.addDynamicsCompressor\n      this.recorderSrvc.config.enableEchoCancellation = this.enableEchoCancellation\n      this.recorderSrvc.startRecording()\n        .then(() => {\n          this.recordingInProgress = true\n        })\n        .catch((error) => {\n          console.error('Exception while start recording: ' + error)\n          alert('Exception while start recording: ' + error.message)\n        })\n    },\n    stopRecording () {\n      this.recorderSrvc.stopRecording()\n      this.recordingInProgress = false\n    },\n    onNewRecording (evt) {\n      this.recordings.push(evt.detail.recording)\n    }\n  }\n}\n</script>\n<style lang=\"stylus\" scoped=\"true\">\n  @import '~vuetify/src/stylus/settings/_variables'\n  @media screen and (min-width: $grid-breakpoints.sm)\n    audio\n      width 35em\n\n  @media screen and (max-width: ($grid-breakpoints.sm - 1))\n    audio\n      width 100%\n\n  .v-input--selection-controls\n    margin 0\n\n  .live\n    color red\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test1.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test1.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Test1.vue?vue&type=template&id=bcc0a4ca&scoped=true&\"\nimport script from \"./Test1.vue?vue&type=script&lang=js&\"\nexport * from \"./Test1.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Test1.vue?vue&type=style&index=0&id=bcc0a4ca&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bcc0a4ca\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <v-app>\n      <v-navigation-drawer\n        fixed\n        v-model=\"drawer\"\n        temporary\n        app>\n        <v-list dense>\n          <v-list-tile to=\"/\">\n            <v-list-tile-action>\n              <v-icon>home</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>Home</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n          <v-list-tile to=\"/diagnostics\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>Diagnostics</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n          <v-list-tile to=\"/test1\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>1 - Repeatable Audio Recording</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n\n          <v-list-tile to=\"/test2\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>2 - Processing &amp; Manipulation</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n\n          <v-list-tile to=\"/test3\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>3 - Processors w/ Peak Levels</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n\n          <v-list-tile to=\"/test4\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>4 - Microphone Selection</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n\n          <v-list-tile to=\"/test5\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>5 - Analyser Node</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n\n          <v-list-tile to=\"/test6\">\n            <v-list-tile-action>\n              <v-icon>mic</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>6 - Alternate Encoders</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n\n          <v-list-tile href=\"https://github.com/kaliatech/web-audio-recording-tests\">\n            <v-list-tile-action>\n              <v-icon>code</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>View on Github</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n\n          <v-list-tile to=\"/version\">\n            <v-list-tile-action>\n              <v-icon>error_outline</v-icon>\n            </v-list-tile-action>\n            <v-list-tile-content>\n              <v-list-tile-title>Build Version</v-list-tile-title>\n            </v-list-tile-content>\n          </v-list-tile>\n\n        </v-list>\n      </v-navigation-drawer>\n      <v-toolbar color=\"grey\" dark fixed app>\n        <v-toolbar-side-icon @click.stop=\"drawer = !drawer\"></v-toolbar-side-icon>\n        <v-toolbar-title>Web Audio Recording Tests</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <a href=\"https://github.com/kaliatech/web-audio-recording-tests\">\n          <v-icon large>code</v-icon>\n        </a>\n      </v-toolbar>\n      <v-content>\n        <v-container fluid class=\"container\">\n          <div mb-5>\n            <router-view></router-view>\n          </div>\n        </v-container>\n      </v-content>\n    </v-app>\n  </div>\n</template>\n\n<script>\nimport Test1 from './views/Test1.vue'\n\nexport default {\n  name: 'app',\n  components: {\n    Test1\n  },\n  data: () => ({\n    drawer: false\n  })\n}\n</script>\n\n<style lang=\"styl\">\\\n@import './styles/app.styl';\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=d01c5668&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=styl&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"md3\":\"\"}}),_c('v-flex',{attrs:{\"md6\":\"\"}},[_c('div',{staticClass:\"text-xs-center home--menu\"},[_c('p',[_vm._v(\"\\n          Tests to verify functionality of web audio API \"),_c('strong',[_vm._v(\"recording\")]),_vm._v(\" across all browsers, especially\\n          iOS/Safari. This was created before iOS had native MediaRecorder support, which was added in ~iOS 14.3.\\n        \")]),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/diagnostics\"}},[_vm._v(\"Browser Diagnostics\")])],1),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/test1\"}},[_vm._v(\"1 - Repeatable Audio Recording\")])],1),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/test2\"}},[_vm._v(\"2 - Processing & Manipulation\")])],1),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/test3\"}},[_vm._v(\"3 - Processors w/ Peak Levels\")])],1),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/test4\"}},[_vm._v(\"4 - Microphone Selection\")])],1),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/test5\"}},[_vm._v(\"5 - Analyser Node\")])],1),_c('div',[_c('v-btn',{attrs:{\"color\":\"info\",\"to\":\"/test6\"}},[_vm._v(\"6 - Alternate Encoders\")])],1)])]),_c('v-flex',{attrs:{\"md3\":\"\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n    <v-layout row wrap>\n      <v-flex md3>\n      </v-flex>\n      <v-flex md6>\n        <div class=\"text-xs-center home--menu\">\n          <p>\n            Tests to verify functionality of web audio API <strong>recording</strong> across all browsers, especially\n            iOS/Safari. This was created before iOS had native MediaRecorder support, which was added in ~iOS 14.3.\n          </p>\n\n          <div>\n            <v-btn color=\"info\" to=\"/diagnostics\">Browser Diagnostics</v-btn>\n          </div>\n          <div>\n            <v-btn color=\"info\" to=\"/test1\">1 - Repeatable Audio Recording</v-btn>\n          </div>\n          <div>\n            <v-btn color=\"info\" to=\"/test2\">2 - Processing &amp; Manipulation</v-btn>\n          </div>\n          <div>\n            <v-btn color=\"info\" to=\"/test3\">3 - Processors w/ Peak Levels</v-btn>\n          </div>\n          <div>\n            <v-btn color=\"info\" to=\"/test4\">4 - Microphone Selection</v-btn>\n          </div>\n          <div>\n            <v-btn color=\"info\" to=\"/test5\">5 - Analyser Node</v-btn>\n          </div>\n          <div>\n            <v-btn color=\"info\" to=\"/test6\">6 - Alternate Encoders</v-btn>\n          </div>\n        </div>\n      </v-flex>\n      <v-flex md3>\n      </v-flex>\n\n    </v-layout>\n  </v-container>\n</template>\n<script>\nexport default {\n  name: 'Home',\n  components: {},\n  data () {\n    return {}\n  }\n}\n</script>\n<style lang=\"stylus\">\n  .home--menu\n    button, a.v-btn\n      width: 20em\n\n  .home--menu .btn__content\n    justify-content: normal\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=4a0bc9ff&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mb-3\"},[_c('v-layout',{attrs:{\"row\":\"\"}},[_c('h2',[_vm._v(\"Browser Diagnostics\")])]),_c('v-layout',{staticClass:\"mt-3 mb-3\",attrs:{\"row\":\"\"}},[_c('h4',[_vm._v(\"Web Audio Recording Support\")])]),_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('ul',[_c('li',[_c('span',{staticClass:\"lbl\"},[_vm._v(\"AudioContext\")]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(_vm.audioContextStr))])]),_c('li',[_c('span',{staticClass:\"lbl\"},[_vm._v(\"webkitAudioContext\")]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(_vm.webkitAudioContextStr))])]),_c('li',[_c('span',{staticClass:\"lbl\"},[_vm._v(\"mediaDevices\")]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(_vm.mediaDevicesStr))])]),_c('li',[_c('span',{staticClass:\"lbl\"},[_vm._v(\"getUserMedia\")]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(_vm.getUserMediaStr))])]),_c('li',[_c('span',{staticClass:\"lbl\"},[_vm._v(\"MediaRecorder\")]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(_vm.hasMediaRecorder))])]),_c('li',[_c('span',{staticClass:\"lbl\"},[_vm._v(\"AnalyserNode\")]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(_vm.analyserNode))])]),_c('li',[_c('span',{staticClass:\"lbl\"},[_vm._v(\"DynamicsCompressorNode\")]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(_vm.dynamicsCompressorNode))])])])])],1),_c('v-layout',{staticClass:\"mt-3\",attrs:{\"row\":\"\"}},[_c('h4',[_vm._v(\"Audio Input Devices\")])]),_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.availableDeviceNames),function(name){return _c('v-flex',{key:name,attrs:{\"sm6\":\"\"}},[_c('div',{staticClass:\"pr-3\"},[_c('ul',[_c('li',[_vm._v(_vm._s(name))])])])])}),1),(_vm.enumeratedDevicesPermissionNeeded)?_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-btn',{on:{\"click\":_vm.requestDevicePermissions}},[_vm._v(\"Request Default Device Permission\")])],1):_vm._e(),(_vm.enumeratedDevicesPermissionNeeded)?_c('v-layout',{staticClass:\"ml-5\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_vm._v(\"\\n    Needed to get device labels\\n  \")]):_vm._e(),(_vm.enumeratedDevicesPermissionRevokable)?_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-btn',{on:{\"click\":_vm.revokeDevicePermissions}},[_vm._v(\"Revoke Default Device Permission\")])],1):_vm._e(),_c('v-layout',{staticClass:\"mt-3\",attrs:{\"row\":\"\"}},[_c('h4',[_vm._v(\"Supported Device Constraints\")])]),_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.supportedDeviceConstraints),function(deviceConstraint){return _c('span',{key:deviceConstraint,staticClass:\"lbl\"},[_vm._v(_vm._s(deviceConstraint))])}),0),_c('v-layout',{staticClass:\"mt-3\",attrs:{\"row\":\"\"}},[_c('h4',[_vm._v(\"Default Capabilities, Constraints, & Settings\")])]),_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},_vm._l((_vm.defaultDeviceDetails),function(detail){return _c('v-flex',{key:detail.name,attrs:{\"sm12\":\"\"}},[_c('ul',[_c('li',[_c('span',{staticClass:\"lbl-1\"},[_vm._v(_vm._s(detail.name))]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(detail.text))])])])])}),1),_c('v-layout',{staticClass:\"mt-3\",attrs:{\"row\":\"\"}},[_c('h4',[_vm._v(\"Supported MediaRecorder Mime Types\")])]),_c('v-layout',{staticClass:\"ml-4\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('ul',_vm._l((_vm.supportedMimeTypes),function(mimetype){return _c('li',{key:mimetype.name},[_c('span',{staticClass:\"lbl\"},[_vm._v(_vm._s(mimetype.name))]),_vm._v(\" : \"),_c('span',{staticClass:\"val\"},[_vm._v(_vm._s(mimetype.supported))])])}),0)])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\",\"mt-3\":\"\"}},[_c('h4',[_vm._v(\"References\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://caniuse.com/mediarecorder\"}},[_vm._v(\"\\n            https://caniuse.com/mediarecorder\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API\"}},[_vm._v(\"\\n            https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API/Constraints\"}},[_vm._v(\"\\n            https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API/Constraints\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\"}},[_vm._v(\"\\n            https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API\"}},[_vm._v(\"\\n            https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices\"}},[_vm._v(\"\\n            https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API\"}},[_vm._v(\"\\n            https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://www.w3.org/TR/webaudio/\"}},[_vm._v(\"https://www.w3.org/TR/webaudio/\")])])]),_c('br'),_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://webrtc.github.io/samples/\"}},[_vm._v(\"https://webrtc.github.io/samples/\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\"}},[_vm._v(\"\\n            https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\\n          \")])])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"mb-3\">\n    <v-layout row>\n      <h2>Browser Diagnostics</h2>\n    </v-layout>\n\n    <v-layout row class=\"mt-3 mb-3\">\n      <h4>Web Audio Recording Support</h4>\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\">\n      <v-flex xs12>\n        <ul>\n          <li><span class=\"lbl\">AudioContext</span> : <span class=\"val\">{{ audioContextStr }}</span></li>\n          <li><span class=\"lbl\">webkitAudioContext</span> : <span class=\"val\">{{ webkitAudioContextStr }}</span></li>\n          <li><span class=\"lbl\">mediaDevices</span> : <span class=\"val\">{{ mediaDevicesStr }}</span></li>\n          <li><span class=\"lbl\">getUserMedia</span> : <span class=\"val\">{{ getUserMediaStr }}</span></li>\n          <li><span class=\"lbl\">MediaRecorder</span> : <span class=\"val\">{{ hasMediaRecorder }}</span></li>\n          <li><span class=\"lbl\">AnalyserNode</span> : <span class=\"val\">{{ analyserNode }}</span></li>\n          <li><span class=\"lbl\">DynamicsCompressorNode</span> : <span class=\"val\">{{ dynamicsCompressorNode }}</span>\n          </li>\n        </ul>\n      </v-flex>\n    </v-layout>\n\n    <v-layout row class=\"mt-3\">\n      <h4>Audio Input Devices</h4>\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\">\n      <v-flex sm6 v-for=\"name in availableDeviceNames\" v-bind:key=\"name\">\n        <div class=\"pr-3\">\n          <ul>\n            <li>{{name}}</li>\n          </ul>\n        </div>\n      </v-flex>\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\" v-if=\"enumeratedDevicesPermissionNeeded\">\n      <v-btn @click=\"requestDevicePermissions\">Request Default Device Permission</v-btn>\n    </v-layout>\n    <v-layout row wrap class=\"ml-5\" v-if=\"enumeratedDevicesPermissionNeeded\">\n      Needed to get device labels\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\" v-if=\"enumeratedDevicesPermissionRevokable\">\n      <v-btn @click=\"revokeDevicePermissions\">Revoke Default Device Permission</v-btn>\n    </v-layout>\n\n    <v-layout row class=\"mt-3\">\n      <h4>Supported Device Constraints</h4>\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\">\n      <span v-for=\"deviceConstraint in supportedDeviceConstraints\" v-bind:key=\"deviceConstraint\" class=\"lbl\">{{ deviceConstraint }}</span>\n    </v-layout>\n\n    <v-layout row class=\"mt-3\">\n      <h4>Default Capabilities, Constraints, & Settings</h4>\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\">\n      <v-flex sm12 v-for=\"detail in defaultDeviceDetails\" v-bind:key=\"detail.name\">\n\n        <ul>\n          <li>\n            <span class=\"lbl-1\">{{ detail.name }}</span> : <span class=\"val\">{{ detail.text}}</span>\n          </li>\n        </ul>\n\n      </v-flex>\n    </v-layout>\n\n    <v-layout row class=\"mt-3\">\n      <h4>Supported MediaRecorder Mime Types</h4>\n    </v-layout>\n    <v-layout row wrap class=\"ml-4\">\n      <v-flex xs12>\n        <ul>\n          <li v-for=\"mimetype in supportedMimeTypes\" v-bind:key=\"mimetype.name\">\n            <span class=\"lbl\">{{ mimetype.name }}</span> : <span class=\"val\">{{ mimetype.supported }}</span>\n          </li>\n        </ul>\n      </v-flex>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only mt-3>\n      <h4>References</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://caniuse.com/mediarecorder\">\n              https://caniuse.com/mediarecorder\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API\">\n              https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API\n            </a>\n          </li>\n          <li>\n            <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API/Constraints\">\n              https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API/Constraints\n            </a>\n          </li>\n          <li>\n            <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\">\n              https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\n            </a>\n          </li>\n          <li>\n            <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API\">\n              https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API\n            </a>\n          </li>\n          <li>\n            <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices\">\n              https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices\n            </a>\n          </li>\n          <li>\n            <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API\">\n              https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API\n            </a>\n          </li>\n          <li>\n            <a href=\"https://www.w3.org/TR/webaudio/\">https://www.w3.org/TR/webaudio/</a>\n          </li>\n        </ul>\n        <br>\n        <ul>\n          <li>\n            <a href=\"https://webrtc.github.io/samples/\">https://webrtc.github.io/samples/</a>\n          </li>\n          <li>\n            <a href=\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\">\n              https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\n            </a>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Diagnostics',\n  data () {\n    return {\n      availableDeviceNames: [],\n      defaultDeviceDetails: [],\n      enumeratedDevices: [],\n      enumeratedDevicesPermissionNeeded: false,\n      enumeratedDevicesPermissionRevokable: false,\n      getUserMediaStr: (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) ? true : false, // eslint-disable-line\n      mediaDevicesStr: navigator.mediaDevices ? true : false, // eslint-disable-line\n      supportedMimeTypes: [],\n      hasMediaRecorder: typeof window.MediaRecorder !== 'undefined',\n      supportedDeviceConstraints: []\n    }\n  },\n  computed: {\n    audioContextStr () {\n      return window.AudioContext ? true : false // eslint-disable-line\n    },\n    analyserNode () {\n      return window.AnalyserNode ? true : false  // eslint-disable-line\n    },\n    dynamicsCompressorNode () {\n      return window.DynamicsCompressorNode ? true : false // eslint-disable-line\n    },\n    webkitAudioContextStr () {\n      return window.webkitAudioContext ? true : false // eslint-disable-line\n    }\n  },\n  mounted () {\n    this.requestDevicePermissions()\n  },\n  destroyed () {\n    if (this.stream) {\n      this.stream.getTracks().forEach((track) => track.stop())\n      this.stream = null\n    }\n  },\n  created () {\n    const types = [\n      'audio/aac',\n      'audio/mp4',\n      'audio/mpeg',\n      'audio/vorbis',\n      'audio/wav',\n      'audio/webm',\n      'audio/webm;codecs=opus',\n      'audio/wav',\n      'audio/x-wav',\n      'audio/vnd.wav',\n\n      'video/quicktime',\n      'video/webm',\n      'video/webm;codecs=vp8',\n      'video/webm;codecs=vp9',\n      'video/webm;codecs=h264',\n      'video/mp4']\n\n    if (typeof MediaRecorder === 'undefined' || !MediaRecorder.isTypeSupported) {\n      this.supportedMimeTypes.push({ name: 'none', supported: '(manual encoding required)' })\n    }\n    else {\n      for (const i in types) {\n        if (MediaRecorder.isTypeSupported(types[i])) {\n          this.supportedMimeTypes.push({ name: types[i], supported: MediaRecorder.isTypeSupported(types[i]) })\n        }\n      }\n    }\n\n    // Listed without labels until permission is granted to at least one device\n    this.enumerateDevices()\n\n    const supportedConstraints = navigator.mediaDevices.getSupportedConstraints()\n    for (let constraint in supportedConstraints) {\n      if (supportedConstraints.hasOwnProperty(constraint) && supportedConstraints[constraint] === true) {\n        this.supportedDeviceConstraints.push(constraint)\n      }\n    }\n  },\n  methods: {\n    setupAvailDeviceNames () {\n      let availDevices = []\n      this.enumeratedDevices.forEach((device, idx) => {\n        // console.log(device)\n        if (device.kind === 'audioinput') {\n          if (!device.label) {\n            this.enumeratedDevicesPermissionNeeded = true\n            availDevices.push('Input ' + idx + ' (' + device.deviceId + ')')\n          }\n          else {\n            availDevices.push(device.label)\n          }\n        }\n      })\n      this.availableDeviceNames = availDevices\n    },\n    enumerateDevices () {\n      navigator.mediaDevices.enumerateDevices()\n        .then((devices) => {\n          this.enumeratedDevices = devices\n          this.setupAvailDeviceNames()\n        })\n        .catch((error) => {\n          console.log(error)\n          this.enumeratedDevices.push({ id: '-', kind: 'error', deviceId: 'error' })\n        })\n    },\n    requestDevicePermissions () {\n      // this.enumeratedDevices.forEach((device) => {\n      // })\n      navigator.mediaDevices.getUserMedia({ audio: true })\n        .then((stream) => {\n          console.log('stream', stream)\n\n          this.enumerateDevices()\n          this.enumeratedDevicesPermissionNeeded = false\n          this.enumeratedDevicesPermissionRevokable = true\n          this.stream = stream\n\n          this.defaultDeviceDetails = []\n          let d = this.defaultDeviceDetails\n\n          let tracks = stream.getAudioTracks()\n          console.log('tracks', tracks)\n          tracks.forEach((track, trackIdx) => {\n            let th = 'track[' + trackIdx + '].'\n            d.push({ name: th + 'label', text: track.label })\n            d.push({ name: th + 'kind', text: track.kind })\n            d.push({ name: th + 'muted', text: track.muted })\n\n            let constraints = track.getConstraints()\n            console.log('constraints', constraints)\n            for (let key in constraints) {\n              d.push({ name: th + 'constr[' + key + ']', text: constraints[key] })\n            }\n\n            let capabilities = track.getCapabilities()\n            console.log('capabilities', capabilities)\n            for (let key in capabilities) {\n              d.push({ name: th + 'capab[' + key + ']', text: capabilities[key] })\n            }\n\n            let settings = track.getSettings()\n            console.log('settings', settings)\n            for (let key in settings) {\n              d.push({ name: th + 'settings[' + key + ']', text: settings[key] })\n            }\n          })\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    },\n    revokeDevicePermissions () {\n      if (this.stream) {\n        this.stream.getTracks().forEach((track) => track.stop())\n        this.stream = null\n      }\n      this.enumeratedDevicesPermissionNeeded = true\n      this.enumeratedDevicesPermissionRevokable = false\n      this.enumerateDevices()\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .lbl {\n    display: inline-block;\n    width: 15em;\n  }\n\n  .lbl-1 {\n    display: inline-block;\n    width: 15em;\n  }\n\n  .val {\n    margin-left: 1em;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Diagnostics.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Diagnostics.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Diagnostics.vue?vue&type=template&id=6cf7fd6f&scoped=true&\"\nimport script from \"./Diagnostics.vue?vue&type=script&lang=js&\"\nexport * from \"./Diagnostics.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Diagnostics.vue?vue&type=style&index=0&id=6cf7fd6f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6cf7fd6f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"mb-5\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',{staticClass:\"test2\"},[_c('h3',[_vm._v(\"Test 2 \"),(_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_c('br')]):_vm._e(),(!_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_vm._v(\" - \")]):_vm._e(),_vm._v(\" Recording Processing & Manipulation\\n      \")]),_c('h3'),_c('p',[_vm._v(\"Manual processing and manipulation of the recording audio stream.\")]),_c('div',[_c('v-btn',{attrs:{\"disabled\":_vm.recordingInProgress},on:{\"click\":_vm.startRecording}},[_vm._v(\"Start Recording\\n        \")]),_c('v-btn',{attrs:{\"disabled\":!_vm.recordingInProgress},on:{\"click\":_vm.stopRecording}},[_vm._v(\"Stop Recording\")]),_c('v-icon',{class:_vm.recordingInProgress ? 'live' : ''},[_vm._v(\"mic\")])],1)])]),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',{ref:\"audioProcessDiv\",staticClass:\"ml-2\",attrs:{\"id\":\"audioProcessDiv\"}},[_vm._v(\"\\n      Samples Received: \"+_vm._s(_vm.numAudioSamples)+\"\\n    \")])]),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-checkbox',{attrs:{\"label\":\"Add noise (dynamic)\"},model:{value:(_vm.addNoise),callback:function ($$v) {_vm.addNoise=$$v},expression:\"addNoise\"}})],1),(_vm.recordings.length > 0)?_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recordings\")]),_vm._l((_vm.recordings),function(recording,idx){return _c('div',{key:recording.ts},[_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',[_c('h3',[_vm._v(\"Recording #\"+_vm._s(idx + 1))])]),_c('div',{staticClass:\"ml-3\"},[_c('div',[_c('audio',{attrs:{\"src\":recording.blobUrl,\"controls\":\"true\"}})]),_c('div',[_vm._v(\"\\n                size: \"+_vm._s(_vm._f(\"fileSizeToHumanSize\")(recording.size))+\", type: \"+_vm._s(recording.mimeType)+\"\\n              \")])])])],1)],1),(idx !== (_vm.recordings.length-1))?_c('v-divider'):_vm._e()],1)})],2):_vm._e(),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Source\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test2.vue\"}},[_vm._v(\"\\n            src/views/Test2.vue\\n          \")]),_c('ul',{staticClass:\"ml-3\"},[_c('li',[_vm._v(\"Primarily:\\n              \"),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\"}},[_vm._v(\"\\n                src/shared/RecorderService.js\\n              \")])])])])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Relevant\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/muaz-khan/RecordRTC/issues/324\"}},[_vm._v(\"\\n            https://github.com/muaz-khan/RecordRTC/issues/324\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/ai/audio-recorder-polyfill/issues/4\"}},[_vm._v(\"\\n            https://github.com/ai/audio-recorder-polyfill/issues/4\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/danielstorey/webrtc-audio-recording\"}},[_vm._v(\"\\n            https://github.com/danielstorey/webrtc-audio-recording\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\"}},[_vm._v(\"\\n            https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\\n          \")])]),_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/MicrosoftEdge/Demos/blob/master/microphone\"}},[_vm._v(\"\\n              https://github.com/MicrosoftEdge/Demos/blob/master/microphone\\n            \")])])])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container mb-5>\n    <v-layout row wrap>\n      <div class=\"test2\">\n        <h3>Test 2 <span v-if=\"$vuetify.breakpoint.xsOnly\"><br></span>\n          <span v-if=\"!$vuetify.breakpoint.xsOnly\"> - </span> Recording Processing &amp; Manipulation\n        </h3>\n\n        <h3></h3>\n        <p>Manual processing and manipulation of the recording audio stream.</p>\n        <div>\n          <v-btn @click=\"startRecording\" :disabled=\"recordingInProgress\">Start Recording\n          </v-btn>\n          <v-btn @click=\"stopRecording\" :disabled=\"!recordingInProgress\">Stop Recording</v-btn>\n          <v-icon :class=\"recordingInProgress ? 'live' : ''\">mic</v-icon>\n        </div>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap>\n      <div id=\"audioProcessDiv\" ref=\"audioProcessDiv\" class=\"ml-2\">\n        Samples Received: {{ numAudioSamples }}\n      </div>\n    </v-layout>\n\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-checkbox v-model=\"addNoise\"\n                  label=\"Add noise (dynamic)\"></v-checkbox>\n    </v-layout>\n\n    <v-layout column wrap v-if=\"recordings.length > 0\">\n      <h4 class=\"mt-3\">Recordings</h4>\n      <div v-for=\"(recording,idx) in recordings\" :key=\"recording.ts\">\n        <v-card>\n          <v-card-title primary-title>\n            <v-layout column wrap>\n              <div>\n                <h3>Recording #{{ idx + 1 }}</h3>\n              </div>\n              <div class=\"ml-3\">\n                <div>\n                  <audio :src=\"recording.blobUrl\" controls=\"true\"/>\n                </div>\n                <div>\n                  size: {{recording.size | fileSizeToHumanSize}}, type: {{recording.mimeType}}\n                </div>\n              </div>\n            </v-layout>\n          </v-card-title>\n        </v-card>\n        <v-divider v-if=\"idx !== (recordings.length-1)\"/>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap>\n      <h4 class=\"mt-3\">Source</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test2.vue\">\n              src/views/Test2.vue\n            </a>\n            <ul class=\"ml-3\">\n              <li>Primarily:\n                <a\n                  href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\">\n                  src/shared/RecorderService.js\n                </a>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only>\n      <h4 class=\"mt-3\">Relevant</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://github.com/muaz-khan/RecordRTC/issues/324\">\n              https://github.com/muaz-khan/RecordRTC/issues/324\n            </a>\n          </li>\n          <li>\n            <a href=\"https://github.com/ai/audio-recorder-polyfill/issues/4\">\n              https://github.com/ai/audio-recorder-polyfill/issues/4\n            </a>\n          </li>\n          <li>\n            <a href=\"https://github.com/danielstorey/webrtc-audio-recording\">\n              https://github.com/danielstorey/webrtc-audio-recording\n            </a>\n          </li>\n          <li>\n            <a href=\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\">\n              https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\n            </a>\n          </li>\n          <ul>\n            <li>\n              <a href=\"https://github.com/MicrosoftEdge/Demos/blob/master/microphone\">\n                https://github.com/MicrosoftEdge/Demos/blob/master/microphone\n              </a>\n            </li>\n          </ul>\n        </ul>\n      </div>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport RecorderService from '@/shared/RecorderService'\nimport utils from '@/shared/Utils'\n\nexport default {\n  name: 'Test1',\n  filters: {\n    fileSizeToHumanSize (val) {\n      return utils.humanFileSize(val, true)\n    }\n  },\n  data () {\n    return {\n      recordingInProgress: false,\n      supportedMimeTypes: [],\n      recordings: [],\n      cleanupWhenFinished: true,\n      addNoise: false,\n      numAudioSamples: 0\n    }\n  },\n  created () {\n    this.recorderSrvc = new RecorderService()\n    this.recorderSrvc.em.addEventListener('recording', (evt) => this.onNewRecording(evt))\n    this.recorderSrvc.em.addEventListener('onaudioprocess', (evt) => this.onAudioProcess(evt))\n    this.recorderSrvc.config.broadcastAudioProcessEvents = true\n  },\n  mounted () {\n  },\n  methods: {\n    startRecording () {\n      this.numAudioSamples = 0\n      this.recorderSrvc.startRecording()\n        .then(() => {\n          this.recordingInProgress = true\n        })\n        .catch((error) => {\n          console.error('Exception while start recording: ' + error)\n          alert('Exception while start recording: ' + error.message)\n        })\n    },\n    stopRecording () {\n      this.recorderSrvc.stopRecording()\n      this.recordingInProgress = false\n    },\n    onAudioProcess (e) {\n      this.numAudioSamples++\n\n      let inputBuffer = e.detail.inputBuffer\n      let outputBuffer = e.detail.outputBuffer\n\n      for (let channel = 0; channel < outputBuffer.numberOfChannels; channel++) {\n        let inputData = inputBuffer.getChannelData(channel)\n        let outputData = outputBuffer.getChannelData(channel)\n\n        // Each sample\n        for (let sample = 0; sample < inputBuffer.length; sample++) {\n          if (this.addNoise) {\n            outputData[sample] = (inputData[sample] + (Math.random() * 0.02))\n          }\n          else {\n            outputData[sample] = inputData[sample]\n          }\n        }\n      }\n    },\n    onNewRecording (evt) {\n      this.recordings.push(evt.detail.recording)\n    }\n\n  }\n}\n</script>\n<style lang=\"stylus\" scoped=\"true\">\n  @import '~vuetify/src/stylus/settings/_variables'\n  @media screen and (min-width: $grid-breakpoints.sm)\n    audio\n      width 35em\n\n  @media screen and (max-width: ($grid-breakpoints.sm - 1))\n    audio\n      width 100%\n\n  .live\n    color red\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Test2.vue?vue&type=template&id=0cf2916c&scoped=true&\"\nimport script from \"./Test2.vue?vue&type=script&lang=js&\"\nexport * from \"./Test2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Test2.vue?vue&type=style&index=0&id=0cf2916c&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0cf2916c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"mb-5\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',{staticClass:\"test2\"},[_c('h3',[_vm._v(\"Test 3 \"),(_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_c('br')]):_vm._e(),(!_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_vm._v(\" - \")]):_vm._e(),_vm._v(\" Script Processors w/ Peak Levels\\n      \")]),_c('p',[_vm._v(\"Recording with multiple simultaneous script processors. In this case, showing peak levels of recording pre\\n        and post gain.\")]),_c('div',[_c('v-btn',{attrs:{\"disabled\":_vm.recordingInProgress},on:{\"click\":_vm.startRecording}},[_vm._v(\"Start Recording\\n        \")]),_c('v-btn',{attrs:{\"disabled\":!_vm.recordingInProgress},on:{\"click\":_vm.stopRecording}},[_vm._v(\"Stop Recording\")]),_c('v-icon',{class:_vm.recordingInProgress ? 'live' : ''},[_vm._v(\"mic\")])],1)])]),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs10\":\"\",\"md6\":\"\"}},[_c('v-slider',{attrs:{\"label\":\"Mic Gain\",\"max\":500},model:{value:(_vm.micGainSlider),callback:function ($$v) {_vm.micGainSlider=$$v},expression:\"micGainSlider\"}})],1),_c('v-flex',{attrs:{\"xs2\":\"\"}},[_c('div',{staticClass:\"input-group\"},[_c('label',[_vm._v(_vm._s(_vm.micGain))])])])],1),_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recording Peak Meters\")])]),_c('v-divider'),_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs6\":\"\",\"sm2\":\"\"}},[_c('div',{staticStyle:{\"width\":\"5em\",\"height\":\"10em\",\"margin\":\"1em 0\",\"border\":\"1px solid gray\"},attrs:{\"id\":\"peak-meter-raw\"}}),_c('p',[_vm._v(\"Raw\")])]),_c('v-flex',{attrs:{\"xs6\":\"\",\"sm2\":\"\"}},[_c('div',{staticStyle:{\"width\":\"5em\",\"height\":\"10em\",\"margin\":\"1em 0\",\"border\":\"1px solid gray\"},attrs:{\"id\":\"peak-meter-postgain\"}}),_vm._v(\"\\n      PostGain\\n    \")]),_c('v-spacer')],1),(_vm.recordings.length > 0)?_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recordings\")]),_c('v-divider'),_vm._l((_vm.recordings),function(recording,idx){return _c('div',{key:recording.ts},[_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',[_c('h3',[_vm._v(\"Recording #\"+_vm._s(idx + 1))])]),_c('div',{staticClass:\"ml-3\"},[_c('div',[_c('audio',{attrs:{\"src\":recording.blobUrl,\"controls\":\"true\"}})]),_c('div',[_vm._v(\"\\n                size: \"+_vm._s(_vm._f(\"fileSizeToHumanSize\")(recording.size))+\", type: \"+_vm._s(recording.mimeType)+\"\\n              \")])])])],1)],1),(idx !== (_vm.recordings.length-1))?_c('v-divider'):_vm._e()],1)})],2):_vm._e(),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Source\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test3.vue\"}},[_vm._v(\"\\n            src/views/Test3.vue\\n          \")]),_c('ul',{staticClass:\"ml-3\"},[_c('li',[_vm._v(\"Primarily:\\n              \"),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\"}},[_vm._v(\"\\n                src/shared/RecorderService.js\\n              \")])])])])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Relevant\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/muaz-khan/RecordRTC/issues/324\"}},[_vm._v(\"\\n            https://github.com/muaz-khan/RecordRTC/issues/324\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/ai/audio-recorder-polyfill/issues/4\"}},[_vm._v(\"\\n            https://github.com/ai/audio-recorder-polyfill/issues/4\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/danielstorey/webrtc-audio-recording\"}},[_vm._v(\"\\n            https://github.com/danielstorey/webrtc-audio-recording\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\"}},[_vm._v(\"\\n            https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\\n          \")])]),_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/MicrosoftEdge/Demos/blob/master/microphone\"}},[_vm._v(\"\\n              https://github.com/MicrosoftEdge/Demos/blob/master/microphone\\n            \")])])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/esonderegger/web-audio-peak-meter\"}},[_vm._v(\"\\n            https://github.com/esonderegger/web-audio-peak-meter\\n          \")])])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * Copied from https://github.com/esonderegger/web-audio-peak-meter\n * Modified to class form to allow multiple instances on a page.\n */\nexport default class WebAudioPeakMeter {\n  constructor () {\n    this.options = {\n      borderSize: 2,\n      fontSize: 9,\n      backgroundColor: 'black',\n      tickColor: '#ddd',\n      gradient: ['red 1%', '#ff0 16%', 'lime 45%', '#080 100%'],\n      dbRange: 48,\n      dbTickSize: 6,\n      maskTransition: 'height 0.1s'\n    }\n\n    // this.tickWidth\n    // this.elementWidth\n    // this.elementHeight\n    // this.meterHeight\n    // this.meterWidth\n    // this.meterTop\n    this.vertical = true\n    this.channelCount = 1\n    this.channelMasks = []\n    this.channelPeaks = []\n    this.channelPeakLabels = []\n  }\n\n  getBaseLog = function (x, y) {\n    return Math.log(y) / Math.log(x)\n  };\n\n  dbFromFloat = function (floatVal) {\n    return this.getBaseLog(10, floatVal) * 20\n  };\n\n  setOptions = function (userOptions) {\n    for (var k in userOptions) {\n      this.options[k] = userOptions[k]\n    }\n    this.tickWidth = this.options.fontSize * 2.0\n    this.meterTop = this.options.fontSize * 1.5 + this.options.borderSize\n  };\n\n  createMeterNode = function (sourceNode, audioCtx) {\n    var c = sourceNode.channelCount\n    var meterNode = audioCtx.createScriptProcessor(2048, c, c)\n    sourceNode.connect(meterNode)\n    meterNode.connect(audioCtx.destination)\n    return meterNode\n  };\n\n  createContainerDiv = function (parent) {\n    var meterElement = document.createElement('div')\n    meterElement.style.position = 'relative'\n    meterElement.style.width = this.elementWidth + 'px'\n    meterElement.style.height = this.elementHeight + 'px'\n    meterElement.style.backgroundColor = this.options.backgroundColor\n    parent.appendChild(meterElement)\n    return meterElement\n  };\n\n  createMeter = function (domElement, meterNode, optionsOverrides) {\n    this.setOptions(optionsOverrides)\n    this.elementWidth = domElement.clientWidth\n    this.elementHeight = domElement.clientHeight\n    var meterElement = this.createContainerDiv(domElement)\n    if (this.elementWidth > this.elementHeight) {\n      this.vertical = false\n    }\n    this.meterHeight = this.elementHeight - this.meterTop - this.options.borderSize\n    this.meterWidth = this.elementWidth - this.tickWidth - this.options.borderSize\n    this.createTicks(meterElement)\n    this.createRainbow(meterElement, this.meterWidth, this.meterHeight,\n      this.meterTop, this.tickWidth)\n    this.channelCount = meterNode.channelCount\n    var channelWidth = this.meterWidth / this.channelCount\n    var channelLeft = this.tickWidth\n    for (var i = 0; i < this.channelCount; i++) {\n      this.createChannelMask(meterElement, this.options.borderSize,\n        this.meterTop, channelLeft, false)\n      this.channelMasks[i] = this.createChannelMask(meterElement, channelWidth,\n        this.meterTop, channelLeft,\n        this.options.maskTransition)\n      this.channelPeaks[i] = 0.0\n      this.channelPeakLabels[i] = this.createPeakLabel(meterElement, channelWidth,\n        channelLeft)\n      channelLeft += channelWidth\n    }\n    meterNode.onaudioprocess = (e) => this.updateMeter(e)\n    meterElement.addEventListener('click', function () {\n      for (var i = 0; i < this.channelCount; i++) {\n        this.channelPeaks[i] = 0.0\n        this.channelPeakLabels[i].textContent = '-∞'\n      }\n    }, false)\n  };\n\n  createTicks = function (parent) {\n    var numTicks = Math.floor(this.options.dbRange / this.options.dbTickSize)\n    var dbTickLabel = 0\n    var dbTickTop = this.options.fontSize + this.options.borderSize\n    for (var i = 0; i < numTicks; i++) {\n      var dbTick = document.createElement('div')\n      parent.appendChild(dbTick)\n      dbTick.style.width = this.tickWidth + 'px'\n      dbTick.style.textAlign = 'right'\n      dbTick.style.color = this.options.tickColor\n      dbTick.style.fontSize = this.options.fontSize + 'px'\n      dbTick.style.position = 'absolute'\n      dbTick.style.top = dbTickTop + 'px'\n      dbTick.textContent = dbTickLabel + ''\n      dbTickLabel -= this.options.dbTickSize\n      dbTickTop += this.meterHeight / numTicks\n    }\n  };\n\n  createRainbow = function (parent, width, height, top, left) {\n    var rainbow = document.createElement('div')\n    parent.appendChild(rainbow)\n    rainbow.style.width = width + 'px'\n    rainbow.style.height = height + 'px'\n    rainbow.style.position = 'absolute'\n    rainbow.style.top = top + 'px'\n    rainbow.style.left = left + 'px'\n    var gradientStyle = 'linear-gradient(' + this.options.gradient.join(', ') + ')'\n    rainbow.style.backgroundImage = gradientStyle\n    return rainbow\n  };\n\n  createPeakLabel = function (parent, width, left) {\n    var label = document.createElement('div')\n    parent.appendChild(label)\n    label.style.width = width + 'px'\n    label.style.textAlign = 'center'\n    label.style.color = this.options.tickColor\n    label.style.fontSize = this.options.fontSize + 'px'\n    label.style.position = 'absolute'\n    label.style.top = this.options.borderSize + 'px'\n    label.style.left = left + 'px'\n    label.textContent = '-∞'\n    return label\n  };\n\n  createChannelMask = function (parent, width, top, left, transition) {\n    var channelMask = document.createElement('div')\n    parent.appendChild(channelMask)\n    channelMask.style.width = width + 'px'\n    channelMask.style.height = this.meterHeight + 'px'\n    channelMask.style.position = 'absolute'\n    channelMask.style.top = top + 'px'\n    channelMask.style.left = left + 'px'\n    channelMask.style.backgroundColor = this.options.backgroundColor\n    if (transition) {\n      channelMask.style.transition = this.options.maskTransition\n    }\n    return channelMask\n  };\n\n  maskSize = function (floatVal) {\n    if (floatVal === 0.0) {\n      return this.meterHeight\n    }\n    else {\n      var d = this.options.dbRange * -1\n      var returnVal = Math.floor(this.dbFromFloat(floatVal) * this.meterHeight / d)\n      if (returnVal > this.meterHeight) {\n        return this.meterHeight\n      }\n      else {\n        return returnVal\n      }\n    }\n  };\n\n  updateMeter = function (audioProcessingEvent) {\n    var inputBuffer = audioProcessingEvent.inputBuffer\n    var i\n    var channelData = []\n    var channelMaxes = []\n    for (i = 0; i < this.channelCount; i++) {\n      channelData[i] = inputBuffer.getChannelData(i)\n      channelMaxes[i] = 0.0\n    }\n    for (var sample = 0; sample < inputBuffer.length; sample++) {\n      for (i = 0; i < this.channelCount; i++) {\n        if (Math.abs(channelData[i][sample]) > channelMaxes[i]) {\n          channelMaxes[i] = Math.abs(channelData[i][sample])\n        }\n      }\n    }\n    for (i = 0; i < this.channelCount; i++) {\n      var thisMaskSize = this.maskSize(channelMaxes[i], this.meterHeight)\n      this.channelMasks[i].style.height = thisMaskSize + 'px'\n      if (channelMaxes[i] > this.channelPeaks[i]) {\n        this.channelPeaks[i] = channelMaxes[i]\n        var labelText = this.dbFromFloat(this.channelPeaks[i]).toFixed(1)\n        this.channelPeakLabels[i].textContent = labelText\n      }\n    }\n  }\n}\n","<template>\n  <v-container mb-5>\n    <v-layout row wrap>\n      <div class=\"test2\">\n        <h3>Test 3 <span v-if=\"$vuetify.breakpoint.xsOnly\"><br></span>\n          <span v-if=\"!$vuetify.breakpoint.xsOnly\"> - </span> Script Processors w/ Peak Levels\n        </h3>\n        <p>Recording with multiple simultaneous script processors. In this case, showing peak levels of recording pre\n          and post gain.</p>\n        <div>\n          <v-btn @click=\"startRecording\" :disabled=\"recordingInProgress\">Start Recording\n          </v-btn>\n          <v-btn @click=\"stopRecording\" :disabled=\"!recordingInProgress\">Stop Recording</v-btn>\n          <v-icon :class=\"recordingInProgress ? 'live' : ''\">mic</v-icon>\n        </div>\n      </div>\n    </v-layout>\n\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-flex xs10 md6>\n        <v-slider label=\"Mic Gain\" :max=\"500\" v-model=\"micGainSlider\"></v-slider>\n      </v-flex>\n      <v-flex xs2>\n        <div class=\"input-group\">\n          <label>{{ micGain }}</label>\n        </div>\n      </v-flex>\n    </v-layout>\n\n    <v-layout row wrap>\n      <h4 class=\"mt-3\">Recording Peak Meters</h4>\n    </v-layout>\n\n    <v-divider></v-divider>\n    <v-layout row wrap>\n      <v-flex xs6 sm2>\n        <div id=\"peak-meter-raw\" style=\"width: 5em; height: 10em; margin: 1em 0; border:1px solid gray\"></div>\n        <p>Raw</p>\n      </v-flex>\n      <v-flex xs6 sm2>\n        <div id=\"peak-meter-postgain\" style=\"width: 5em; height: 10em; margin: 1em 0;  border:1px solid gray\"></div>\n        PostGain\n      </v-flex>\n      <v-spacer></v-spacer>\n    </v-layout>\n\n    <v-layout column wrap v-if=\"recordings.length > 0\">\n      <h4 class=\"mt-3\">Recordings</h4>\n      <v-divider></v-divider>\n      <div v-for=\"(recording,idx) in recordings\" :key=\"recording.ts\">\n        <v-card>\n          <v-card-title primary-title>\n            <v-layout column wrap>\n              <div>\n                <h3>Recording #{{ idx + 1 }}</h3>\n              </div>\n              <div class=\"ml-3\">\n                <div>\n                  <audio :src=\"recording.blobUrl\" controls=\"true\"/>\n                </div>\n                <div>\n                  size: {{recording.size | fileSizeToHumanSize}}, type: {{recording.mimeType}}\n                </div>\n              </div>\n            </v-layout>\n          </v-card-title>\n        </v-card>\n        <v-divider v-if=\"idx !== (recordings.length-1)\"/>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap>\n      <h4 class=\"mt-3\">Source</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test3.vue\">\n              src/views/Test3.vue\n            </a>\n            <ul class=\"ml-3\">\n              <li>Primarily:\n                <a\n                  href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\">\n                  src/shared/RecorderService.js\n                </a>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only>\n      <h4 class=\"mt-3\">Relevant</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://github.com/muaz-khan/RecordRTC/issues/324\">\n              https://github.com/muaz-khan/RecordRTC/issues/324\n            </a>\n          </li>\n          <li>\n            <a href=\"https://github.com/ai/audio-recorder-polyfill/issues/4\">\n              https://github.com/ai/audio-recorder-polyfill/issues/4\n            </a>\n          </li>\n          <li>\n            <a href=\"https://github.com/danielstorey/webrtc-audio-recording\">\n              https://github.com/danielstorey/webrtc-audio-recording\n            </a>\n          </li>\n          <li>\n            <a href=\"https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\">\n              https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/microphone/\n            </a>\n          </li>\n          <ul>\n            <li>\n              <a href=\"https://github.com/MicrosoftEdge/Demos/blob/master/microphone\">\n                https://github.com/MicrosoftEdge/Demos/blob/master/microphone\n              </a>\n            </li>\n          </ul>\n          <li>\n            <a href=\"https://github.com/esonderegger/web-audio-peak-meter\">\n              https://github.com/esonderegger/web-audio-peak-meter\n            </a>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport RecorderService from '@/shared/RecorderService'\nimport utils from '@/shared/Utils'\nimport WebAudioPeakMeter from '@/shared/WebAudioPeakMeter'\n\n// Couldn't use the original library because it doesn't support more than one instance on page due to the module structure\n// import webAudioPeakMeter from 'web-audio-peak-meter'\nlet webAudioPeakMeter1 = new WebAudioPeakMeter()\nlet webAudioPeakMeter2 = new WebAudioPeakMeter()\n\nexport default {\n  name: 'Test3',\n  filters: {\n    fileSizeToHumanSize (val) {\n      return utils.humanFileSize(val, true)\n    }\n  },\n  data () {\n    return {\n      micGainSlider: 100,\n      micGain: 1.0,\n      recordingInProgress: false,\n      supportedMimeTypes: [],\n      recordings: [],\n      cleanupWhenFinished: true\n    }\n  },\n  watch: {\n    micGainSlider () {\n      this.micGain = (this.micGainSlider * 0.01).toFixed(2)\n      this.recorderSrvc.setMicGain(this.micGain)\n    }\n  },\n  created () {\n    this.recorderSrvc = new RecorderService()\n    this.recorderSrvc.em.addEventListener('recording', (evt) => this.onNewRecording(evt))\n    this.recorderSrvc.onGraphSetupWithInputStream = (inputStreamNode) => {\n      this.meterNodeRaw = webAudioPeakMeter1.createMeterNode(inputStreamNode, this.recorderSrvc.audioCtx)\n      webAudioPeakMeter1.createMeter(this.peakMeterRawEl, this.meterNodeRaw, {})\n    }\n  },\n  mounted () {\n    this.peakMeterRawEl = document.getElementById('peak-meter-raw')\n    this.peakMeterPostGainEl = document.getElementById('peak-meter-postgain')\n  },\n  methods: {\n    startRecording () {\n      this.recorderSrvc.startRecording()\n        .then(() => {\n          this.recordingInProgress = true\n\n          this.meterNodePostGain = webAudioPeakMeter2.createMeterNode(this.recorderSrvc.micGainNode, this.recorderSrvc.audioCtx)\n          webAudioPeakMeter2.createMeter(this.peakMeterPostGainEl, this.meterNodePostGain, {})\n        })\n        .catch((error) => {\n          console.error('Exception while start recording: ' + error)\n          alert('Exception while start recording: ' + error.message)\n        })\n    },\n    stopRecording () {\n      this.recorderSrvc.stopRecording()\n      this.recordingInProgress = false\n\n      this.meterNodeRaw.disconnect()\n      this.meterNodeRaw = null\n      this.peakMeterRawEl.innerHTML = ''\n\n      this.meterNodePostGain.disconnect()\n      this.meterNodePostGain = null\n      this.peakMeterPostGainEl.innerHTML = ''\n    },\n    onNewRecording (evt) {\n      this.recordings.push(evt.detail.recording)\n    }\n  }\n}\n</script>\n<style lang=\"stylus\" scoped=\"true\">\n  @import '~vuetify/src/stylus/settings/_variables'\n  @media screen and (min-width: $grid-breakpoints.sm)\n    audio\n      width 35em\n\n  @media screen and (max-width: ($grid-breakpoints.sm - 1))\n    audio\n      width 100%\n\n  .live\n    color red\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test3.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test3.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Test3.vue?vue&type=template&id=3e85acbd&scoped=true&\"\nimport script from \"./Test3.vue?vue&type=script&lang=js&\"\nexport * from \"./Test3.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Test3.vue?vue&type=style&index=0&id=3e85acbd&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e85acbd\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"mb-5\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',{staticClass:\"test2\"},[_c('h3',[_vm._v(\"Test 4 \"),(_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_c('br')]):_vm._e(),(!_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_vm._v(\" - \")]):_vm._e(),_vm._v(\" Microphone Selection\\n      \")]),_c('p',[_vm._v(\"Test microphone input selection. See\\n        \"),_c('router-link',{attrs:{\"to\":\"/diagnostics\"}},[_vm._v(\"diagnostics\")]),_vm._v(\"\\n        for full enumeration and capabilities. Showing microphone labels first requires permissions to an input\\n        device. Click eye icon to show microphone labels.\\n      \")],1)])]),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs9\":\"\",\"md6\":\"\"}},[_c('v-select',{attrs:{\"items\":_vm.availableDevices,\"label\":\"Select Mic\",\"single-line\":\"\",\"item-text\":\"name\",\"item-value\":\"device.deviceId\"},model:{value:(_vm.selectedDeviceId),callback:function ($$v) {_vm.selectedDeviceId=$$v},expression:\"selectedDeviceId\"}})],1),_c('v-flex',{attrs:{\"xs1\":\"\"}},[_c('div',{staticClass:\"input-group\"},[_c('v-btn',{attrs:{\"color\":\"primary\",\"flat\":\"\",\"small\":\"\"},on:{\"click\":_vm.enumerateDevicesWithPermission}},[_c('v-icon',[_vm._v(\"remove_red_eye\")])],1)],1)])],1),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',[_c('v-btn',{attrs:{\"disabled\":_vm.recordingInProgress},on:{\"click\":_vm.startRecording}},[_vm._v(\"Start Recording\\n      \")]),_c('v-btn',{attrs:{\"disabled\":!_vm.recordingInProgress},on:{\"click\":_vm.stopRecording}},[_vm._v(\"Stop Recording\")]),_c('v-icon',{class:_vm.recordingInProgress ? 'live' : ''},[_vm._v(\"mic\")])],1)]),(_vm.recordings.length > 0)?_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recordings\")]),_c('v-divider'),_vm._l((_vm.recordings),function(recording,idx){return _c('div',{key:recording.ts},[_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',[_c('h3',[_vm._v(\"Recording #\"+_vm._s(idx + 1))])]),_c('div',{staticClass:\"ml-3\"},[_c('div',[_c('audio',{attrs:{\"src\":recording.blobUrl,\"controls\":\"true\"}})]),_c('div',[_vm._v(\"\\n                size: \"+_vm._s(_vm._f(\"fileSizeToHumanSize\")(recording.size))+\", type: \"+_vm._s(recording.mimeType)+\"\\n              \")])])])],1)],1),(idx !== (_vm.recordings.length-1))?_c('v-divider'):_vm._e()],1)})],2):_vm._e(),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Source\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test4.vue\"}},[_vm._v(\"\\n            src/views/Test4.vue\\n          \")]),_c('ul',{staticClass:\"ml-3\"},[_c('li',[_vm._v(\"Primarily:\\n              \"),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\"}},[_vm._v(\"\\n                src/shared/RecorderService.js\\n              \")])])])])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Relevant\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://webrtc.github.io/samples/src/content/devices/input-output/\"}},[_vm._v(\"\\n            https://webrtc.github.io/samples/src/content/devices/input-output/\\n          \")])])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container mb-5>\n    <v-layout row wrap>\n\n      <div class=\"test2\">\n        <h3>Test 4 <span v-if=\"$vuetify.breakpoint.xsOnly\"><br></span>\n          <span v-if=\"!$vuetify.breakpoint.xsOnly\"> - </span> Microphone Selection\n        </h3>\n        <p>Test microphone input selection. See\n          <router-link to=\"/diagnostics\">diagnostics</router-link>\n          for full enumeration and capabilities. Showing microphone labels first requires permissions to an input\n          device. Click eye icon to show microphone labels.\n        </p>\n      </div>\n    </v-layout>\n\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <v-flex xs9 md6>\n        <v-select\n          :items=\"availableDevices\"\n          v-model=\"selectedDeviceId\"\n          label=\"Select Mic\"\n          single-line\n          item-text=\"name\"\n          item-value=\"device.deviceId\"\n        >\n          <!--          <template slot=\"item\" slot-scope=\"data\">\n                      {{data.item.name}}\n                    </template>-->\n        </v-select>\n      </v-flex>\n      <v-flex xs1>\n        <div class=\"input-group\">\n          <v-btn color=\"primary\" flat small @click=\"enumerateDevicesWithPermission\">\n            <v-icon>remove_red_eye</v-icon>\n          </v-btn>\n        </div>\n\n      </v-flex>\n    </v-layout>\n\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <div>\n        <v-btn @click=\"startRecording\" :disabled=\"recordingInProgress\">Start Recording\n        </v-btn>\n        <v-btn @click=\"stopRecording\" :disabled=\"!recordingInProgress\">Stop Recording</v-btn>\n        <v-icon :class=\"recordingInProgress ? 'live' : ''\">mic</v-icon>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap v-if=\"recordings.length > 0\">\n      <h4 class=\"mt-3\">Recordings</h4>\n      <v-divider></v-divider>\n      <div v-for=\"(recording,idx) in recordings\" :key=\"recording.ts\">\n        <v-card>\n          <v-card-title primary-title>\n            <v-layout column wrap>\n              <div>\n                <h3>Recording #{{ idx + 1 }}</h3>\n              </div>\n              <div class=\"ml-3\">\n                <div>\n                  <audio :src=\"recording.blobUrl\" controls=\"true\"/>\n                </div>\n                <div>\n                  size: {{recording.size | fileSizeToHumanSize}}, type: {{recording.mimeType}}\n                </div>\n              </div>\n            </v-layout>\n          </v-card-title>\n        </v-card>\n        <v-divider v-if=\"idx !== (recordings.length-1)\"/>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap>\n      <h4 class=\"mt-3\">Source</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test4.vue\">\n              src/views/Test4.vue\n            </a>\n            <ul class=\"ml-3\">\n              <li>Primarily:\n                <a\n                  href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\">\n                  src/shared/RecorderService.js\n                </a>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only>\n      <h4 class=\"mt-3\">Relevant</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://webrtc.github.io/samples/src/content/devices/input-output/\">\n              https://webrtc.github.io/samples/src/content/devices/input-output/\n            </a>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport RecorderService from '@/shared/RecorderService'\nimport utils from '@/shared/Utils'\n\nexport default {\n  name: 'Test3',\n  filters: {\n    fileSizeToHumanSize (val) {\n      return utils.humanFileSize(val, true)\n    }\n  },\n  data () {\n    return {\n      availableDevices: [],\n      enumeratedDevices: [],\n      selectedDeviceId: null,\n      recordingInProgress: false,\n      recordings: [],\n      microphones: []\n    }\n  },\n  watch: {},\n  created () {\n    this.recorderSrvc = new RecorderService()\n    this.recorderSrvc.em.addEventListener('recording', (evt) => this.onNewRecording(evt))\n    this.enumerateDevices()\n  },\n  mounted () {\n  },\n  methods: {\n    startRecording () {\n      this.recorderSrvc.config.deviceId = this.selectedDeviceId\n      this.recorderSrvc.startRecording()\n        .then(() => {\n          this.recordingInProgress = true\n        })\n        .catch((error) => {\n          console.error('Exception while start recording: ' + error)\n          alert('Exception while start recording: ' + error.message)\n        })\n    },\n    stopRecording () {\n      this.recorderSrvc.stopRecording()\n      this.recordingInProgress = false\n    },\n    setupAvailDeviceNames () {\n      let availDevices = []\n      this.enumeratedDevices.forEach((device) => {\n        if (device.kind === 'audioinput') {\n          if (!device.label) {\n            this.enumeratedDevicesPermissionNeeded = true\n            availDevices.push({ name: 'Audio Input ' + (availDevices.length + 1), device: device })\n          }\n          else {\n            availDevices.push({ name: device.label, device: device })\n          }\n        }\n      })\n      this.availableDevices = availDevices\n    },\n    enumerateDevices () {\n      navigator.mediaDevices.enumerateDevices()\n        .then((devices) => {\n          this.enumeratedDevices = devices\n          this.setupAvailDeviceNames()\n          if (this.availableDevices && this.availableDevices.length > 1 && this.availableDevices[0].device) {\n            this.selectedDeviceId = this.availableDevices[0].device.deviceId\n          }\n          if (this.stream) {\n            this.stream.getTracks().forEach((track) => track.stop())\n            this.stream = null\n          }\n        })\n        .catch((error) => {\n          console.log(error)\n          this.enumeratedDevices.push({ id: '-', kind: 'error', deviceId: 'error' })\n        })\n    },\n    enumerateDevicesWithPermission () {\n      navigator.mediaDevices.getUserMedia({ audio: true, deviceId: 'default' })\n        .then((stream) => {\n          this.enumerateDevices()\n          this.stream = stream\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    },\n    onNewRecording (evt) {\n      this.recordings.push(evt.detail.recording)\n    }\n  }\n}\n</script>\n<style lang=\"stylus\" scoped=\"true\">\n  @import '~vuetify/src/stylus/settings/_variables'\n  @media screen and (min-width: $grid-breakpoints.sm)\n    audio\n      width 35em\n\n  @media screen and (max-width: ($grid-breakpoints.sm - 1))\n    audio\n      width 100%\n\n  .live\n    color red\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test4.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test4.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Test4.vue?vue&type=template&id=271d3caa&scoped=true&\"\nimport script from \"./Test4.vue?vue&type=script&lang=js&\"\nexport * from \"./Test4.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Test4.vue?vue&type=style&index=0&id=271d3caa&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"271d3caa\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"mb-5\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',{staticClass:\"test2\"},[_c('h3',[_vm._v(\"Test 5 \"),(_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_c('br')]):_vm._e(),(!_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_vm._v(\" - \")]):_vm._e(),_vm._v(\" Analyzer Node\\n      \")]),_c('p',[_vm._v(\"Test using analyzer node.\\n      \")])])]),_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',[_c('v-btn',{attrs:{\"disabled\":_vm.recordingInProgress},on:{\"click\":_vm.startRecording}},[_vm._v(\"Start Recording\\n      \")]),_c('v-btn',{attrs:{\"disabled\":!_vm.recordingInProgress},on:{\"click\":_vm.stopRecording}},[_vm._v(\"Stop Recording\")]),_c('v-icon',{class:_vm.recordingInProgress ? 'live' : ''},[_vm._v(\"mic\")])],1)]),_c('v-layout',{staticClass:\"mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"FFT Visualization\")]),_c('v-divider')],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('canvas',{staticStyle:{\"border\":\"1px solid black\",\"width\":\"100%\",\"height\":\"20em\"}})])],1),(_vm.recordings.length > 0)?_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recordings\")]),_c('v-divider'),_vm._l((_vm.recordings),function(recording,idx){return _c('div',{key:recording.ts},[_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',[_c('h3',[_vm._v(\"Recording #\"+_vm._s(idx + 1))])]),_c('div',{staticClass:\"ml-3\"},[_c('div',[_c('audio',{attrs:{\"src\":recording.blobUrl,\"controls\":\"true\"}})]),_c('div',[_vm._v(\"\\n                size: \"+_vm._s(_vm._f(\"fileSizeToHumanSize\")(recording.size))+\", type: \"+_vm._s(recording.mimeType)+\"\\n              \")])])])],1)],1),(idx !== (_vm.recordings.length-1))?_c('v-divider'):_vm._e()],1)})],2):_vm._e(),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Source\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test5.vue\"}},[_vm._v(\"\\n            src/views/Test5.vue\\n          \")]),_c('ul',{staticClass:\"ml-3\"},[_c('li',[_vm._v(\"Primarily:\\n              \"),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\"}},[_vm._v(\"\\n                src/shared/RecorderService.js\\n              \")])])])])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Relevant\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode\"}},[_vm._v(\"\\n            https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode\\n          \")])]),_c('li',[_c('a',{attrs:{\"href\":\"http://webaudioapi.com/samples/visualizer/\"}},[_vm._v(\"http://webaudioapi.com/samples/visualizer/\")])])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container mb-5>\n    <v-layout row wrap>\n\n      <div class=\"test2\">\n        <h3>Test 5 <span v-if=\"$vuetify.breakpoint.xsOnly\"><br></span>\n          <span v-if=\"!$vuetify.breakpoint.xsOnly\"> - </span> Analyzer Node\n        </h3>\n        <p>Test using analyzer node.\n        </p>\n      </div>\n    </v-layout>\n\n    <v-layout row wrap class=\"ml-1 mt-1\">\n      <div>\n        <v-btn @click=\"startRecording\" :disabled=\"recordingInProgress\">Start Recording\n        </v-btn>\n        <v-btn @click=\"stopRecording\" :disabled=\"!recordingInProgress\">Stop Recording</v-btn>\n        <v-icon :class=\"recordingInProgress ? 'live' : ''\">mic</v-icon>\n      </div>\n    </v-layout>\n\n    <v-layout row wrap class=\"mt-1\">\n      <v-flex xs12>\n        <h4 class=\"mt-3\">FFT Visualization</h4>\n        <v-divider></v-divider>\n      </v-flex>\n      <v-flex xs12>\n        <canvas style=\"border: 1px solid black; width:100%; height:20em\"></canvas>\n      </v-flex>\n    </v-layout>\n\n    <v-layout column wrap v-if=\"recordings.length > 0\">\n      <h4 class=\"mt-3\">Recordings</h4>\n      <v-divider></v-divider>\n      <div v-for=\"(recording,idx) in recordings\" :key=\"recording.ts\">\n        <v-card>\n          <v-card-title primary-title>\n            <v-layout column wrap>\n              <div>\n                <h3>Recording #{{ idx + 1 }}</h3>\n              </div>\n              <div class=\"ml-3\">\n                <div>\n                  <audio :src=\"recording.blobUrl\" controls=\"true\"/>\n                </div>\n                <div>\n                  size: {{recording.size | fileSizeToHumanSize}}, type: {{recording.mimeType}}\n                </div>\n              </div>\n            </v-layout>\n          </v-card-title>\n        </v-card>\n        <v-divider v-if=\"idx !== (recordings.length-1)\"/>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap>\n      <h4 class=\"mt-3\">Source</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test5.vue\">\n              src/views/Test5.vue\n            </a>\n            <ul class=\"ml-3\">\n              <li>Primarily:\n                <a\n                  href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\">\n                  src/shared/RecorderService.js\n                </a>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only>\n      <h4 class=\"mt-3\">Relevant</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode\">\n              https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode\n            </a>\n          </li>\n          <li>\n            <a href=\"http://webaudioapi.com/samples/visualizer/\">http://webaudioapi.com/samples/visualizer/</a>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport RecorderService from '@/shared/RecorderService'\nimport utils from '@/shared/Utils'\n\nconst SMOOTHING = 0.7\nconst FFT_SIZE = 2048\n\nexport default {\n  name: 'Test3',\n  filters: {\n    fileSizeToHumanSize (val) {\n      return utils.humanFileSize(val, true)\n    }\n  },\n  data () {\n    return {\n      recordingInProgress: false,\n      recordings: []\n    }\n  },\n  watch: {},\n  created () {\n    this.recorderSrvc = new RecorderService()\n    this.recorderSrvc.config.createAnalyserNode = true\n    this.recorderSrvc.em.addEventListener('recording', (evt) => this.onNewRecording(evt))\n  },\n  mounted () {\n  },\n  methods: {\n    startRecording () {\n      this.recorderSrvc.startRecording()\n        .then(() => {\n          this.recordingInProgress = true\n          this.analyser = this.recorderSrvc.analyserNode\n          this.audioCtx = this.recorderSrvc.audioCtx\n\n          this.analyser.minDecibels = -140\n          this.analyser.maxDecibels = 0\n          this.freqs = new Uint8Array(this.analyser.frequencyBinCount)\n          this.times = new Uint8Array(this.analyser.frequencyBinCount)\n\n          this.canvas = document.querySelector('canvas')\n          this.canvasWidth = this.canvas.width\n          this.canvasHeight = this.canvas.height\n\n          window.requestAnimationFrame(this.draw.bind(this))\n        })\n        .catch((error) => {\n          console.error('Exception while start recording: ' + error)\n          alert('Exception while start recording: ' + error.message)\n        })\n    },\n    stopRecording () {\n      this.recordingInProgress = false\n      this.recorderSrvc.stopRecording()\n    },\n    onNewRecording (evt) {\n      this.recordings.push(evt.detail.recording)\n    },\n    draw () {\n      this.analyser.smoothingTimeConstant = SMOOTHING\n      this.analyser.fftSize = FFT_SIZE\n\n      // Get the frequency data from the currently playing music\n      this.analyser.getByteFrequencyData(this.freqs)\n      this.analyser.getByteTimeDomainData(this.times)\n\n      // let width = Math.floor(1 / this.freqs.length, 10)\n\n      let canvas = this.canvas\n      let drawContext = canvas.getContext('2d')\n      let cWidth = this.canvasWidth\n      let cHeight = this.canvasHeight\n\n      drawContext.clearRect(0, 0, cWidth, cHeight)\n\n      // Draw the frequency domain chart.\n\n      for (let i = 0; i < this.analyser.frequencyBinCount; i++) {\n        let value = this.freqs[i]\n        let percent = value / 256\n        let height = cHeight * percent\n        let offset = cHeight - height - 1\n        let barWidth = cWidth / this.analyser.frequencyBinCount\n        let hue = i / this.analyser.frequencyBinCount * 360\n        drawContext.fillStyle = 'hsl(' + hue + ', 100%, 50%)'\n        drawContext.fillRect(i * barWidth, offset, barWidth, height)\n      }\n\n      // Draw the time domain chart.\n      drawContext.fillStyle = 'gray'\n      for (let i = 0; i < this.analyser.frequencyBinCount; i++) {\n        let value = this.times[i]\n        let percent = value / 256\n        let height = cHeight * percent\n        let offset = cHeight - height - 1\n        let barWidth = cWidth / this.analyser.frequencyBinCount\n        drawContext.fillRect(i * barWidth, offset, 1, 2)\n      }\n\n      if (this.recordingInProgress) {\n        window.requestAnimationFrame(this.draw.bind(this))\n      }\n    },\n    getFrequencyValue (freq) {\n      let nyquist = this.audioContext.sampleRate / 2\n      let index = Math.round(freq / nyquist * this.freqs.length)\n      return this.freqs[index]\n    }\n  }\n}\n</script>\n<style lang=\"stylus\" scoped=\"true\">\n  @import '~vuetify/src/stylus/settings/_variables'\n  @media screen and (min-width: $grid-breakpoints.sm)\n    audio\n      width 35em\n\n  @media screen and (max-width: ($grid-breakpoints.sm - 1))\n    audio\n      width 100%\n\n  .live\n    color red\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test5.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test5.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Test5.vue?vue&type=template&id=70bdb58e&scoped=true&\"\nimport script from \"./Test5.vue?vue&type=script&lang=js&\"\nexport * from \"./Test5.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Test5.vue?vue&type=style&index=0&id=70bdb58e&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70bdb58e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"mb-5\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',{staticClass:\"test2\"},[_c('h3',[_vm._v(\"Test 6 \"),(_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_c('br')]):_vm._e(),(!_vm.$vuetify.breakpoint.xsOnly)?_c('span',[_vm._v(\" - \")]):_vm._e(),_vm._v(\" In-browser Encoding\\n      \")]),_c('p',[_vm._v(\"Tests to verify encoding capabilities \"),_c('em',[_vm._v(\"while\")]),_vm._v(\" recording. Note that for this test, the native\\n        MediaRecorder is disabled even on browsers that have it.\")])])]),(!_vm.hasMediaRecorder)?_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',[_c('v-btn',{attrs:{\"disabled\":_vm.recordingInProgress},on:{\"click\":_vm.startRecording}},[_vm._v(\"Start Recording\\n      \")]),_c('v-btn',{attrs:{\"disabled\":!_vm.recordingInProgress},on:{\"click\":_vm.stopRecording}},[_vm._v(\"Stop Recording\")]),_c('v-icon',{class:_vm.recordingInProgress ? 'live' : ''},[_vm._v(\"mic\")])],1)]):_vm._e(),(_vm.hasMediaRecorder)?_c('v-layout',{staticClass:\"ml-1 mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('div',[_c('v-alert',{attrs:{\"type\":\"error\",\"value\":\"true\"}},[_vm._v(\"\\n        This test only makes sense on browsers that don't have a native MediaRecorder. It would be possible to use a\\n        manual encoder on other browsers, but this test isn't written to support it.\\n      \")])],1)]):_vm._e(),_c('v-layout',{staticClass:\"mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Select Encoder\")]),_c('v-divider')],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-flex',{attrs:{\"xs9\":\"\",\"md6\":\"\"}},[_c('v-select',{attrs:{\"items\":this.encoders,\"label\":\"Select Encoder\",\"single-line\":\"\",\"item-text\":\"name\",\"item-value\":\"id\",\"disabled\":_vm.recordingInProgress},model:{value:(_vm.selectedEncoder),callback:function ($$v) {_vm.selectedEncoder=$$v},expression:\"selectedEncoder\"}})],1)],1)],1),(_vm.recordings.length > 0)?_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Recordings\")]),_c('v-divider'),_vm._l((_vm.recordings),function(recording,idx){return _c('div',{key:recording.ts},[_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('div',[_c('h3',[_vm._v(\"Recording #\"+_vm._s(idx + 1))])]),_c('div',{staticClass:\"ml-3\"},[_c('div',[_c('audio',{attrs:{\"src\":recording.blobUrl,\"type\":recording.mimeType,\"controls\":\"true\"}})]),_c('div',[_c('a',{attrs:{\"href\":recording.blobUrl,\"download\":\"\"}},[_vm._v(\"download\")])]),_c('div',[_vm._v(\"\\n                size: \"+_vm._s(_vm._f(\"fileSizeToHumanSize\")(recording.size))+\", type: \"+_vm._s(recording.mimeType)+\"\\n              \")])])])],1)],1),(idx !== (_vm.recordings.length-1))?_c('v-divider'):_vm._e()],1)})],2):_vm._e(),_c('v-layout',{staticClass:\"mt-3\",attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Notes\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('p',[_vm._v(\"\\n        This is important mostly for safari/edge or any browser without native MediaRecorder support. Without native\\n        encoding, most encoding implementations encode the incoming audio stream to uncompressed PCM audio/wav.\\n        However, this significantly limits the duration of the recording due to memory constraints. And if not encoded\\n        before upload, the upload is significantly larger than it would be if using a compressed encoding. Encoding\\n        the wav data after recording, before uploading, is relatively straightforward. This test is specifically to\\n        test encoding \"),_c('em',[_vm._v(\"while\")]),_vm._v(\" recording.\\n      \")]),_c('p',[_vm._v(\"\\n        This test uses web workers to do the encoding. Check out\\n        \"),_c('a',{attrs:{\"href\":\"https://higuma.github.io/ogg-vorbis-encoder-js/\"}},[_vm._v(\"this demo\\n        \")]),_vm._v(\"\\n        for testing encoding with and without workers.\\n      \")]),_c('p',[_vm._v(\"\\n        If using ogg encoder, the resulting recordings will not playback on ios/safari because it doesn't support the\\n        format natively. Also, I was unable to get the minified version (~800k) of the ogg encoder to work. The\\n        unminified version currently used in this test is ~2.3MB (or ~400k gzipped).\\n      \")])])],1),_c('v-layout',{staticClass:\"mt-3\",attrs:{\"column\":\"\",\"wrap\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Source\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test6.vue\"}},[_vm._v(\"\\n            src/views/Test6.vue\\n          \")]),_c('ul',{staticClass:\"ml-3\"},[_c('li',[_vm._v(\"Primarily:\\n              \"),_c('a',{attrs:{\"href\":\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\"}},[_vm._v(\"\\n                src/shared/RecorderService.js\\n              \")])])])])])])],1),_c('v-layout',{attrs:{\"column\":\"\",\"wrap\":\"\",\"hidden-xs-only\":\"\"}},[_c('h4',{staticClass:\"mt-3\"},[_vm._v(\"Relevant\")]),_c('v-divider'),_c('div',{staticClass:\"ml-4\"},[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/zhuker/lamejs\"}},[_vm._v(\"https://github.com/zhuker/lamejs\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/zhuker/lamejs/pull/17\"}},[_vm._v(\"https://github.com/zhuker/lamejs/pull/17\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://higuma.github.io/ogg-vorbis-encoder-js/\"}},[_vm._v(\"https://higuma.github.io/ogg-vorbis-encoder-js/\\n          \")]),_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://github.com/higuma/ogg-vorbis-encoder-js\"}},[_vm._v(\"https://github.com/higuma/ogg-vorbis-encoder-js\\n              \")])])])])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container mb-5>\n    <v-layout row wrap>\n\n      <div class=\"test2\">\n        <h3>Test 6 <span v-if=\"$vuetify.breakpoint.xsOnly\"><br></span>\n          <span v-if=\"!$vuetify.breakpoint.xsOnly\"> - </span> In-browser Encoding\n        </h3>\n        <p>Tests to verify encoding capabilities <em>while</em> recording. Note that for this test, the native\n          MediaRecorder is disabled even on browsers that have it.</p>\n      </div>\n    </v-layout>\n\n    <v-layout row wrap class=\"ml-1 mt-1\" v-if=\"!hasMediaRecorder\">\n      <div>\n        <v-btn @click=\"startRecording\" :disabled=\"recordingInProgress\">Start Recording\n        </v-btn>\n        <v-btn @click=\"stopRecording\" :disabled=\"!recordingInProgress\">Stop Recording</v-btn>\n        <v-icon :class=\"recordingInProgress ? 'live' : ''\">mic</v-icon>\n      </div>\n    </v-layout>\n\n    <v-layout row wrap class=\"ml-1 mt-1\" v-if=\"hasMediaRecorder\">\n      <div>\n        <v-alert type=\"error\" value=\"true\">\n          This test only makes sense on browsers that don't have a native MediaRecorder. It would be possible to use a\n          manual encoder on other browsers, but this test isn't written to support it.\n        </v-alert>\n      </div>\n    </v-layout>\n\n    <v-layout row wrap class=\"mt-1\">\n      <v-flex xs12>\n        <h4 class=\"mt-3\">Select Encoder</h4>\n        <v-divider></v-divider>\n      </v-flex>\n      <v-flex xs12>\n        <v-flex xs9 md6>\n          <v-select\n            :items=\"this.encoders\"\n            v-model=\"selectedEncoder\"\n            label=\"Select Encoder\"\n            single-line\n            item-text=\"name\"\n            item-value=\"id\"\n            :disabled=\"recordingInProgress\"\n          >\n          </v-select>\n        </v-flex>\n      </v-flex>\n    </v-layout>\n\n    <v-layout column wrap v-if=\"recordings.length > 0\">\n      <h4 class=\"mt-3\">Recordings</h4>\n      <v-divider></v-divider>\n      <div v-for=\"(recording,idx) in recordings\" :key=\"recording.ts\">\n        <v-card>\n          <v-card-title primary-title>\n            <v-layout column wrap>\n              <div>\n                <h3>Recording #{{ idx + 1 }}</h3>\n              </div>\n              <div class=\"ml-3\">\n                <div>\n                  <audio :src=\"recording.blobUrl\" :type=\"recording.mimeType\" controls=\"true\"/>\n                </div>\n                <div>\n                  <a :href=\"recording.blobUrl\" download>download</a>\n                </div>\n                <div>\n                  size: {{recording.size | fileSizeToHumanSize}}, type: {{recording.mimeType}}\n                </div>\n              </div>\n            </v-layout>\n          </v-card-title>\n        </v-card>\n        <v-divider v-if=\"idx !== (recordings.length-1)\"/>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap class=\"mt-3\">\n      <h4 class=\"mt-3\">Notes</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <p>\n          This is important mostly for safari/edge or any browser without native MediaRecorder support. Without native\n          encoding, most encoding implementations encode the incoming audio stream to uncompressed PCM audio/wav.\n          However, this significantly limits the duration of the recording due to memory constraints. And if not encoded\n          before upload, the upload is significantly larger than it would be if using a compressed encoding. Encoding\n          the wav data after recording, before uploading, is relatively straightforward. This test is specifically to\n          test encoding <em>while</em> recording.\n        </p>\n        <p>\n          This test uses web workers to do the encoding. Check out\n          <a\n            href=\"https://higuma.github.io/ogg-vorbis-encoder-js/\">this demo\n          </a>\n          for testing encoding with and without workers.\n        </p>\n        <p>\n          If using ogg encoder, the resulting recordings will not playback on ios/safari because it doesn't support the\n          format natively. Also, I was unable to get the minified version (~800k) of the ogg encoder to work. The\n          unminified version currently used in this test is ~2.3MB (or ~400k gzipped).\n        </p>\n\n      </div>\n    </v-layout>\n\n    <v-layout column wrap class=\"mt-3\">\n      <h4 class=\"mt-3\">Source</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/views/Test6.vue\">\n              src/views/Test6.vue\n            </a>\n            <ul class=\"ml-3\">\n              <li>Primarily:\n                <a\n                  href=\"https://github.com/kaliatech/web-audio-recording-tests/blob/master/src/shared/RecorderService.js\">\n                  src/shared/RecorderService.js\n                </a>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </v-layout>\n\n    <v-layout column wrap hidden-xs-only>\n      <h4 class=\"mt-3\">Relevant</h4>\n      <v-divider></v-divider>\n      <div class=\"ml-4\">\n        <ul>\n          <li>\n            <a href=\"https://github.com/zhuker/lamejs\">https://github.com/zhuker/lamejs</a>\n          </li>\n          <li>\n            <a href=\"https://github.com/zhuker/lamejs/pull/17\">https://github.com/zhuker/lamejs/pull/17</a>\n          </li>\n          <li>\n            <a\n              href=\"https://higuma.github.io/ogg-vorbis-encoder-js/\">https://higuma.github.io/ogg-vorbis-encoder-js/\n            </a>\n            <ul>\n              <li>\n                <a\n                  href=\"https://github.com/higuma/ogg-vorbis-encoder-js\">https://github.com/higuma/ogg-vorbis-encoder-js\n                </a>\n              </li>\n            </ul>\n\n          </li>\n\n        </ul>\n      </div>\n    </v-layout>\n\n  </v-container>\n</template>\n\n<script>\nimport RecorderService from '@/shared/RecorderService'\nimport utils from '@/shared/Utils'\n\nconst encoders = [\n  { id: 'wav', name: 'audio/wav - custom - mono' },\n  { id: 'mp3', name: 'audio/mpeg - zhuker/lamejs - mono/128kbps' },\n  { id: 'ogg', name: 'audio/ogg - higuma/oggjs - mono/~128kps' }\n]\n\nexport default {\n  name: 'Test3',\n  filters: {\n    fileSizeToHumanSize (val) {\n      return utils.humanFileSize(val, true)\n    }\n  },\n  data () {\n    return {\n      encoders: encoders,\n      hasMediaRecorder: window.MediaRecorder || false,\n      selectedEncoder: encoders[0].id,\n      recordingInProgress: false,\n      recordings: []\n    }\n  },\n  watch: {},\n  created () {\n    this.recorderSrvc = new RecorderService()\n\n    // Override to force all browsers to use manual encoding\n    this.recorderSrvc.config.usingMediaRecorder = false\n\n    this.hasMediaRecorder = this.recorderSrvc.config.usingMediaRecorder\n    this.recorderSrvc.em.addEventListener('recording', (evt) => this.onNewRecording(evt))\n  },\n  mounted () {\n  },\n  methods: {\n    startRecording () {\n      this.recorderSrvc.config.manualEncoderId = this.selectedEncoder\n      this.recorderSrvc.startRecording()\n        .then(() => {\n          this.recordingInProgress = true\n        })\n        .catch((error) => {\n          console.error('Exception while start recording: ' + error)\n          alert('Exception while start recording: ' + error.message)\n        })\n    },\n    stopRecording () {\n      this.recordingInProgress = false\n      this.recorderSrvc.stopRecording()\n    },\n    onNewRecording (evt) {\n      this.recordings.push(evt.detail.recording)\n    }\n  }\n}\n</script>\n<style lang=\"stylus\" scoped=\"true\">\n  @import '~vuetify/src/stylus/settings/_variables'\n  @media screen and (min-width: $grid-breakpoints.sm)\n    audio\n      width 35em\n\n  @media screen and (max-width: ($grid-breakpoints.sm - 1))\n    audio\n      width 100%\n\n  .live\n    color red\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test6.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test6.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Test6.vue?vue&type=template&id=71cd8b71&scoped=true&\"\nimport script from \"./Test6.vue?vue&type=script&lang=js&\"\nexport * from \"./Test6.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Test6.vue?vue&type=style&index=0&id=71cd8b71&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"71cd8b71\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('h3',[_vm._v(\"Version\")]),_vm._v(\"\\n      \"+_vm._s(_vm.version)+\"\\n    \")]),_c('v-flex',{staticClass:\"mt-3\",attrs:{\"xs12\":\"\"}},[_c('h3',[_vm._v(\"Commit\")]),_vm._v(\"\\n      \"+_vm._s(_vm.commit)+\"\\n    \")]),_c('v-flex',{staticClass:\"mt-3\",attrs:{\"xs12\":\"\"}},[_c('h3',[_vm._v(\"Branch\")]),_vm._v(\"\\n      \"+_vm._s(_vm.branch)+\"\\n    \")]),_c('v-flex',{staticClass:\"mt-3\",attrs:{\"xs12\":\"\"}},[_c('h3',[_vm._v(\"Timestamp\")]),_vm._v(\"\\n      \"+_vm._s(_vm.timestamp)+\"\\n    \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid>\n    <v-layout row wrap>\n      <v-flex xs12>\n        <h3>Version</h3>\n        {{ version }}\n      </v-flex>\n\n      <v-flex xs12 class=\"mt-3\">\n        <h3>Commit</h3>\n        {{ commit }}\n      </v-flex>\n\n      <v-flex xs12 class=\"mt-3\">\n        <h3>Branch</h3>\n        {{ branch }}\n      </v-flex>\n\n      <v-flex xs12 class=\"mt-3\">\n        <h3>Timestamp</h3>\n        {{ timestamp }}\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\n\nexport default {\n  data () {\n    return {\n      version: typeof WEBPACK_VERSION === 'undefined' ? '-' : WEBPACK_VERSION,\n      commit: typeof WEBPACK_COMMITHASH === 'undefined' ? '-' : WEBPACK_COMMITHASH,\n      branch: typeof WEBPACK_BRANCH === 'undefined' ? '-' : WEBPACK_BRANCH,\n      timestamp: typeof WEBPACK_TIMESTAMP === 'undefined' ? '-' : WEBPACK_TIMESTAMP\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Version.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Version.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Version.vue?vue&type=template&id=3a06c8a2&\"\nimport script from \"./Version.vue?vue&type=script&lang=js&\"\nexport * from \"./Version.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nimport Home from '@/views/Home'\nimport Diagnostics from '@/views/Diagnostics'\nimport Test1 from '@/views/Test1'\nimport Test2 from '@/views/Test2'\nimport Test3 from '@/views/Test3'\nimport Test4 from '@/views/Test4'\nimport Test5 from '@/views/Test5'\nimport Test6 from '@/views/Test6'\nimport Version from '@/views/Version'\n\nVue.use(VueRouter)\n\nconst router = new VueRouter({\n  mode: 'hash',\n  routes: [\n    {\n      path: '/',\n      name: 'home',\n      component: Home\n    },\n    {\n      path: '/diagnostics',\n      name: 'diagnostics',\n      component: Diagnostics\n    },\n    {\n      path: '/test1',\n      name: 'test1',\n      component: Test1\n    },\n    {\n      path: '/test2',\n      name: 'test2',\n      component: Test2\n    },\n    {\n      path: '/test3',\n      name: 'test3',\n      component: Test3\n    },\n    {\n      path: '/test4',\n      name: 'test4',\n      component: Test4\n    },\n    {\n      path: '/test5',\n      name: 'test5',\n      component: Test5\n    },\n    {\n      path: '/test6',\n      name: 'test6',\n      component: Test6\n    },\n    {\n      path: '/version',\n      name: 'version',\n      component: Version\n    }\n  ]\n})\n\nexport default router\n","import 'babel-polyfill'\nimport Vue from 'vue'\nimport Vuetify from 'vuetify'\nimport App from './App.vue'\nimport router from '@/router/index.js'\n\n// import colors from 'vuetify/es5/util/colors'\n\nVue.use(Vuetify, {\n  theme: {\n    primary: '#546E7A',\n    secondary: '#B0BEC5',\n    accent: '#448AFF',\n    error: '#EF5350',\n    warning: '#FFF176',\n    info: '#2196f3',\n    success: '#4caf50'\n  }\n})\n\nVue.config.productionTip = false\n\nnew Vue({\n  router,\n  render: h => h(App)\n}).$mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Diagnostics.vue?vue&type=style&index=0&id=6cf7fd6f&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test3.vue?vue&type=style&index=0&id=3e85acbd&lang=stylus&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test1.vue?vue&type=style&index=0&id=bcc0a4ca&lang=stylus&scoped=true&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=styl&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test5.vue?vue&type=style&index=0&id=70bdb58e&lang=stylus&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=stylus&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test4.vue?vue&type=style&index=0&id=271d3caa&lang=stylus&scoped=true&\""],"sourceRoot":""}